<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Base class for modeling portfolio and measuring its performance"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.dev/api/portfolio/base/ rel=canonical><link href=../ rel=prev><link href=../decorators/ rel=next><link rel=icon href=/assets/logo/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.2+insiders-4.42.0"><title>base - vectorbt</title><link rel=stylesheet href=../../../assets/stylesheets/main.f2778614.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.46987102.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4QLCS0J048"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4QLCS0J048",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4QLCS0J048",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:title content=base><meta property=og:type content=website><meta content=https://vectorbt.dev/api/portfolio/base/ property=og:url><meta property=og:image:url content=/assets/logo/social-512x512.png><meta property=og:image:type content=image/png><meta property=og:description content="Base class for modeling portfolio and measuring its performance"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/assets/logo/favicon-16x16.png><link rel=manifest href=/assets/logo/site.webmanifest><link rel=mask-icon href=/assets/logo/safari-pinned-tab.svg color=#1e2029><link rel="shortcut icon" href=/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e2029><meta name=msapplication-config content=/assets/logo/browserconfig.xml><meta name=theme-color content=#1e2029></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#vectorbt.portfolio.base class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Get access to <a href=https://vectorbt.pro/ style="color: #ff6e42; text-decoration: underline;">vectorbt PRO</a> and join our quant army! </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=vectorbt class="md-header__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> vectorbt </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> base </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=../../../documentation/ class=md-tabs__link> Documentation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../../terms/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=vectorbt class="md-nav__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> vectorbt </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../.. class="md-nav__link "> <span class=md-ellipsis> Getting started </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/features/ class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/usage/ class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/resources/ class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> API </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../_settings/ class=md-nav__link> <span class=md-ellipsis> _settings </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../base/ class="md-nav__link "> <span class=md-ellipsis> base </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../base/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../base/array_wrapper/ class=md-nav__link> <span class=md-ellipsis> array_wrapper </span> </a> </li> <li class=md-nav__item> <a href=../../base/column_grouper/ class=md-nav__link> <span class=md-ellipsis> column_grouper </span> </a> </li> <li class=md-nav__item> <a href=../../base/combine_fns/ class=md-nav__link> <span class=md-ellipsis> combine_fns </span> </a> </li> <li class=md-nav__item> <a href=../../base/index_fns/ class=md-nav__link> <span class=md-ellipsis> index_fns </span> </a> </li> <li class=md-nav__item> <a href=../../base/indexing/ class=md-nav__link> <span class=md-ellipsis> indexing </span> </a> </li> <li class=md-nav__item> <a href=../../base/reshape_fns/ class=md-nav__link> <span class=md-ellipsis> reshape_fns </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__container"> <a href=../../data/ class="md-nav__link "> <span class=md-ellipsis> data </span> </a> <label class="md-nav__link " for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../data/custom/ class=md-nav__link> <span class=md-ellipsis> custom </span> </a> </li> <li class=md-nav__item> <a href=../../data/updater/ class=md-nav__link> <span class=md-ellipsis> updater </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <div class="md-nav__link md-nav__container"> <a href=../../generic/ class="md-nav__link "> <span class=md-ellipsis> generic </span> </a> <label class="md-nav__link " for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> generic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../generic/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../generic/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../generic/drawdowns/ class=md-nav__link> <span class=md-ellipsis> drawdowns </span> </a> </li> <li class=md-nav__item> <a href=../../generic/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../generic/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../generic/plots_builder/ class=md-nav__link> <span class=md-ellipsis> plots_builder </span> </a> </li> <li class=md-nav__item> <a href=../../generic/plotting/ class=md-nav__link> <span class=md-ellipsis> plotting </span> </a> </li> <li class=md-nav__item> <a href=../../generic/ranges/ class=md-nav__link> <span class=md-ellipsis> ranges </span> </a> </li> <li class=md-nav__item> <a href=../../generic/splitters/ class=md-nav__link> <span class=md-ellipsis> splitters </span> </a> </li> <li class=md-nav__item> <a href=../../generic/stats_builder/ class=md-nav__link> <span class=md-ellipsis> stats_builder </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <div class="md-nav__link md-nav__container"> <a href=../../indicators/ class="md-nav__link "> <span class=md-ellipsis> indicators </span> </a> <label class="md-nav__link " for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> indicators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../indicators/basic/ class=md-nav__link> <span class=md-ellipsis> basic </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/configs/ class=md-nav__link> <span class=md-ellipsis> configs </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/factory/ class=md-nav__link> <span class=md-ellipsis> factory </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <div class="md-nav__link md-nav__container"> <a href=../../labels/ class="md-nav__link "> <span class=md-ellipsis> labels </span> </a> <label class="md-nav__link " for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> labels </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../labels/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../labels/generators/ class=md-nav__link> <span class=md-ellipsis> generators </span> </a> </li> <li class=md-nav__item> <a href=../../labels/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <div class="md-nav__link md-nav__container"> <a href=../../messaging/ class="md-nav__link "> <span class=md-ellipsis> messaging </span> </a> <label class="md-nav__link " for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> messaging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../messaging/telegram/ class=md-nav__link> <span class=md-ellipsis> telegram </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ohlcv_accessors/ class=md-nav__link> <span class=md-ellipsis> ohlcv_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> portfolio </span> </a> <label class="md-nav__link " for=__nav_3_10 id=__nav_3_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=true> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> portfolio </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> base </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> base </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#workflow class=md-nav__link> <span class=md-ellipsis> Workflow </span> </a> </li> <li class=md-nav__item> <a href=#simulation-modes class=md-nav__link> <span class=md-ellipsis> Simulation modes </span> </a> <nav class=md-nav aria-label="Simulation modes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#from-orders class=md-nav__link> <span class=md-ellipsis> From orders </span> </a> </li> <li class=md-nav__item> <a href=#from-signals class=md-nav__link> <span class=md-ellipsis> From signals </span> </a> </li> <li class=md-nav__item> <a href=#from-order-function class=md-nav__link> <span class=md-ellipsis> From order function </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#broadcasting class=md-nav__link> <span class=md-ellipsis> Broadcasting </span> </a> <nav class=md-nav aria-label=Broadcasting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#flexible-indexing class=md-nav__link> <span class=md-ellipsis> Flexible indexing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#defaults class=md-nav__link> <span class=md-ellipsis> Defaults </span> </a> </li> <li class=md-nav__item> <a href=#grouping class=md-nav__link> <span class=md-ellipsis> Grouping </span> </a> </li> <li class=md-nav__item> <a href=#indexing class=md-nav__link> <span class=md-ellipsis> Indexing </span> </a> </li> <li class=md-nav__item> <a href=#logging class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=#performance-and-memory class=md-nav__link> <span class=md-ellipsis> Performance and memory </span> </a> </li> <li class=md-nav__item> <a href=#saving-and-loading class=md-nav__link> <span class=md-ellipsis> Saving and loading </span> </a> </li> <li class=md-nav__item> <a href=#stats class=md-nav__link> <span class=md-ellipsis> Stats </span> </a> <nav class=md-nav aria-label=Stats> <ul class=md-nav__list> <li class=md-nav__item> <a href=#column-group-and-tag-selection class=md-nav__link> <span class=md-ellipsis> Column, group, and tag selection </span> </a> </li> <li class=md-nav__item> <a href=#aggregation class=md-nav__link> <span class=md-ellipsis> Aggregation </span> </a> </li> <li class=md-nav__item> <a href=#metric-selection class=md-nav__link> <span class=md-ellipsis> Metric selection </span> </a> </li> <li class=md-nav__item> <a href=#passing-parameters class=md-nav__link> <span class=md-ellipsis> Passing parameters </span> </a> </li> <li class=md-nav__item> <a href=#custom-metrics class=md-nav__link> <span class=md-ellipsis> Custom metrics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#returns-stats class=md-nav__link> <span class=md-ellipsis> Returns stats </span> </a> </li> <li class=md-nav__item> <a href=#plots class=md-nav__link> <span class=md-ellipsis> Plots </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.returns_acc_config class=md-nav__link> <span class=md-ellipsis> returns_acc_config </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.MetaPortfolio class=md-nav__link> <span class=md-ellipsis> MetaPortfolio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio class=md-nav__link> <span class=md-ellipsis> Portfolio() </span> </a> <nav class=md-nav aria-label=Portfolio()> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.alpha class=md-nav__link> <span class=md-ellipsis> alpha() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.annual_returns class=md-nav__link> <span class=md-ellipsis> annual_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.annualized_return class=md-nav__link> <span class=md-ellipsis> annualized_return() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.annualized_volatility class=md-nav__link> <span class=md-ellipsis> annualized_volatility() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.asset_flow class=md-nav__link> <span class=md-ellipsis> asset_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.asset_returns class=md-nav__link> <span class=md-ellipsis> asset_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.asset_value class=md-nav__link> <span class=md-ellipsis> asset_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.assets class=md-nav__link> <span class=md-ellipsis> assets() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.benchmark_rets class=md-nav__link> <span class=md-ellipsis> benchmark_rets() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.benchmark_returns class=md-nav__link> <span class=md-ellipsis> benchmark_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.benchmark_value class=md-nav__link> <span class=md-ellipsis> benchmark_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.beta class=md-nav__link> <span class=md-ellipsis> beta() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.call_seq class=md-nav__link> <span class=md-ellipsis> call_seq </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.calmar_ratio class=md-nav__link> <span class=md-ellipsis> calmar_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.capture class=md-nav__link> <span class=md-ellipsis> capture() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cash class=md-nav__link> <span class=md-ellipsis> cash() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cash_flow class=md-nav__link> <span class=md-ellipsis> cash_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cash_sharing class=md-nav__link> <span class=md-ellipsis> cash_sharing </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cond_value_at_risk class=md-nav__link> <span class=md-ellipsis> cond_value_at_risk() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cumulative_returns class=md-nav__link> <span class=md-ellipsis> cumulative_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.daily_returns class=md-nav__link> <span class=md-ellipsis> daily_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.deflated_sharpe_ratio class=md-nav__link> <span class=md-ellipsis> deflated_sharpe_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.down_capture class=md-nav__link> <span class=md-ellipsis> down_capture() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.downside_risk class=md-nav__link> <span class=md-ellipsis> downside_risk() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.drawdown class=md-nav__link> <span class=md-ellipsis> drawdown() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.drawdowns class=md-nav__link> <span class=md-ellipsis> drawdowns </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.entry_trades class=md-nav__link> <span class=md-ellipsis> entry_trades </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.exit_trades class=md-nav__link> <span class=md-ellipsis> exit_trades </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.fillna_close class=md-nav__link> <span class=md-ellipsis> fillna_close </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.final_value class=md-nav__link> <span class=md-ellipsis> final_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_holding class=md-nav__link> <span class=md-ellipsis> from_holding() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_order_func class=md-nav__link> <span class=md-ellipsis> from_order_func() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_orders class=md-nav__link> <span class=md-ellipsis> from_orders() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_random_signals class=md-nav__link> <span class=md-ellipsis> from_random_signals() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_signals class=md-nav__link> <span class=md-ellipsis> from_signals() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_drawdowns class=md-nav__link> <span class=md-ellipsis> get_drawdowns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_entry_trades class=md-nav__link> <span class=md-ellipsis> get_entry_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_exit_trades class=md-nav__link> <span class=md-ellipsis> get_exit_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_filled_close class=md-nav__link> <span class=md-ellipsis> get_filled_close() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_init_cash class=md-nav__link> <span class=md-ellipsis> get_init_cash() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_logs class=md-nav__link> <span class=md-ellipsis> get_logs() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_orders class=md-nav__link> <span class=md-ellipsis> get_orders() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_positions class=md-nav__link> <span class=md-ellipsis> get_positions() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_qs class=md-nav__link> <span class=md-ellipsis> get_qs() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_returns_acc class=md-nav__link> <span class=md-ellipsis> get_returns_acc() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_trades class=md-nav__link> <span class=md-ellipsis> get_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.gross_exposure class=md-nav__link> <span class=md-ellipsis> gross_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.indexing_func class=md-nav__link> <span class=md-ellipsis> indexing_func() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.information_ratio class=md-nav__link> <span class=md-ellipsis> information_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.init_cash class=md-nav__link> <span class=md-ellipsis> init_cash </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.log_records class=md-nav__link> <span class=md-ellipsis> log_records </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.logs class=md-nav__link> <span class=md-ellipsis> logs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.max_drawdown class=md-nav__link> <span class=md-ellipsis> max_drawdown() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.metrics class=md-nav__link> <span class=md-ellipsis> metrics </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.net_exposure class=md-nav__link> <span class=md-ellipsis> net_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.omega_ratio class=md-nav__link> <span class=md-ellipsis> omega_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.order_records class=md-nav__link> <span class=md-ellipsis> order_records </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.orders class=md-nav__link> <span class=md-ellipsis> orders </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot class=md-nav__link> <span class=md-ellipsis> plot() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_asset_flow class=md-nav__link> <span class=md-ellipsis> plot_asset_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_asset_value class=md-nav__link> <span class=md-ellipsis> plot_asset_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_assets class=md-nav__link> <span class=md-ellipsis> plot_assets() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_cash class=md-nav__link> <span class=md-ellipsis> plot_cash() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_cash_flow class=md-nav__link> <span class=md-ellipsis> plot_cash_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_cum_returns class=md-nav__link> <span class=md-ellipsis> plot_cum_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_drawdowns class=md-nav__link> <span class=md-ellipsis> plot_drawdowns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_gross_exposure class=md-nav__link> <span class=md-ellipsis> plot_gross_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_net_exposure class=md-nav__link> <span class=md-ellipsis> plot_net_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_orders class=md-nav__link> <span class=md-ellipsis> plot_orders() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_position_pnl class=md-nav__link> <span class=md-ellipsis> plot_position_pnl() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_positions class=md-nav__link> <span class=md-ellipsis> plot_positions() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_trade_pnl class=md-nav__link> <span class=md-ellipsis> plot_trade_pnl() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_trades class=md-nav__link> <span class=md-ellipsis> plot_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_underwater class=md-nav__link> <span class=md-ellipsis> plot_underwater() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_value class=md-nav__link> <span class=md-ellipsis> plot_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plots_defaults class=md-nav__link> <span class=md-ellipsis> plots_defaults </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.position_coverage class=md-nav__link> <span class=md-ellipsis> position_coverage() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.position_mask class=md-nav__link> <span class=md-ellipsis> position_mask() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.positions class=md-nav__link> <span class=md-ellipsis> positions </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.post_resolve_attr class=md-nav__link> <span class=md-ellipsis> post_resolve_attr() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.pre_resolve_attr class=md-nav__link> <span class=md-ellipsis> pre_resolve_attr() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.qs class=md-nav__link> <span class=md-ellipsis> qs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.regroup class=md-nav__link> <span class=md-ellipsis> regroup() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.returns class=md-nav__link> <span class=md-ellipsis> returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.returns_acc class=md-nav__link> <span class=md-ellipsis> returns_acc </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.returns_stats class=md-nav__link> <span class=md-ellipsis> returns_stats() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.sharpe_ratio class=md-nav__link> <span class=md-ellipsis> sharpe_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.sortino_ratio class=md-nav__link> <span class=md-ellipsis> sortino_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.stats_defaults class=md-nav__link> <span class=md-ellipsis> stats_defaults </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.subplots class=md-nav__link> <span class=md-ellipsis> subplots </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.tail_ratio class=md-nav__link> <span class=md-ellipsis> tail_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.total_benchmark_return class=md-nav__link> <span class=md-ellipsis> total_benchmark_return() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.total_profit class=md-nav__link> <span class=md-ellipsis> total_profit() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.total_return class=md-nav__link> <span class=md-ellipsis> total_return() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.trades class=md-nav__link> <span class=md-ellipsis> trades </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.trades_type class=md-nav__link> <span class=md-ellipsis> trades_type </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.up_capture class=md-nav__link> <span class=md-ellipsis> up_capture() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.value class=md-nav__link> <span class=md-ellipsis> value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.value_at_risk class=md-nav__link> <span class=md-ellipsis> value_at_risk() </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../logs/ class=md-nav__link> <span class=md-ellipsis> logs </span> </a> </li> <li class=md-nav__item> <a href=../nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../orders/ class=md-nav__link> <span class=md-ellipsis> orders </span> </a> </li> <li class=md-nav__item> <a href=../trades/ class=md-nav__link> <span class=md-ellipsis> trades </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../px_accessors/ class=md-nav__link> <span class=md-ellipsis> px_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__container"> <a href=../../records/ class="md-nav__link "> <span class=md-ellipsis> records </span> </a> <label class="md-nav__link " for=__nav_3_12 id=__nav_3_12_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../records/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../records/col_mapper/ class=md-nav__link> <span class=md-ellipsis> col_mapper </span> </a> </li> <li class=md-nav__item> <a href=../../records/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../records/mapped_array/ class=md-nav__link> <span class=md-ellipsis> mapped_array </span> </a> </li> <li class=md-nav__item> <a href=../../records/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__container"> <a href=../../returns/ class="md-nav__link "> <span class=md-ellipsis> returns </span> </a> <label class="md-nav__link " for=__nav_3_13 id=__nav_3_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_13_label aria-expanded=false> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> returns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../returns/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../returns/metrics/ class=md-nav__link> <span class=md-ellipsis> metrics </span> </a> </li> <li class=md-nav__item> <a href=../../returns/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../returns/qs_adapter/ class=md-nav__link> <span class=md-ellipsis> qs_adapter </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../root_accessors/ class=md-nav__link> <span class=md-ellipsis> root_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_15> <div class="md-nav__link md-nav__container"> <a href=../../signals/ class="md-nav__link "> <span class=md-ellipsis> signals </span> </a> <label class="md-nav__link " for=__nav_3_15 id=__nav_3_15_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_15_label aria-expanded=false> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> signals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../signals/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../signals/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../signals/factory/ class=md-nav__link> <span class=md-ellipsis> factory </span> </a> </li> <li class=md-nav__item> <a href=../../signals/generators/ class=md-nav__link> <span class=md-ellipsis> generators </span> </a> </li> <li class=md-nav__item> <a href=../../signals/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_16> <div class="md-nav__link md-nav__container"> <a href=../../utils/ class="md-nav__link "> <span class=md-ellipsis> utils </span> </a> <label class="md-nav__link " for=__nav_3_16 id=__nav_3_16_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_16_label aria-expanded=false> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> utils </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../utils/array_/ class=md-nav__link> <span class=md-ellipsis> array_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/attr_/ class=md-nav__link> <span class=md-ellipsis> attr_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/checks/ class=md-nav__link> <span class=md-ellipsis> checks </span> </a> </li> <li class=md-nav__item> <a href=../../utils/colors/ class=md-nav__link> <span class=md-ellipsis> colors </span> </a> </li> <li class=md-nav__item> <a href=../../utils/config/ class=md-nav__link> <span class=md-ellipsis> config </span> </a> </li> <li class=md-nav__item> <a href=../../utils/datetime_/ class=md-nav__link> <span class=md-ellipsis> datetime_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../utils/docs/ class=md-nav__link> <span class=md-ellipsis> docs </span> </a> </li> <li class=md-nav__item> <a href=../../utils/enum_/ class=md-nav__link> <span class=md-ellipsis> enum_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/figure/ class=md-nav__link> <span class=md-ellipsis> figure </span> </a> </li> <li class=md-nav__item> <a href=../../utils/image_/ class=md-nav__link> <span class=md-ellipsis> image_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/mapping/ class=md-nav__link> <span class=md-ellipsis> mapping </span> </a> </li> <li class=md-nav__item> <a href=../../utils/math_/ class=md-nav__link> <span class=md-ellipsis> math_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/module_/ class=md-nav__link> <span class=md-ellipsis> module_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/params/ class=md-nav__link> <span class=md-ellipsis> params </span> </a> </li> <li class=md-nav__item> <a href=../../utils/random_/ class=md-nav__link> <span class=md-ellipsis> random_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/requests_/ class=md-nav__link> <span class=md-ellipsis> requests_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/schedule_/ class=md-nav__link> <span class=md-ellipsis> schedule_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/tags/ class=md-nav__link> <span class=md-ellipsis> tags </span> </a> </li> <li class=md-nav__item> <a href=../../utils/template/ class=md-nav__link> <span class=md-ellipsis> template </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../terms/ class="md-nav__link "> <span class=md-ellipsis> Terms </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Terms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../terms/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#workflow class=md-nav__link> <span class=md-ellipsis> Workflow </span> </a> </li> <li class=md-nav__item> <a href=#simulation-modes class=md-nav__link> <span class=md-ellipsis> Simulation modes </span> </a> <nav class=md-nav aria-label="Simulation modes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#from-orders class=md-nav__link> <span class=md-ellipsis> From orders </span> </a> </li> <li class=md-nav__item> <a href=#from-signals class=md-nav__link> <span class=md-ellipsis> From signals </span> </a> </li> <li class=md-nav__item> <a href=#from-order-function class=md-nav__link> <span class=md-ellipsis> From order function </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#broadcasting class=md-nav__link> <span class=md-ellipsis> Broadcasting </span> </a> <nav class=md-nav aria-label=Broadcasting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#flexible-indexing class=md-nav__link> <span class=md-ellipsis> Flexible indexing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#defaults class=md-nav__link> <span class=md-ellipsis> Defaults </span> </a> </li> <li class=md-nav__item> <a href=#grouping class=md-nav__link> <span class=md-ellipsis> Grouping </span> </a> </li> <li class=md-nav__item> <a href=#indexing class=md-nav__link> <span class=md-ellipsis> Indexing </span> </a> </li> <li class=md-nav__item> <a href=#logging class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=#caching class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=#performance-and-memory class=md-nav__link> <span class=md-ellipsis> Performance and memory </span> </a> </li> <li class=md-nav__item> <a href=#saving-and-loading class=md-nav__link> <span class=md-ellipsis> Saving and loading </span> </a> </li> <li class=md-nav__item> <a href=#stats class=md-nav__link> <span class=md-ellipsis> Stats </span> </a> <nav class=md-nav aria-label=Stats> <ul class=md-nav__list> <li class=md-nav__item> <a href=#column-group-and-tag-selection class=md-nav__link> <span class=md-ellipsis> Column, group, and tag selection </span> </a> </li> <li class=md-nav__item> <a href=#aggregation class=md-nav__link> <span class=md-ellipsis> Aggregation </span> </a> </li> <li class=md-nav__item> <a href=#metric-selection class=md-nav__link> <span class=md-ellipsis> Metric selection </span> </a> </li> <li class=md-nav__item> <a href=#passing-parameters class=md-nav__link> <span class=md-ellipsis> Passing parameters </span> </a> </li> <li class=md-nav__item> <a href=#custom-metrics class=md-nav__link> <span class=md-ellipsis> Custom metrics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#returns-stats class=md-nav__link> <span class=md-ellipsis> Returns stats </span> </a> </li> <li class=md-nav__item> <a href=#plots class=md-nav__link> <span class=md-ellipsis> Plots </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.returns_acc_config class=md-nav__link> <span class=md-ellipsis> returns_acc_config </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.MetaPortfolio class=md-nav__link> <span class=md-ellipsis> MetaPortfolio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio class=md-nav__link> <span class=md-ellipsis> Portfolio() </span> </a> <nav class=md-nav aria-label=Portfolio()> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.alpha class=md-nav__link> <span class=md-ellipsis> alpha() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.annual_returns class=md-nav__link> <span class=md-ellipsis> annual_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.annualized_return class=md-nav__link> <span class=md-ellipsis> annualized_return() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.annualized_volatility class=md-nav__link> <span class=md-ellipsis> annualized_volatility() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.asset_flow class=md-nav__link> <span class=md-ellipsis> asset_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.asset_returns class=md-nav__link> <span class=md-ellipsis> asset_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.asset_value class=md-nav__link> <span class=md-ellipsis> asset_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.assets class=md-nav__link> <span class=md-ellipsis> assets() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.benchmark_rets class=md-nav__link> <span class=md-ellipsis> benchmark_rets() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.benchmark_returns class=md-nav__link> <span class=md-ellipsis> benchmark_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.benchmark_value class=md-nav__link> <span class=md-ellipsis> benchmark_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.beta class=md-nav__link> <span class=md-ellipsis> beta() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.call_seq class=md-nav__link> <span class=md-ellipsis> call_seq </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.calmar_ratio class=md-nav__link> <span class=md-ellipsis> calmar_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.capture class=md-nav__link> <span class=md-ellipsis> capture() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cash class=md-nav__link> <span class=md-ellipsis> cash() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cash_flow class=md-nav__link> <span class=md-ellipsis> cash_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cash_sharing class=md-nav__link> <span class=md-ellipsis> cash_sharing </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cond_value_at_risk class=md-nav__link> <span class=md-ellipsis> cond_value_at_risk() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.cumulative_returns class=md-nav__link> <span class=md-ellipsis> cumulative_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.daily_returns class=md-nav__link> <span class=md-ellipsis> daily_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.deflated_sharpe_ratio class=md-nav__link> <span class=md-ellipsis> deflated_sharpe_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.down_capture class=md-nav__link> <span class=md-ellipsis> down_capture() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.downside_risk class=md-nav__link> <span class=md-ellipsis> downside_risk() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.drawdown class=md-nav__link> <span class=md-ellipsis> drawdown() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.drawdowns class=md-nav__link> <span class=md-ellipsis> drawdowns </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.entry_trades class=md-nav__link> <span class=md-ellipsis> entry_trades </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.exit_trades class=md-nav__link> <span class=md-ellipsis> exit_trades </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.fillna_close class=md-nav__link> <span class=md-ellipsis> fillna_close </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.final_value class=md-nav__link> <span class=md-ellipsis> final_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_holding class=md-nav__link> <span class=md-ellipsis> from_holding() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_order_func class=md-nav__link> <span class=md-ellipsis> from_order_func() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_orders class=md-nav__link> <span class=md-ellipsis> from_orders() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_random_signals class=md-nav__link> <span class=md-ellipsis> from_random_signals() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.from_signals class=md-nav__link> <span class=md-ellipsis> from_signals() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_drawdowns class=md-nav__link> <span class=md-ellipsis> get_drawdowns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_entry_trades class=md-nav__link> <span class=md-ellipsis> get_entry_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_exit_trades class=md-nav__link> <span class=md-ellipsis> get_exit_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_filled_close class=md-nav__link> <span class=md-ellipsis> get_filled_close() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_init_cash class=md-nav__link> <span class=md-ellipsis> get_init_cash() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_logs class=md-nav__link> <span class=md-ellipsis> get_logs() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_orders class=md-nav__link> <span class=md-ellipsis> get_orders() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_positions class=md-nav__link> <span class=md-ellipsis> get_positions() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_qs class=md-nav__link> <span class=md-ellipsis> get_qs() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_returns_acc class=md-nav__link> <span class=md-ellipsis> get_returns_acc() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.get_trades class=md-nav__link> <span class=md-ellipsis> get_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.gross_exposure class=md-nav__link> <span class=md-ellipsis> gross_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.indexing_func class=md-nav__link> <span class=md-ellipsis> indexing_func() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.information_ratio class=md-nav__link> <span class=md-ellipsis> information_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.init_cash class=md-nav__link> <span class=md-ellipsis> init_cash </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.log_records class=md-nav__link> <span class=md-ellipsis> log_records </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.logs class=md-nav__link> <span class=md-ellipsis> logs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.max_drawdown class=md-nav__link> <span class=md-ellipsis> max_drawdown() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.metrics class=md-nav__link> <span class=md-ellipsis> metrics </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.net_exposure class=md-nav__link> <span class=md-ellipsis> net_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.omega_ratio class=md-nav__link> <span class=md-ellipsis> omega_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.order_records class=md-nav__link> <span class=md-ellipsis> order_records </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.orders class=md-nav__link> <span class=md-ellipsis> orders </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot class=md-nav__link> <span class=md-ellipsis> plot() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_asset_flow class=md-nav__link> <span class=md-ellipsis> plot_asset_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_asset_value class=md-nav__link> <span class=md-ellipsis> plot_asset_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_assets class=md-nav__link> <span class=md-ellipsis> plot_assets() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_cash class=md-nav__link> <span class=md-ellipsis> plot_cash() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_cash_flow class=md-nav__link> <span class=md-ellipsis> plot_cash_flow() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_cum_returns class=md-nav__link> <span class=md-ellipsis> plot_cum_returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_drawdowns class=md-nav__link> <span class=md-ellipsis> plot_drawdowns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_gross_exposure class=md-nav__link> <span class=md-ellipsis> plot_gross_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_net_exposure class=md-nav__link> <span class=md-ellipsis> plot_net_exposure() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_orders class=md-nav__link> <span class=md-ellipsis> plot_orders() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_position_pnl class=md-nav__link> <span class=md-ellipsis> plot_position_pnl() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_positions class=md-nav__link> <span class=md-ellipsis> plot_positions() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_trade_pnl class=md-nav__link> <span class=md-ellipsis> plot_trade_pnl() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_trades class=md-nav__link> <span class=md-ellipsis> plot_trades() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_underwater class=md-nav__link> <span class=md-ellipsis> plot_underwater() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plot_value class=md-nav__link> <span class=md-ellipsis> plot_value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.plots_defaults class=md-nav__link> <span class=md-ellipsis> plots_defaults </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.position_coverage class=md-nav__link> <span class=md-ellipsis> position_coverage() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.position_mask class=md-nav__link> <span class=md-ellipsis> position_mask() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.positions class=md-nav__link> <span class=md-ellipsis> positions </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.post_resolve_attr class=md-nav__link> <span class=md-ellipsis> post_resolve_attr() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.pre_resolve_attr class=md-nav__link> <span class=md-ellipsis> pre_resolve_attr() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.qs class=md-nav__link> <span class=md-ellipsis> qs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.regroup class=md-nav__link> <span class=md-ellipsis> regroup() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.returns class=md-nav__link> <span class=md-ellipsis> returns() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.returns_acc class=md-nav__link> <span class=md-ellipsis> returns_acc </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.returns_stats class=md-nav__link> <span class=md-ellipsis> returns_stats() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.sharpe_ratio class=md-nav__link> <span class=md-ellipsis> sharpe_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.sortino_ratio class=md-nav__link> <span class=md-ellipsis> sortino_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.stats_defaults class=md-nav__link> <span class=md-ellipsis> stats_defaults </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.subplots class=md-nav__link> <span class=md-ellipsis> subplots </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.tail_ratio class=md-nav__link> <span class=md-ellipsis> tail_ratio() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.total_benchmark_return class=md-nav__link> <span class=md-ellipsis> total_benchmark_return() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.total_profit class=md-nav__link> <span class=md-ellipsis> total_profit() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.total_return class=md-nav__link> <span class=md-ellipsis> total_return() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.trades class=md-nav__link> <span class=md-ellipsis> trades </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.trades_type class=md-nav__link> <span class=md-ellipsis> trades_type </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.up_capture class=md-nav__link> <span class=md-ellipsis> up_capture() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.value class=md-nav__link> <span class=md-ellipsis> value() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.portfolio.base.Portfolio.value_at_risk class=md-nav__link> <span class=md-ellipsis> value_at_risk() </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=vectorbt.portfolio.base>base <span class=dobjtype>module</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base title="Permanent link">&para;</a></h1> <p>Base class for modeling portfolio and measuring its performance.</p> <p>Provides the class <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> for modeling portfolio performance and calculating various risk and performance metrics. It uses Numba-compiled functions from <a href=/api/portfolio/nb/ title=vectorbt.portfolio.nb>vectorbt.portfolio.nb</a> for most computations and record classes based on <a href=/api/records/base/#vectorbt.records.base.Records title=vectorbt.records.base.Records>Records</a> for evaluating events such as orders, logs, trades, positions, and drawdowns.</p> <p>The job of the <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> class is to create a series of positions allocated against a cash component, produce an equity curve, incorporate basic transaction costs and produce a set of statistics about its performance. In particular, it outputs position/profit metrics and drawdown information.</p> <p>Run for the examples below:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>talib</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>

<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>vectorbt</span> <span class=k>as</span> <span class=nn>vbt</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.utils.colors</span> <span class=kn>import</span> <span class=n>adjust_opacity</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.utils.enum_</span> <span class=kn>import</span> <span class=n>map_enum_fields</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.base.reshape_fns</span> <span class=kn>import</span> <span class=n>broadcast</span><span class=p>,</span> <span class=n>flex_select_auto_nb</span><span class=p>,</span> <span class=n>to_2d_array</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.portfolio.enums</span> <span class=kn>import</span> <span class=n>SizeType</span><span class=p>,</span> <span class=n>Direction</span><span class=p>,</span> <span class=n>NoOrder</span><span class=p>,</span> <span class=n>OrderStatus</span><span class=p>,</span> <span class=n>OrderSide</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.portfolio</span> <span class=kn>import</span> <span class=n>nb</span>
</code></pre></div> <h2 id=workflow>Workflow<a class=headerlink href=#workflow title="Permanent link">&para;</a></h2> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> class does quite a few things to simulate your strategy.</p> <p><strong>Preparation</strong> phase (in the particular class method):</p> <ul> <li>Receives a set of inputs, such as signal arrays and other parameters</li> <li>Resolves parameter defaults by searching for them in the global settings</li> <li>Brings input arrays to a single shape</li> <li>Does some basic validation of inputs and converts Pandas objects to NumPy arrays</li> <li>Passes everything to a Numba-compiled simulation function</li> </ul> <p><strong>Simulation</strong> phase (in the particular simulation function using Numba):</p> <ul> <li>The simulation function traverses the broadcasted shape element by element, row by row (time dimension), column by column (asset dimension)</li> <li>For each asset and timestamp (= element):<ul> <li>Gets all available information related to this element and executes the logic</li> <li>Generates an order or skips the element altogether</li> <li>If an order has been issued, processes the order and fills/ignores/rejects it</li> <li>If the order has been filled, registers the result by appending it to the order records</li> <li>Updates the current state such as the cash and asset balances</li> </ul> </li> </ul> <p><strong>Construction</strong> phase (in the particular class method):</p> <ul> <li>Receives the returned order records and initializes a new <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> object</li> </ul> <p><strong>Analysis</strong> phase (in the <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> object)</p> <ul> <li>Offers a broad range of risk &amp; performance metrics based on order records</li> </ul> <h2 id=simulation-modes>Simulation modes<a class=headerlink href=#simulation-modes title="Permanent link">&para;</a></h2> <p>There are three main simulation modes.</p> <h3 id=from-orders>From orders<a class=headerlink href=#from-orders title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a> is the most straightforward and the fastest out of all simulation modes.</p> <p>An order is a simple instruction that contains size, price, fees, and other information (see <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order title=vectorbt.portfolio.enums.Order>Order</a> for details about what information a typical order requires). Instead of creating a <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order title=vectorbt.portfolio.enums.Order>Order</a> tuple for each asset and timestamp (which may waste a lot of memory) and appending it to a (potentially huge) list for processing, <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a> takes each of those information pieces as an array, broadcasts them against each other, and creates a <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order title=vectorbt.portfolio.enums.Order>Order</a> tuple out of each element for us.</p> <p>Thanks to broadcasting, we can pass any of the information as a 2-dim array, as a 1-dim array per column or row, and as a constant. And we don't even need to provide every piece of information - vectorbt fills the missing data with default constants, without wasting memory.</p> <p>Here's an example:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>size</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>])</span>  <span class=c1># per row</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>price</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=s1>&#39;b&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]})</span>  <span class=c1># per element</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>direction</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;longonly&#39;</span><span class=p>,</span> <span class=s1>&#39;shortonly&#39;</span><span class=p>]</span>  <span class=c1># per column</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>fees</span> <span class=o>=</span> <span class=mf>0.01</span>  <span class=c1># per frame</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>direction</span><span class=o>=</span><span class=n>direction</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=n>fees</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>records_readable</span>
<span class=go>   Order Id Column  Timestamp  Size  Price  Fees  Side</span>
<span class=go>0         0      a          0   1.0    1.0  0.01   Buy</span>
<span class=go>1         1      a          1   1.0    2.0  0.02  Sell</span>
<span class=go>2         2      a          2   1.0    3.0  0.03   Buy</span>
<span class=go>3         3      a          3   1.0    4.0  0.04  Sell</span>
<span class=go>4         4      b          0   1.0    4.0  0.04  Sell</span>
<span class=go>5         5      b          1   1.0    3.0  0.03   Buy</span>
<span class=go>6         6      b          2   1.0    2.0  0.02  Sell</span>
<span class=go>7         7      b          3   1.0    1.0  0.01   Buy</span>
</code></pre></div> <p>This method is particularly useful in situations where you don't need any further logic apart from filling orders at predefined timestamps. If you want to issue orders depending upon the previous performance, the current state, or other custom conditions, head over to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a> or <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a>.</p> <h3 id=from-signals>From signals<a class=headerlink href=#from-signals title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a> is centered around signals. It adds an abstraction layer on top of <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a> to automate some signaling processes. For example, by default, it won't let us execute another entry signal if we are already in the position. It also implements stop loss and take profit orders for exiting positions. Nevertheless, this method behaves similarly to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a> and accepts most of its arguments; in fact, by setting <code>accumulate=True</code>, it behaves quite similarly to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> <p>Let's replicate the example above using signals:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>exits</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span><span class=n>price</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>direction</span><span class=o>=</span><span class=n>direction</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=n>fees</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>records_readable</span>
<span class=go>   Order Id Column  Timestamp  Size  Price  Fees  Side</span>
<span class=go>0         0      a          0   1.0    1.0  0.01   Buy</span>
<span class=go>1         1      a          1   1.0    2.0  0.02  Sell</span>
<span class=go>2         2      a          2   1.0    3.0  0.03   Buy</span>
<span class=go>3         3      a          3   1.0    4.0  0.04  Sell</span>
<span class=go>4         4      b          0   1.0    4.0  0.04  Sell</span>
<span class=go>5         5      b          1   1.0    3.0  0.03   Buy</span>
<span class=go>6         6      b          2   1.0    2.0  0.02  Sell</span>
<span class=go>7         7      b          3   1.0    1.0  0.01   Buy</span>
</code></pre></div> <p>In a nutshell: this method automates some procedures that otherwise would be only possible by using <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a> while following the same broadcasting principles as <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a> - the best of both worlds, given you can express your strategy as a sequence of signals. But as soon as your strategy requires any signal to depend upon more complex conditions or to generate multiple orders at once, it's best to run your custom signaling logic using <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a>.</p> <h3 id=from-order-function>From order function<a class=headerlink href=#from-order-function title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a> is the most powerful form of simulation. Instead of pulling information from predefined arrays, it lets us define an arbitrary logic through callbacks. There are multiple kinds of callbacks, each called at some point while the simulation function traverses the shape. For example, apart from the main callback that returns an order (<code>order_func_nb</code>), there is a callback that does preprocessing on the entire group of columns at once. For more details on the general procedure and the callback zoo, see <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_nb title=vectorbt.portfolio.nb.simulate_nb>simulate_nb()</a>.</p> <p>Let's replicate our example using an order function:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>direction</span><span class=p>,</span> <span class=n>fees</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>price</span><span class=o>=</span><span class=n>c</span><span class=o>.</span><span class=n>close</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>i</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>col</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>size</span><span class=o>=</span><span class=n>size</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>i</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>direction</span><span class=o>=</span><span class=n>direction</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>col</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>fees</span><span class=o>=</span><span class=n>fees</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>direction_num</span> <span class=o>=</span> <span class=n>map_enum_fields</span><span class=p>(</span><span class=n>direction</span><span class=p>,</span> <span class=n>Direction</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=n>size</span><span class=p>),</span> <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=n>direction_num</span><span class=p>),</span> <span class=n>fees</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>records_readable</span>
<span class=go>   Order Id Column  Timestamp  Size  Price  Fees  Side</span>
<span class=go>0         0      a          0   1.0    1.0  0.01   Buy</span>
<span class=go>1         1      a          1   1.0    2.0  0.02  Sell</span>
<span class=go>2         2      a          2   1.0    3.0  0.03   Buy</span>
<span class=go>3         3      a          3   1.0    4.0  0.04  Sell</span>
<span class=go>4         4      b          0   1.0    4.0  0.04  Sell</span>
<span class=go>5         5      b          1   1.0    3.0  0.03   Buy</span>
<span class=go>6         6      b          2   1.0    2.0  0.02  Sell</span>
<span class=go>7         7      b          3   1.0    1.0  0.01   Buy</span>
</code></pre></div> <p>There is an even more flexible version available - <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.flex_simulate_nb title=vectorbt.portfolio.nb.flex_simulate_nb>flex_simulate_nb()</a> (activated by passing <code>flexible=True</code> to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a>) - that allows creating multiple orders per symbol and bar.</p> <p>This method has many advantages:</p> <ul> <li>Realistic simulation as it follows the event-driven approach - less risk of exposure to the look-ahead bias</li> <li>Provides a lot of useful information during the runtime, such as the current position's PnL</li> <li>Enables putting all logic including custom indicators into a single place, and running it as the data comes in, in a memory-friendly manner</li> </ul> <p>But there are drawbacks too:</p> <ul> <li>Doesn't broadcast arrays - needs to be done by the user prior to the execution</li> <li>Requires at least a basic knowledge of NumPy and Numba</li> <li>Requires at least an intermediate knowledge of both to optimize for efficiency</li> </ul> <h2 id=example>Example<a class=headerlink href=#example title="Permanent link">&para;</a></h2> <p>To showcase the features of <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>, run the following example: it checks candlestick data of 6 major cryptocurrencies in 2020 against every single pattern found in TA-Lib, and translates them into orders.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># Fetch price history</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>symbols</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>,</span> <span class=s1>&#39;ETH-USD&#39;</span><span class=p>,</span> <span class=s1>&#39;XRP-USD&#39;</span><span class=p>,</span> <span class=s1>&#39;BNB-USD&#39;</span><span class=p>,</span> <span class=s1>&#39;BCH-USD&#39;</span><span class=p>,</span> <span class=s1>&#39;LTC-USD&#39;</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>start</span> <span class=o>=</span> <span class=s1>&#39;2020-01-01 UTC&#39;</span>  <span class=c1># crypto is UTC</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>end</span> <span class=o>=</span> <span class=s1>&#39;2020-09-01 UTC&#39;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=c1># OHLCV by column</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>ohlcv</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span><span class=n>symbols</span><span class=p>,</span> <span class=n>start</span><span class=o>=</span><span class=n>start</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=n>end</span><span class=p>)</span><span class=o>.</span><span class=n>concat</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>]</span>

<span class=go>symbol                          BTC-USD     ETH-USD   XRP-USD    BNB-USD  \</span>
<span class=go>Date</span>
<span class=go>2020-01-01 00:00:00+00:00   7194.892090  129.630661  0.192912  13.730962</span>
<span class=go>2020-01-02 00:00:00+00:00   7202.551270  130.820038  0.192708  13.698126</span>
<span class=go>2020-01-03 00:00:00+00:00   6984.428711  127.411263  0.187948  13.035329</span>
<span class=go>...                                 ...         ...       ...        ...</span>
<span class=go>2020-08-30 00:00:00+00:00  11508.713867  399.616699  0.274568  23.009060</span>
<span class=go>2020-08-31 00:00:00+00:00  11713.306641  428.509003  0.283065  23.647858</span>
<span class=go>2020-09-01 00:00:00+00:00  11679.316406  434.874451  0.281612  23.185047</span>

<span class=go>symbol                        BCH-USD    LTC-USD</span>
<span class=go>Date</span>
<span class=go>2020-01-01 00:00:00+00:00  204.671295  41.326534</span>
<span class=go>2020-01-02 00:00:00+00:00  204.354538  42.018085</span>
<span class=go>2020-01-03 00:00:00+00:00  196.007690  39.863129</span>
<span class=go>...                               ...        ...</span>
<span class=go>2020-08-30 00:00:00+00:00  268.842865  57.207737</span>
<span class=go>2020-08-31 00:00:00+00:00  279.280426  62.844059</span>
<span class=go>2020-09-01 00:00:00+00:00  274.480865  61.105076</span>

<span class=go>[244 rows x 6 columns]</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Run every single pattern recognition indicator and combine the results</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>result</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>empty_like</span><span class=p>(</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span> <span class=n>fill_value</span><span class=o>=</span><span class=mf>0.</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>pattern</span> <span class=ow>in</span> <span class=n>talib</span><span class=o>.</span><span class=n>get_function_groups</span><span class=p>()[</span><span class=s1>&#39;Pattern Recognition&#39;</span><span class=p>]:</span>
<span class=gp>... </span>    <span class=n>PRecognizer</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>IndicatorFactory</span><span class=o>.</span><span class=n>from_talib</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>pr</span> <span class=o>=</span> <span class=n>PRecognizer</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span> <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;High&#39;</span><span class=p>],</span> <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Low&#39;</span><span class=p>],</span> <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>])</span>
<span class=gp>... </span>    <span class=n>result</span> <span class=o>=</span> <span class=n>result</span> <span class=o>+</span> <span class=n>pr</span><span class=o>.</span><span class=n>integer</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Don&#39;t look into the future</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>result</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>fshift</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Treat each number as order value in USD</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>size</span> <span class=o>=</span> <span class=n>result</span> <span class=o>/</span> <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>]</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Simulate portfolio</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>init_cash</span><span class=o>=</span><span class=s1>&#39;autoalign&#39;</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Visualize portfolio value</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>value</span><span class=p>()</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/portfolio_value.svg></p> <h2 id=broadcasting>Broadcasting<a class=headerlink href=#broadcasting title="Permanent link">&para;</a></h2> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> is very flexible towards inputs:</p> <ul> <li>Accepts both Series and DataFrames as inputs</li> <li>Broadcasts inputs to the same shape using vectorbt's own broadcasting rules</li> <li>Many inputs (such as <code>fees</code>) can be passed as a single value, value per column/row, or as a matrix</li> <li>Implements flexible indexing wherever possible to save memory</li> </ul> <h3 id=flexible-indexing>Flexible indexing<a class=headerlink href=#flexible-indexing title="Permanent link">&para;</a></h3> <p>Instead of expensive broadcasting, most methods keep the original shape and do indexing in a smart way. A nice feature of this is that it has almost no memory footprint and can broadcast in any direction indefinitely.</p> <p>For example, let's broadcast three inputs and select the last element using both approaches:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># Classic way</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>6</span><span class=p>]])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>a_</span><span class=p>,</span> <span class=n>b_</span><span class=p>,</span> <span class=n>c_</span> <span class=o>=</span> <span class=n>broadcast</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>a_</span>
<span class=go>array([[1, 2, 3],</span>
<span class=go>       [1, 2, 3],</span>
<span class=go>       [1, 2, 3]])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>a_</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span>
<span class=go>3</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>b_</span>
<span class=go>array([[4, 4, 4],</span>
<span class=go>       [5, 5, 5],</span>
<span class=go>       [6, 6, 6]])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>b_</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span>
<span class=go>6</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>c_</span>
<span class=go>array([[10, 10, 10],</span>
<span class=go>       [10, 10, 10],</span>
<span class=go>       [10, 10, 10]])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>c_</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span>
<span class=go>10</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Flexible indexing being done during simulation</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>flex_select_auto_nb</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=go>3</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>flex_select_auto_nb</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=go>6</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>flex_select_auto_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=go>10</span>
</code></pre></div> <h2 id=defaults>Defaults<a class=headerlink href=#defaults title="Permanent link">&para;</a></h2> <p>If you look at the arguments of each class method, you will notice that most of them default to None. None has a special meaning in vectorbt: it's a command to pull the default value from the global settings config - <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>. The branch for the <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> can be found under the key 'portfolio'. For example, the default size used in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a> and <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a> is <code>np.inf</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>portfolio</span><span class=p>[</span><span class=s1>&#39;size&#39;</span><span class=p>]</span>
<span class=go>inf</span>
</code></pre></div> <h2 id=grouping>Grouping<a class=headerlink href=#grouping title="Permanent link">&para;</a></h2> <p>One of the key features of <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> is the ability to group columns. Groups can be specified by <code>group_by</code>, which can be anything from positions or names of column levels, to a NumPy array with actual groups. Groups can be formed to share capital between columns (make sure to pass <code>cash_sharing=True</code>) or to compute metrics for a combined portfolio of multiple independent columns.</p> <p>For example, let's divide our portfolio into two groups sharing the same cash balance:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># Simulate combined portfolio</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>group_by</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>([</span>
<span class=gp>... </span>    <span class=s1>&#39;first&#39;</span><span class=p>,</span> <span class=s1>&#39;first&#39;</span><span class=p>,</span> <span class=s1>&#39;first&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=s1>&#39;second&#39;</span><span class=p>,</span> <span class=s1>&#39;second&#39;</span><span class=p>,</span> <span class=s1>&#39;second&#39;</span>
<span class=gp>... </span><span class=p>],</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;group&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>comb_pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>init_cash</span><span class=o>=</span><span class=s1>&#39;autoalign&#39;</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>group_by</span><span class=o>=</span><span class=n>group_by</span><span class=p>,</span> <span class=n>cash_sharing</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Get total profit per group</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>comb_pf</span><span class=o>.</span><span class=n>total_profit</span><span class=p>()</span>
<span class=go>group</span>
<span class=go>first     26221.571200</span>
<span class=go>second    10141.952674</span>
<span class=go>Name: total_profit, dtype: float64</span>
</code></pre></div> <p>Not only can we analyze each group, but also each column in the group:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># Get total profit per column</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>comb_pf</span><span class=o>.</span><span class=n>total_profit</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=go>symbol</span>
<span class=go>BTC-USD     5792.120252</span>
<span class=go>ETH-USD    16380.039692</span>
<span class=go>XRP-USD     4049.411256</span>
<span class=go>BNB-USD     6081.253551</span>
<span class=go>BCH-USD      400.573418</span>
<span class=go>LTC-USD     3660.125705</span>
<span class=go>Name: total_profit, dtype: float64</span>
</code></pre></div> <p>In the same way, we can introduce new grouping to the method itself:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># Get total profit per group</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>total_profit</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=n>group_by</span><span class=p>)</span>
<span class=go>group</span>
<span class=go>first     26221.571200</span>
<span class=go>second    10141.952674</span>
<span class=go>Name: total_profit, dtype: float64</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If cash sharing is enabled, grouping can be disabled but cannot be modified.</p> </div> <h2 id=indexing>Indexing<a class=headerlink href=#indexing title="Permanent link">&para;</a></h2> <p>Like any other class subclassing <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping title=vectorbt.base.array_wrapper.Wrapping>Wrapping</a>, we can do pandas indexing on a <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> instance, which forwards indexing operation to each object with columns:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=p>[</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>]</span>
<span class=go>&lt;vectorbt.portfolio.base.Portfolio at 0x7fac7517ac88&gt;</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=p>[</span><span class=s1>&#39;BTC-USD&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>total_profit</span><span class=p>()</span>
<span class=go>5792.120252189081</span>
</code></pre></div> <p>Combined portfolio is indexed by group:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>comb_pf</span><span class=p>[</span><span class=s1>&#39;first&#39;</span><span class=p>]</span>
<span class=go>&lt;vectorbt.portfolio.base.Portfolio at 0x7fac5756b828&gt;</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>comb_pf</span><span class=p>[</span><span class=s1>&#39;first&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>total_profit</span><span class=p>()</span>
<span class=go>26221.57120014546</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Changing index (time axis) is not supported. The object should be treated as a Series rather than a DataFrame; for example, use <code>pf.iloc[0]</code> instead of <code>pf.iloc[:, 0]</code>.</p> <p>Indexing behavior depends solely upon <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.ArrayWrapper title=vectorbt.base.array_wrapper.ArrayWrapper>ArrayWrapper</a>. For example, if <code>group_select</code> is enabled indexing will be performed on groups, otherwise on single columns. You can pass wrapper arguments with <code>wrapper_kwargs</code>.</p> </div> <h2 id=logging>Logging<a class=headerlink href=#logging title="Permanent link">&para;</a></h2> <p>To collect more information on how a specific order was processed or to be able to track the whole simulation from the beginning to the end, we can turn on logging:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># Simulate portfolio with logging</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>init_cash</span><span class=o>=</span><span class=s1>&#39;autoalign&#39;</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>log</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>logs</span><span class=o>.</span><span class=n>records</span>
<span class=go>        id  group  col  idx  cash    position  debt  free_cash    val_price  \</span>
<span class=go>0        0      0    0    0   inf    0.000000   0.0        inf  7194.892090</span>
<span class=go>1        1      0    0    1   inf    0.000000   0.0        inf  7202.551270</span>
<span class=go>2        2      0    0    2   inf    0.000000   0.0        inf  6984.428711</span>
<span class=go>...    ...    ...  ...  ...   ...         ...   ...        ...          ...</span>
<span class=go>1461  1461      5    5  241   inf  272.389644   0.0        inf    57.207737</span>
<span class=go>1462  1462      5    5  242   inf  274.137659   0.0        inf    62.844059</span>
<span class=go>1463  1463      5    5  243   inf  282.093860   0.0        inf    61.105076</span>

<span class=go>      value  ...  new_free_cash  new_val_price  new_value  res_size  \</span>
<span class=go>0       inf  ...            inf    7194.892090        inf       NaN</span>
<span class=go>1       inf  ...            inf    7202.551270        inf       NaN</span>
<span class=go>2       inf  ...            inf    6984.428711        inf       NaN</span>
<span class=go>...     ...  ...            ...            ...        ...       ...</span>
<span class=go>1461    inf  ...            inf      57.207737        inf  1.748015</span>
<span class=go>1462    inf  ...            inf      62.844059        inf  7.956202</span>
<span class=go>1463    inf  ...            inf      61.105076        inf  1.636525</span>

<span class=go>        res_price  res_fees  res_side  res_status  res_status_info  order_id</span>
<span class=go>0             NaN       NaN        -1           1                0        -1</span>
<span class=go>1             NaN       NaN        -1           1                5        -1</span>
<span class=go>2             NaN       NaN        -1           1                5        -1</span>
<span class=go>...           ...       ...       ...         ...              ...       ...</span>
<span class=go>1461    57.264945    0.1001         0           0               -1      1070</span>
<span class=go>1462    62.906903    0.5005         0           0               -1      1071</span>
<span class=go>1463    61.043971    0.0999         1           0               -1      1072</span>

<span class=go>[1464 rows x 37 columns]</span>
</code></pre></div> <p>Just as orders, logs are also records and thus can be easily analyzed:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>logs</span><span class=o>.</span><span class=n>res_status</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span>
<span class=go>symbol   BTC-USD  ETH-USD  XRP-USD  BNB-USD  BCH-USD  LTC-USD</span>
<span class=go>Filled       184      172      177      178      177      185</span>
<span class=go>Ignored       60       72       67       66       67       59</span>
</code></pre></div> <p>Logging can also be turned on just for one order, row, or column, since as many other variables it's specified per order and can broadcast automatically.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Logging can slow down simulation.</p> </div> <h2 id=caching>Caching<a class=headerlink href=#caching title="Permanent link">&para;</a></h2> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> heavily relies upon caching. If a method or a property requires heavy computation, it's wrapped with <a href=/api/utils/decorators/#vectorbt.utils.decorators.cached_method title=vectorbt.utils.decorators.cached_method>cached_method()</a> and <a href=/api/utils/decorators/#vectorbt.utils.decorators.cached_property title=vectorbt.utils.decorators.cached_property>cached_property</a> respectively. Caching can be disabled globally via <code>caching</code> in <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Because of caching, class is meant to be immutable and all properties are read-only. To change any attribute, use the <code>copy</code> method and pass the attribute as keyword argument.</p> </div> <p>Alternatively, we can precisely point at attributes and methods that should or shouldn't be cached. For example, we can blacklist the entire <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> class except a few most called methods such as <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.cash_flow title=vectorbt.portfolio.base.Portfolio.cash_flow>Portfolio.cash_flow()</a> and <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.asset_flow title=vectorbt.portfolio.base.Portfolio.asset_flow>Portfolio.asset_flow()</a>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>caching</span><span class=p>[</span><span class=s1>&#39;blacklist&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>base_cls</span><span class=o>=</span><span class=s1>&#39;Portfolio&#39;</span><span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>caching</span><span class=p>[</span><span class=s1>&#39;whitelist&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>base_cls</span><span class=o>=</span><span class=s1>&#39;Portfolio&#39;</span><span class=p>,</span> <span class=n>func</span><span class=o>=</span><span class=s1>&#39;cash_flow&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>base_cls</span><span class=o>=</span><span class=s1>&#39;Portfolio&#39;</span><span class=p>,</span> <span class=n>func</span><span class=o>=</span><span class=s1>&#39;asset_flow&#39;</span><span class=p>)</span>
<span class=gp>... </span><span class=p>])</span>
</code></pre></div> <p>Define rules for one instance of <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>caching</span><span class=p>[</span><span class=s1>&#39;blacklist&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>instance</span><span class=o>=</span><span class=n>pf</span><span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>caching</span><span class=p>[</span><span class=s1>&#39;whitelist&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>instance</span><span class=o>=</span><span class=n>pf</span><span class=p>,</span> <span class=n>func</span><span class=o>=</span><span class=s1>&#39;cash_flow&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>CacheCondition</span><span class=p>(</span><span class=n>instance</span><span class=o>=</span><span class=n>pf</span><span class=p>,</span> <span class=n>func</span><span class=o>=</span><span class=s1>&#39;asset_flow&#39;</span><span class=p>)</span>
<span class=gp>... </span><span class=p>])</span>
</code></pre></div> <p>See <a href=/api/utils/decorators/#vectorbt.utils.decorators.should_cache title=vectorbt.utils.decorators.should_cache>should_cache()</a> for caching rules.</p> <p>To reset caching:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>caching</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</code></pre></div> <h2 id=performance-and-memory>Performance and memory<a class=headerlink href=#performance-and-memory title="Permanent link">&para;</a></h2> <p>If you're running out of memory when working with large arrays, make sure to disable caching and then store most important time series manually. For example, if you're interested in Sharpe ratio or other metrics based on returns, run and save <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.returns title=vectorbt.portfolio.base.Portfolio.returns>Portfolio.returns()</a> in a variable and then use the <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor title=vectorbt.returns.accessors.ReturnsAccessor>ReturnsAccessor</a> to analyze them. Do not use methods akin to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.sharpe_ratio title=vectorbt.portfolio.base.Portfolio.sharpe_ratio>Portfolio.sharpe_ratio()</a> because they will re-calculate returns each time.</p> <p>Alternatively, you can track portfolio value and returns using <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a> and its callbacks (preferably in <code>post_segment_func_nb</code>):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf_baseline</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>init_cash</span><span class=o>=</span><span class=s1>&#39;autoalign&#39;</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;d&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf_baseline</span><span class=o>.</span><span class=n>sharpe_ratio</span><span class=p>()</span>
<span class=go>symbol</span>
<span class=go>BTC-USD    1.743437</span>
<span class=go>ETH-USD    2.800903</span>
<span class=go>XRP-USD    1.607904</span>
<span class=go>BNB-USD    1.805373</span>
<span class=go>BCH-USD    0.269392</span>
<span class=go>LTC-USD    1.040494</span>
<span class=go>Name: sharpe_ratio, dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>fees</span><span class=p>,</span> <span class=n>slippage</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>size</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>price</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>price</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>fees</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>fees</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>slippage</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>slippage</span><span class=p>),</span>
<span class=gp>... </span>    <span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>post_segment_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>returns_out</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>returns_out</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>i</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>group</span><span class=p>]</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=n>last_return</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>group</span><span class=p>]</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>returns_out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty_like</span><span class=p>(</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=n>size</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=mf>0.001</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=mf>0.001</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>post_segment_func_nb</span><span class=o>=</span><span class=n>post_segment_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>post_segment_args</span><span class=o>=</span><span class=p>(</span><span class=n>returns_out</span><span class=p>,),</span>
<span class=gp>... </span>    <span class=n>init_cash</span><span class=o>=</span><span class=n>pf_baseline</span><span class=o>.</span><span class=n>init_cash</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>returns</span> <span class=o>=</span> <span class=n>pf</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>wrap</span><span class=p>(</span><span class=n>returns_out</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>del</span> <span class=n>pf</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>returns</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>returns</span><span class=p>(</span><span class=n>freq</span><span class=o>=</span><span class=s1>&#39;d&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>sharpe_ratio</span><span class=p>()</span>
<span class=go>symbol</span>
<span class=go>BTC-USD   -2.261443</span>
<span class=go>ETH-USD    0.059538</span>
<span class=go>XRP-USD    2.159093</span>
<span class=go>BNB-USD    1.555386</span>
<span class=go>BCH-USD    0.784214</span>
<span class=go>LTC-USD    1.460077</span>
<span class=go>Name: sharpe_ratio, dtype: float64</span>
</code></pre></div> <p>The only drawback of this approach is that you cannot use <code>init_cash='auto'</code> or <code>init_cash='autoalign'</code> because then, during the simulation, the portfolio value is <code>np.inf</code> and the returns are <code>np.nan</code>.</p> <h2 id=saving-and-loading>Saving and loading<a class=headerlink href=#saving-and-loading title="Permanent link">&para;</a></h2> <p>Like any other class subclassing <a href=/api/utils/config/#vectorbt.utils.config.Pickleable title=vectorbt.utils.config.Pickleable>Pickleable</a>, we can save a <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a> instance to the disk with <a href=/api/utils/config/#vectorbt.utils.config.Pickleable.save title=vectorbt.portfolio.base.Portfolio.save>Pickleable.save()</a> and load it with <a href=/api/utils/config/#vectorbt.utils.config.Pickleable.load title=vectorbt.portfolio.base.Portfolio.load>Pickleable.load()</a>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>],</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=n>ohlcv</span><span class=p>[</span><span class=s1>&#39;Open&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>init_cash</span><span class=o>=</span><span class=s1>&#39;autoalign&#39;</span><span class=p>,</span> <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;d&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>sharpe_ratio</span><span class=p>()</span>
<span class=go>symbol</span>
<span class=go>BTC-USD    1.743437</span>
<span class=go>ETH-USD    2.800903</span>
<span class=go>XRP-USD    1.607904</span>
<span class=go>BNB-USD    1.805373</span>
<span class=go>BCH-USD    0.269392</span>
<span class=go>LTC-USD    1.040494</span>
<span class=go>Name: sharpe_ratio, dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;my_pf&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s1>&#39;my_pf&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>sharpe_ratio</span><span class=p>()</span>
<span class=go>symbol</span>
<span class=go>BTC-USD    1.743437</span>
<span class=go>ETH-USD    2.800903</span>
<span class=go>XRP-USD    1.607904</span>
<span class=go>BNB-USD    1.805373</span>
<span class=go>BCH-USD    0.269392</span>
<span class=go>LTC-USD    1.040494</span>
<span class=go>Name: sharpe_ratio, dtype: float64</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Save files won't include neither cached results nor global defaults. For example, passing <code>fillna_close</code> as None will also use None when the portfolio is loaded from disk. Make sure to either pass all arguments explicitly or to also save the <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a> config.</p> </div> <h2 id=stats>Stats<a class=headerlink href=#stats title="Permanent link">&para;</a></h2> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>See <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats()</a> and <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.metrics title=vectorbt.portfolio.base.Portfolio.metrics>Portfolio.metrics</a>.</p> </div> <p>Let's simulate a portfolio with two columns:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>download</span><span class=p>(</span>
<span class=gp>... </span>    <span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s1>&#39;2020-01-01 UTC&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s1>&#39;2020-09-01 UTC&#39;</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;Close&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>],</span> <span class=n>seed</span><span class=o>=</span><span class=mi>42</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>columns</span>
<span class=go>Index([10, 20], dtype=&#39;int64&#39;, name=&#39;rand_n&#39;)</span>
</code></pre></div> <h3 id=column-group-and-tag-selection>Column, group, and tag selection<a class=headerlink href=#column-group-and-tag-selection title="Permanent link">&para;</a></h3> <p>To return the statistics for a particular column/group, use the <code>column</code> argument:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>UserWarning: Metric &#39;sharpe_ratio&#39; requires frequency to be set</span>
<span class=go>UserWarning: Metric &#39;calmar_ratio&#39; requires frequency to be set</span>
<span class=go>UserWarning: Metric &#39;omega_ratio&#39; requires frequency to be set</span>
<span class=go>UserWarning: Metric &#39;sortino_ratio&#39; requires frequency to be set</span>

<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                              244</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    106.721585</span>
<span class=go>Total Return [%]                               6.721585</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                              22.190944</span>
<span class=go>Max Drawdown Duration                             101.0</span>
<span class=go>Total Trades                                         10</span>
<span class=go>Total Closed Trades                                  10</span>
<span class=go>Total Open Trades                                     0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       60.0</span>
<span class=go>Best Trade [%]                                 15.31962</span>
<span class=go>Worst Trade [%]                               -9.904223</span>
<span class=go>Avg Winning Trade [%]                          4.671959</span>
<span class=go>Avg Losing Trade [%]                          -4.851205</span>
<span class=go>Avg Winning Trade Duration                    11.333333</span>
<span class=go>Avg Losing Trade Duration                         14.25</span>
<span class=go>Profit Factor                                  1.347457</span>
<span class=go>Expectancy                                     0.672158</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>If vectorbt couldn't parse the frequency of <code>close</code>:</p> <p>1) it won't return any duration in time units, 2) it won't return any metric that requires annualization, and 3) it will throw a bunch of warnings (you can silence those by passing <code>silence_warnings=True</code>)</p> <p>We can provide the frequency as part of the settings dict:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>freq</span><span class=o>=</span><span class=s1>&#39;d&#39;</span><span class=p>))</span>
<span class=go>UserWarning: Changing the frequency will create a copy of this object.</span>
<span class=go>Consider setting the frequency upon object creation to re-use existing cache.</span>

<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    106.721585</span>
<span class=go>Total Return [%]                               6.721585</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                              22.190944</span>
<span class=go>Max Drawdown Duration                 101 days 00:00:00</span>
<span class=go>Total Trades                                         10</span>
<span class=go>Total Closed Trades                                  10</span>
<span class=go>Total Open Trades                                     0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       60.0</span>
<span class=go>Best Trade [%]                                 15.31962</span>
<span class=go>Worst Trade [%]                               -9.904223</span>
<span class=go>Avg Winning Trade [%]                          4.671959</span>
<span class=go>Avg Losing Trade [%]                          -4.851205</span>
<span class=go>Avg Winning Trade Duration             11 days 08:00:00</span>
<span class=go>Avg Losing Trade Duration              14 days 06:00:00</span>
<span class=go>Profit Factor                                  1.347457</span>
<span class=go>Expectancy                                     0.672158</span>
<span class=go>Sharpe Ratio                                   0.445231</span>
<span class=go>Calmar Ratio                                   0.460573</span>
<span class=go>Omega Ratio                                    1.099192</span>
<span class=go>Sortino Ratio                                  0.706986</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>But in this case, our portfolio will be copied to set the new frequency and we wouldn't be able to re-use its cached attributes. Let's define the frequency upon the simulation instead:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>],</span> <span class=n>seed</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;d&#39;</span><span class=p>)</span>
</code></pre></div> <p>We can change the grouping of the portfolio on the fly. Let's form a single group:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       200.0</span>
<span class=go>End Value                                     277.49299</span>
<span class=go>Total Return [%]                              38.746495</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                              14.219327</span>
<span class=go>Max Drawdown Duration                  86 days 00:00:00</span>
<span class=go>Total Trades                                         30</span>
<span class=go>Total Closed Trades                                  30</span>
<span class=go>Total Open Trades                                     0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                  66.666667</span>
<span class=go>Best Trade [%]                                18.332559</span>
<span class=go>Worst Trade [%]                               -9.904223</span>
<span class=go>Avg Winning Trade [%]                          5.754788</span>
<span class=go>Avg Losing Trade [%]                          -4.718907</span>
<span class=go>Avg Winning Trade Duration              7 days 19:12:00</span>
<span class=go>Avg Losing Trade Duration               8 days 07:12:00</span>
<span class=go>Profit Factor                                  2.427948</span>
<span class=go>Expectancy                                       2.5831</span>
<span class=go>Sharpe Ratio                                    1.57907</span>
<span class=go>Calmar Ratio                                   4.445448</span>
<span class=go>Omega Ratio                                    1.334032</span>
<span class=go>Sortino Ratio                                   2.59669</span>
<span class=go>Name: group, dtype: object</span>
</code></pre></div> <p>We can see how the initial cash has changed from $100 to $200, indicating that both columns now contribute to the performance.</p> <h3 id=aggregation>Aggregation<a class=headerlink href=#aggregation title="Permanent link">&para;</a></h3> <p>If the portfolio consists of multiple columns/groups and no column/group has been selected, each metric is aggregated across all columns/groups based on <code>agg_func</code>, which is <code>np.mean</code> by default.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>()</span>
<span class=go>UserWarning: Object has multiple columns. Aggregating using &lt;function mean at 0x7fc77152bb70&gt;.</span>
<span class=go>Pass column to select a single column/group.</span>

<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    138.746495</span>
<span class=go>Total Return [%]                              38.746495</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                               20.35869</span>
<span class=go>Max Drawdown Duration                  93 days 00:00:00</span>
<span class=go>Total Trades                                       15.0</span>
<span class=go>Total Closed Trades                                15.0</span>
<span class=go>Total Open Trades                                   0.0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       65.0</span>
<span class=go>Best Trade [%]                                 16.82609</span>
<span class=go>Worst Trade [%]                               -9.701273</span>
<span class=go>Avg Winning Trade [%]                          5.445408</span>
<span class=go>Avg Losing Trade [%]                          -4.740956</span>
<span class=go>Avg Winning Trade Duration    8 days 19:25:42.857142857</span>
<span class=go>Avg Losing Trade Duration               9 days 07:00:00</span>
<span class=go>Profit Factor                                  2.186957</span>
<span class=go>Expectancy                                     2.105364</span>
<span class=go>Sharpe Ratio                                   1.165695</span>
<span class=go>Calmar Ratio                                   3.541079</span>
<span class=go>Omega Ratio                                    1.331624</span>
<span class=go>Sortino Ratio                                  2.084565</span>
<span class=go>Name: agg_func_mean, dtype: object</span>
</code></pre></div> <p>Here, the Sharpe ratio of 0.445231 (column=10) and 1.88616 (column=20) lead to the avarage of 1.16569.</p> <p>We can also return a DataFrame with statistics per column/group by passing <code>agg_func=None</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>agg_func</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
<span class=go>                           Start                       End   Period  ...  Sortino Ratio</span>
<span class=go>rand_n                                                               ...</span>
<span class=go>10     2020-01-01 00:00:00+00:00 2020-09-01 00:00:00+00:00 244 days  ...       0.706986</span>
<span class=go>20     2020-01-01 00:00:00+00:00 2020-09-01 00:00:00+00:00 244 days  ...       3.462144</span>

<span class=go>[2 rows x 25 columns]</span>
</code></pre></div> <h3 id=metric-selection>Metric selection<a class=headerlink href=#metric-selection title="Permanent link">&para;</a></h3> <p>To select metrics, use the <code>metrics</code> argument (see <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.metrics title=vectorbt.portfolio.base.Portfolio.metrics>Portfolio.metrics</a> for supported metrics):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>metrics</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;sharpe_ratio&#39;</span><span class=p>,</span> <span class=s1>&#39;sortino_ratio&#39;</span><span class=p>],</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>Sharpe Ratio     0.445231</span>
<span class=go>Sortino Ratio    0.706986</span>
<span class=go>Name: 10, dtype: float64</span>
</code></pre></div> <p>We can also select specific tags (see any metric from <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.metrics title=vectorbt.portfolio.base.Portfolio.metrics>Portfolio.metrics</a> that has the <code>tag</code> key):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>tags</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;trades&#39;</span><span class=p>])</span>
<span class=go>Total Trades                                10</span>
<span class=go>Total Open Trades                            0</span>
<span class=go>Open Trade PnL                               0</span>
<span class=go>Long Trades [%]                            100</span>
<span class=go>Win Rate [%]                                60</span>
<span class=go>Best Trade [%]                         15.3196</span>
<span class=go>Worst Trade [%]                       -9.90422</span>
<span class=go>Avg Winning Trade [%]                  4.67196</span>
<span class=go>Avg Winning Trade Duration    11 days 08:00:00</span>
<span class=go>Avg Losing Trade [%]                   -4.8512</span>
<span class=go>Avg Losing Trade Duration     14 days 06:00:00</span>
<span class=go>Profit Factor                          1.34746</span>
<span class=go>Expectancy                            0.672158</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>Or provide a boolean expression:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;trades and open and not closed&#39;</span><span class=p>)</span>
<span class=go>Total Open Trades    0.0</span>
<span class=go>Open Trade PnL       0.0</span>
<span class=go>Name: 10, dtype: float64</span>
</code></pre></div> <p>The reason why we included "not closed" along with "open" is because some metrics such as the win rate have both tags attached since they are based upon both open and closed trades/positions (to see this, pass <code>settings=dict(incl_open=True)</code> and <code>tags='trades and open'</code>).</p> <h3 id=passing-parameters>Passing parameters<a class=headerlink href=#passing-parameters title="Permanent link">&para;</a></h3> <p>We can use <code>settings</code> to pass parameters used across multiple metrics. For example, let's pass required and risk-free return to all return metrics:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>required_return</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>risk_free</span><span class=o>=</span><span class=mf>0.01</span><span class=p>))</span>
<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    106.721585</span>
<span class=go>Total Return [%]                               6.721585</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                              22.190944</span>
<span class=go>Max Drawdown Duration                 101 days 00:00:00</span>
<span class=go>Total Trades                                         10</span>
<span class=go>Total Closed Trades                                  10</span>
<span class=go>Total Open Trades                                     0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       60.0</span>
<span class=go>Best Trade [%]                                 15.31962</span>
<span class=go>Worst Trade [%]                               -9.904223</span>
<span class=go>Avg Winning Trade [%]                          4.671959</span>
<span class=go>Avg Losing Trade [%]                          -4.851205</span>
<span class=go>Avg Winning Trade Duration             11 days 08:00:00</span>
<span class=go>Avg Losing Trade Duration              14 days 06:00:00</span>
<span class=go>Profit Factor                                  1.347457</span>
<span class=go>Expectancy                                     0.672158</span>
<span class=go>Sharpe Ratio                                  -9.504742  &lt;&lt; here</span>
<span class=go>Calmar Ratio                                   0.460573  &lt;&lt; here</span>
<span class=go>Omega Ratio                                    0.233279  &lt;&lt; here</span>
<span class=go>Sortino Ratio                                -18.763407  &lt;&lt; here</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>Passing any argument inside of <code>settings</code> either overrides an existing default, or acts as an optional argument that is passed to the calculation function upon resolution (see below). Both <code>required_return</code> and <code>risk_free</code> can be found in the signature of the 4 ratio methods, so vectorbt knows exactly it has to pass them.</p> <p>Let's imagine that the signature of <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.sharpe_ratio title=vectorbt.returns.accessors.ReturnsAccessor.sharpe_ratio>ReturnsAccessor.sharpe_ratio()</a> doesn't list those arguments: vectorbt would simply call this method without passing those two arguments. In such case, we have two options:</p> <p>1) Set parameters globally using <code>settings</code> and set <code>pass_{arg}=True</code> individually using <code>metric_settings</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>required_return</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>risk_free</span><span class=o>=</span><span class=mf>0.01</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>sharpe_ratio</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>pass_risk_free</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>omega_ratio</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>pass_required_return</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>pass_risk_free</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>sortino_ratio</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>pass_required_return</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p>2) Set parameters individually using <code>metric_settings</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>sharpe_ratio</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>risk_free</span><span class=o>=</span><span class=mf>0.01</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>omega_ratio</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>required_return</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>risk_free</span><span class=o>=</span><span class=mf>0.01</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>sortino_ratio</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>required_return</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <h3 id=custom-metrics>Custom metrics<a class=headerlink href=#custom-metrics title="Permanent link">&para;</a></h3> <p>To calculate a custom metric, we need to provide at least two things: short name and a settings dict with the title and calculation function (see arguments in <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin title=vectorbt.generic.stats_builder.StatsBuilderMixin>StatsBuilderMixin</a>):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>max_winning_streak</span> <span class=o>=</span> <span class=p>(</span>
<span class=gp>... </span>    <span class=s1>&#39;max_winning_streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Max Winning Streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>trades</span><span class=p>:</span> <span class=n>trades</span><span class=o>.</span><span class=n>winning_streak</span><span class=o>.</span><span class=n>max</span><span class=p>(),</span>
<span class=gp>... </span>        <span class=n>resolve_trades</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>metrics</span><span class=o>=</span><span class=n>max_winning_streak</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>Max Winning Streak    3.0</span>
<span class=go>Name: 10, dtype: float64</span>
</code></pre></div> <p>You might wonder how vectorbt knows which arguments to pass to <code>calc_func</code>? In the example above, the calculation function expects two arguments: <code>trades</code> and <code>group_by</code>. To automatically pass any of the them, vectorbt searches for each in the current settings. As <code>trades</code> cannot be found, it either throws an error or tries to resolve this argument if <code>resolve_{arg}=True</code> was passed. Argument resolution is the process of searching for property/method with the same name (also with prefix <code>get_</code>) in the attributes of the current portfolio, automatically passing the current settings such as <code>group_by</code> if they are present in the method's signature (a similar resolution procedure), and calling the method/property. The result of the resolution process is then passed as <code>arg</code> (or <code>trades</code> in our example).</p> <p>Here's an example without resolution of arguments:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>max_winning_streak</span> <span class=o>=</span> <span class=p>(</span>
<span class=gp>... </span>    <span class=s1>&#39;max_winning_streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Max Winning Streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=bp>self</span><span class=p>,</span> <span class=n>group_by</span><span class=p>:</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>get_trades</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=n>group_by</span><span class=p>)</span><span class=o>.</span><span class=n>winning_streak</span><span class=o>.</span><span class=n>max</span><span class=p>()</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>metrics</span><span class=o>=</span><span class=n>max_winning_streak</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>Max Winning Streak    3.0</span>
<span class=go>Name: 10, dtype: float64</span>
</code></pre></div> <p>And here's an example without resolution of the calculation function:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>max_winning_streak</span> <span class=o>=</span> <span class=p>(</span>
<span class=gp>... </span>    <span class=s1>&#39;max_winning_streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Max Winning Streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=bp>self</span><span class=p>,</span> <span class=n>settings</span><span class=p>:</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>get_trades</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=n>settings</span><span class=p>[</span><span class=s1>&#39;group_by&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>winning_streak</span><span class=o>.</span><span class=n>max</span><span class=p>(),</span>
<span class=gp>... </span>        <span class=n>resolve_calc_func</span><span class=o>=</span><span class=kc>False</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>metrics</span><span class=o>=</span><span class=n>max_winning_streak</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>Max Winning Streak    3.0</span>
<span class=go>Name: 10, dtype: float64</span>
</code></pre></div> <p>Since <code>max_winning_streak</code> method can be expressed as a path from this portfolio, we can simply write:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>max_winning_streak</span> <span class=o>=</span> <span class=p>(</span>
<span class=gp>... </span>    <span class=s1>&#39;max_winning_streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Max Winning Streak&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>calc_func</span><span class=o>=</span><span class=s1>&#39;trades.winning_streak.max&#39;</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p>In this case, we don't have to pass <code>resolve_trades=True</code> any more as vectorbt does it automatically. Another advantage is that vectorbt can access the signature of the last method in the path (<a href=/api/records/mapped_array/#vectorbt.records.mapped_array.MappedArray.max title=vectorbt.records.mapped_array.MappedArray.max>MappedArray.max()</a> in our case) and resolve its arguments.</p> <p>To switch between entry trades, exit trades, and positions, use the <code>trades_type</code> setting. Additionally, you can pass <code>incl_open=True</code> to also include open trades.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>trades_type</span><span class=o>=</span><span class=s1>&#39;positions&#39;</span><span class=p>,</span> <span class=n>incl_open</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span>
<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    106.721585</span>
<span class=go>Total Return [%]                               6.721585</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                              22.190944</span>
<span class=go>Max Drawdown Duration                 100 days 00:00:00</span>
<span class=go>Total Trades                                         10</span>
<span class=go>Total Closed Trades                                  10</span>
<span class=go>Total Open Trades                                     0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       60.0</span>
<span class=go>Best Trade [%]                                 15.31962</span>
<span class=go>Worst Trade [%]                               -9.904223</span>
<span class=go>Avg Winning Trade [%]                          4.671959</span>
<span class=go>Avg Losing Trade [%]                          -4.851205</span>
<span class=go>Avg Winning Trade Duration             11 days 08:00:00</span>
<span class=go>Avg Losing Trade Duration              14 days 06:00:00</span>
<span class=go>Profit Factor                                  1.347457</span>
<span class=go>Expectancy                                     0.672158</span>
<span class=go>Sharpe Ratio                                   0.445231</span>
<span class=go>Calmar Ratio                                   0.460573</span>
<span class=go>Omega Ratio                                    1.099192</span>
<span class=go>Sortino Ratio                                  0.706986</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>Any default metric setting or even global setting can be overridden by the user using metric-specific keyword arguments. Here, we override the global aggregation function for <code>max_dd_duration</code>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>agg_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>sr</span><span class=p>:</span> <span class=n>sr</span><span class=o>.</span><span class=n>mean</span><span class=p>(),</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>max_dd_duration</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>agg_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>sr</span><span class=p>:</span> <span class=n>sr</span><span class=o>.</span><span class=n>max</span><span class=p>())</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=go>UserWarning: Object has multiple columns. Aggregating using &lt;function &lt;lambda&gt; at 0x7fbf6e77b268&gt;.</span>
<span class=go>Pass column to select a single column/group.</span>

<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    138.746495</span>
<span class=go>Total Return [%]                              38.746495</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                               20.35869</span>
<span class=go>Max Drawdown Duration                 101 days 00:00:00  &lt;&lt; here</span>
<span class=go>Total Trades                                       15.0</span>
<span class=go>Total Closed Trades                                15.0</span>
<span class=go>Total Open Trades                                   0.0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       65.0</span>
<span class=go>Best Trade [%]                                 16.82609</span>
<span class=go>Worst Trade [%]                               -9.701273</span>
<span class=go>Avg Winning Trade [%]                          5.445408</span>
<span class=go>Avg Losing Trade [%]                          -4.740956</span>
<span class=go>Avg Winning Trade Duration    8 days 19:25:42.857142857</span>
<span class=go>Avg Losing Trade Duration               9 days 07:00:00</span>
<span class=go>Profit Factor                                  2.186957</span>
<span class=go>Expectancy                                     2.105364</span>
<span class=go>Sharpe Ratio                                   1.165695</span>
<span class=go>Calmar Ratio                                   3.541079</span>
<span class=go>Omega Ratio                                    1.331624</span>
<span class=go>Sortino Ratio                                  2.084565</span>
<span class=go>Name: agg_func_&lt;lambda&gt;, dtype: object</span>
</code></pre></div> <p>Let's create a simple metric that returns a passed value to demonstrate how vectorbt overrides settings, from least to most important:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># vbt.settings.portfolio.stats</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>portfolio</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;settings&#39;</span><span class=p>][</span><span class=s1>&#39;my_arg&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>100</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_arg_metric</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;my_arg_metric&#39;</span><span class=p>,</span> <span class=nb>dict</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;My Arg&#39;</span><span class=p>,</span> <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>my_arg</span><span class=p>:</span> <span class=n>my_arg</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>my_arg_metric</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>My Arg    100</span>
<span class=go>Name: 10, dtype: int64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># settings &gt;&gt;&gt; vbt.settings.portfolio.stats</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>my_arg_metric</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>my_arg</span><span class=o>=</span><span class=mi>200</span><span class=p>))</span>
<span class=go>My Arg    200</span>
<span class=go>Name: 10, dtype: int64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># metric settings &gt;&gt;&gt; settings</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_arg_metric</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;my_arg_metric&#39;</span><span class=p>,</span> <span class=nb>dict</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;My Arg&#39;</span><span class=p>,</span> <span class=n>my_arg</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span> <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>my_arg</span><span class=p>:</span> <span class=n>my_arg</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>my_arg_metric</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>my_arg</span><span class=o>=</span><span class=mi>200</span><span class=p>))</span>
<span class=go>My Arg    300</span>
<span class=go>Name: 10, dtype: int64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># metric_settings &gt;&gt;&gt; metric settings</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>my_arg_metric</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>my_arg</span><span class=o>=</span><span class=mi>200</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>my_arg_metric</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>my_arg</span><span class=o>=</span><span class=mi>400</span><span class=p>)))</span>
<span class=go>My Arg    400</span>
<span class=go>Name: 10, dtype: int64</span>
</code></pre></div> <p>Here's an example of a parametrized metric. Let's get the number of trades with PnL over some amount:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>trade_min_pnl_cnt</span> <span class=o>=</span> <span class=p>(</span>
<span class=gp>... </span>    <span class=s1>&#39;trade_min_pnl_cnt&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>Sub</span><span class=p>(</span><span class=s1>&#39;Trades with PnL over $$$</span><span class=si>{min_pnl}</span><span class=s1>&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>calc_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>trades</span><span class=p>,</span> <span class=n>min_pnl</span><span class=p>:</span> <span class=n>trades</span><span class=o>.</span><span class=n>apply_mask</span><span class=p>(</span>
<span class=gp>... </span>            <span class=n>trades</span><span class=o>.</span><span class=n>pnl</span><span class=o>.</span><span class=n>values</span> <span class=o>&gt;=</span> <span class=n>min_pnl</span><span class=p>)</span><span class=o>.</span><span class=n>count</span><span class=p>(),</span>
<span class=gp>... </span>        <span class=n>resolve_trades</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>metrics</span><span class=o>=</span><span class=n>trade_min_pnl_cnt</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>trade_min_pnl_cnt</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>min_pnl</span><span class=o>=</span><span class=mi>0</span><span class=p>)))</span>
<span class=go>Trades with PnL over $0    6</span>
<span class=go>Name: stats, dtype: int64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>metrics</span><span class=o>=</span><span class=n>trade_min_pnl_cnt</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>trade_min_pnl_cnt</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>min_pnl</span><span class=o>=</span><span class=mi>10</span><span class=p>)))</span>
<span class=go>Trades with PnL over $10    1</span>
<span class=go>Name: stats, dtype: int64</span>
</code></pre></div> <p>If the same metric name was encountered more than once, vectorbt automatically appends an underscore and its position, so we can pass keyword arguments to each metric separately:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>metrics</span><span class=o>=</span><span class=p>[</span>
<span class=gp>... </span>        <span class=n>trade_min_pnl_cnt</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>trade_min_pnl_cnt</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>trade_min_pnl_cnt</span>
<span class=gp>... </span>    <span class=p>],</span>
<span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>metric_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>trade_min_pnl_cnt_0</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>min_pnl</span><span class=o>=</span><span class=mi>0</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>trade_min_pnl_cnt_1</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>min_pnl</span><span class=o>=</span><span class=mi>10</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>trade_min_pnl_cnt_2</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>min_pnl</span><span class=o>=</span><span class=mi>20</span><span class=p>))</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=go>Trades with PnL over $0     6</span>
<span class=go>Trades with PnL over $10    1</span>
<span class=go>Trades with PnL over $20    0</span>
<span class=go>Name: stats, dtype: int64</span>
</code></pre></div> <p>To add a custom metric to the list of all metrics, we have three options.</p> <p>The first option is to change the <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.metrics title=vectorbt.portfolio.base.Portfolio.metrics>Portfolio.metrics</a> dict in-place (this will append to the end):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;max_winning_streak&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>max_winning_streak</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>Start                         2020-01-01 00:00:00+00:00</span>
<span class=go>End                           2020-09-01 00:00:00+00:00</span>
<span class=go>Period                                244 days 00:00:00</span>
<span class=go>Start Value                                       100.0</span>
<span class=go>End Value                                    106.721585</span>
<span class=go>Total Return [%]                               6.721585</span>
<span class=go>Benchmark Return [%]                          66.252621</span>
<span class=go>Max Gross Exposure [%]                            100.0</span>
<span class=go>Total Fees Paid                                     0.0</span>
<span class=go>Max Drawdown [%]                              22.190944</span>
<span class=go>Max Drawdown Duration                 101 days 00:00:00</span>
<span class=go>Total Trades                                         10</span>
<span class=go>Total Closed Trades                                  10</span>
<span class=go>Total Open Trades                                     0</span>
<span class=go>Open Trade PnL                                      0.0</span>
<span class=go>Win Rate [%]                                       60.0</span>
<span class=go>Best Trade [%]                                 15.31962</span>
<span class=go>Worst Trade [%]                               -9.904223</span>
<span class=go>Avg Winning Trade [%]                          4.671959</span>
<span class=go>Avg Losing Trade [%]                          -4.851205</span>
<span class=go>Avg Winning Trade Duration             11 days 08:00:00</span>
<span class=go>Avg Losing Trade Duration              14 days 06:00:00</span>
<span class=go>Profit Factor                                  1.347457</span>
<span class=go>Expectancy                                     0.672158</span>
<span class=go>Sharpe Ratio                                   0.445231</span>
<span class=go>Calmar Ratio                                   0.460573</span>
<span class=go>Omega Ratio                                    1.099192</span>
<span class=go>Sortino Ratio                                  0.706986</span>
<span class=go>Max Winning Streak                                  3.0  &lt;&lt; here</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>Since <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.metrics title=vectorbt.portfolio.base.Portfolio.metrics>Portfolio.metrics</a> is of type <a href=/api/utils/config/#vectorbt.utils.config.Config title=vectorbt.utils.config.Config>Config</a>, we can reset it at any time to get default metrics:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</code></pre></div> <p>The second option is to copy <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.metrics title=vectorbt.portfolio.base.Portfolio.metrics>Portfolio.metrics</a>, append our metric, and pass as <code>metrics</code> argument:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>my_metrics</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>pf</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>items</span><span class=p>())</span> <span class=o>+</span> <span class=p>[</span><span class=n>max_winning_streak</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>metrics</span><span class=o>=</span><span class=n>my_metrics</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p>The third option is to set <code>metrics</code> globally under <code>portfolio.stats</code> in <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>portfolio</span><span class=p>[</span><span class=s1>&#39;stats&#39;</span><span class=p>][</span><span class=s1>&#39;metrics&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>my_metrics</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <h2 id=returns-stats>Returns stats<a class=headerlink href=#returns-stats title="Permanent link">&para;</a></h2> <p>We can compute the stats solely based on the portfolio's returns using <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.returns_stats title=vectorbt.portfolio.base.Portfolio.returns_stats>Portfolio.returns_stats()</a>, which calls <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.returns.accessors.ReturnsAccessor.stats>StatsBuilderMixin.stats()</a>.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>returns_stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=go>Start                        2020-01-01 00:00:00+00:00</span>
<span class=go>End                          2020-09-01 00:00:00+00:00</span>
<span class=go>Period                               244 days 00:00:00</span>
<span class=go>Total Return [%]                              6.721585</span>
<span class=go>Benchmark Return [%]                         66.252621</span>
<span class=go>Annualized Return [%]                         10.22056</span>
<span class=go>Annualized Volatility [%]                    36.683518</span>
<span class=go>Max Drawdown [%]                             22.190944</span>
<span class=go>Max Drawdown Duration                100 days 00:00:00</span>
<span class=go>Sharpe Ratio                                  0.445231</span>
<span class=go>Calmar Ratio                                  0.460573</span>
<span class=go>Omega Ratio                                   1.099192</span>
<span class=go>Sortino Ratio                                 0.706986</span>
<span class=go>Skew                                          1.328259</span>
<span class=go>Kurtosis                                      10.80246</span>
<span class=go>Tail Ratio                                    1.057913</span>
<span class=go>Common Sense Ratio                            1.166037</span>
<span class=go>Value at Risk                                -0.031011</span>
<span class=go>Alpha                                        -0.075109</span>
<span class=go>Beta                                          0.220351</span>
<span class=go>Name: 10, dtype: object</span>
</code></pre></div> <p>Most metrics defined in <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor title=vectorbt.returns.accessors.ReturnsAccessor>ReturnsAccessor</a> are also available as attributes of <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>sharpe_ratio</span><span class=p>()</span>
<span class=go>randnx_n</span>
<span class=go>10    0.445231</span>
<span class=go>20    1.886158</span>
<span class=go>Name: sharpe_ratio, dtype: float64</span>
</code></pre></div> <p>Moreover, we can access quantstats functions using <a href=/api/returns/qs_adapter/#vectorbt.returns.qs_adapter.QSAdapter title=vectorbt.returns.qs_adapter.QSAdapter>QSAdapter</a>:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>qs</span><span class=o>.</span><span class=n>sharpe</span><span class=p>()</span>
<span class=go>randnx_n</span>
<span class=go>10    0.445231</span>
<span class=go>20    1.886158</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=o>.</span><span class=n>qs</span><span class=o>.</span><span class=n>plot_snapshot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/portfolio_plot_snapshot.png></p> <h2 id=plots>Plots<a class=headerlink href=#plots title="Permanent link">&para;</a></h2> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>See <a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a>.</p> <p>The features implemented in this method are very similar to <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.portfolio.base.Portfolio.stats>StatsBuilderMixin.stats()</a>. See also the examples under <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.portfolio.base.Portfolio.stats>StatsBuilderMixin.stats()</a>.</p> </div> <p>Plot portfolio of a random strategy:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/portfolio_plot.svg></p> <p>You can choose any of the subplots in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.subplots title=vectorbt.portfolio.base.Portfolio.subplots>Portfolio.subplots</a>, in any order, and control their appearance using keyword arguments:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>subplots</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;drawdowns&#39;</span><span class=p>,</span> <span class=s1>&#39;underwater&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>subplot_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>drawdowns</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>top_n</span><span class=o>=</span><span class=mi>3</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>underwater</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>            <span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>                <span class=n>line</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>color</span><span class=o>=</span><span class=s1>&#39;#FF6F00&#39;</span><span class=p>),</span>
<span class=gp>... </span>                <span class=n>fillcolor</span><span class=o>=</span><span class=n>adjust_opacity</span><span class=p>(</span><span class=s1>&#39;#FF6F00&#39;</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>)</span>
<span class=gp>... </span>            <span class=p>)</span>
<span class=gp>... </span>        <span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/portfolio_plot_drawdowns.svg></p> <p>To create a new subplot, a preferred way is to pass a plotting function:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>plot_order_size</span><span class=p>(</span><span class=n>pf</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>add_trace_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>fig</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>size</span> <span class=o>=</span> <span class=n>pf</span><span class=o>.</span><span class=n>select_one_from_obj</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=n>pf</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>regroup</span><span class=p>(</span><span class=kc>False</span><span class=p>),</span> <span class=n>column</span><span class=o>=</span><span class=n>column</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=s1>&#39;Order Size&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>barplot</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>add_trace_kwargs</span><span class=o>=</span><span class=n>add_trace_kwargs</span><span class=p>,</span> <span class=n>fig</span><span class=o>=</span><span class=n>fig</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>order_size</span> <span class=o>=</span> <span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>size</span><span class=o>.</span><span class=n>to_pd</span><span class=p>(</span><span class=n>fill_value</span><span class=o>=</span><span class=mf>0.</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>subplots</span><span class=o>=</span><span class=p>[</span>
<span class=gp>... </span>    <span class=s1>&#39;orders&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=p>(</span><span class=s1>&#39;order_size&#39;</span><span class=p>,</span> <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Order Size&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>yaxis_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;Order size&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>check_is_not_grouped</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>plot_func</span><span class=o>=</span><span class=n>plot_order_size</span>
<span class=gp>... </span>    <span class=p>))</span>
<span class=gp>... </span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>subplot_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>order_size</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>            <span class=n>size</span><span class=o>=</span><span class=n>order_size</span>
<span class=gp>... </span>        <span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p>Alternatively, you can create a placeholder and overwrite it manually later:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>fig</span> <span class=o>=</span> <span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>subplots</span><span class=o>=</span><span class=p>[</span>
<span class=gp>... </span>    <span class=s1>&#39;orders&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=p>(</span><span class=s1>&#39;order_size&#39;</span><span class=p>,</span> <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Order Size&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>yaxis_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;Order size&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>check_is_not_grouped</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span>    <span class=p>))</span>  <span class=c1># placeholder</span>
<span class=gp>... </span><span class=p>],</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>order_size</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=s1>&#39;Order Size&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>barplot</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>add_trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>row</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>col</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>fig</span><span class=o>=</span><span class=n>fig</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p><img alt src=/assets/images/portfolio_plot_custom.svg></p> <p>If a plotting function can in any way be accessed from the current portfolio, you can pass the path to this function (see <a href=/api/utils/attr_/#vectorbt.utils.attr_.deep_getattr title=vectorbt.utils.attr_.deep_getattr>deep_getattr()</a> for the path format). You can additionally use templates to make some parameters to depend upon passed keyword arguments:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>subplots</span> <span class=o>=</span> <span class=p>[</span>
<span class=gp>... </span>    <span class=p>(</span><span class=s1>&#39;cumulative_returns&#39;</span><span class=p>,</span> <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Cumulative Returns&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>yaxis_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;Cumulative returns&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>plot_func</span><span class=o>=</span><span class=s1>&#39;returns.vbt.returns.cumulative.vbt.plot&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>pass_add_trace_kwargs</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span>    <span class=p>)),</span>
<span class=gp>... </span>    <span class=p>(</span><span class=s1>&#39;rolling_drawdown&#39;</span><span class=p>,</span> <span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Rolling Drawdown&#39;</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>yaxis_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;Rolling drawdown&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>plot_func</span><span class=o>=</span><span class=p>[</span>
<span class=gp>... </span>            <span class=s1>&#39;returns.vbt.returns&#39;</span><span class=p>,</span>  <span class=c1># returns accessor</span>
<span class=gp>... </span>            <span class=p>(</span>
<span class=gp>... </span>                <span class=s1>&#39;rolling_max_drawdown&#39;</span><span class=p>,</span>  <span class=c1># function name</span>
<span class=gp>... </span>                <span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;window&#39;</span><span class=p>),)),</span>  <span class=c1># positional arguments</span>
<span class=gp>... </span>            <span class=s1>&#39;vbt.plot&#39;</span>  <span class=c1># plotting function</span>
<span class=gp>... </span>        <span class=p>],</span>
<span class=gp>... </span>        <span class=n>pass_add_trace_kwargs</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>trace_names</span><span class=o>=</span><span class=p>[</span><span class=n>vbt</span><span class=o>.</span><span class=n>Sub</span><span class=p>(</span><span class=s1>&#39;rolling_drawdown($</span><span class=si>{window}</span><span class=s1>)&#39;</span><span class=p>)],</span>  <span class=c1># add window to the trace name</span>
<span class=gp>... </span>    <span class=p>))</span>
<span class=gp>... </span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>subplots</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>subplot_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>rolling_drawdown</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>            <span class=n>template_mapping</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>                <span class=n>window</span><span class=o>=</span><span class=mi>10</span>
<span class=gp>... </span>            <span class=p>)</span>
<span class=gp>... </span>        <span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
</code></pre></div> <p>You can also replace templates across all subplots by using the global template mapping:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>subplots</span><span class=p>,</span> <span class=n>column</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>template_mapping</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>window</span><span class=o>=</span><span class=mi>10</span><span class=p>))</span>
</code></pre></div> <p><img alt src=/assets/images/portfolio_plot_path.svg></p> <hr> <h2 id=vectorbt.portfolio.base.returns_acc_config>returns_acc_config <span class=dobjtype>Config</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.returns_acc_config title="Permanent link">&para;</a></h2> <p>Config of returns accessor methods to be added to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>.</p> <div class=highlight><pre><span></span><code><span class=err>Co</span><span class=kc>nf</span><span class=err>ig(</span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;daily_returns&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;source_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;daily&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;annual_returns&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;source_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;annual&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;cumulative_returns&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;source_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cumulative&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;annualized_return&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;source_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;annualized&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;annualized_volatility&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;calmar_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;omega_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;sharpe_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;deflated_sharpe_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;downside_risk&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;sortino_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;information_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;beta&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;alpha&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;tail_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;value_at_risk&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;cond_value_at_risk&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;capture&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;up_capture&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;down_capture&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;drawdown&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=nt>&quot;max_drawdown&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{}</span>
<span class=p>}</span><span class=err>)</span>
</code></pre></div> <hr> <h2 id=vectorbt.portfolio.base.MetaPortfolio>MetaPortfolio <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L1491-L1492 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.MetaPortfolio title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>MetaPortfolio</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Meta class that exposes a read-only class property <code>StatsBuilderMixin.metrics</code>.</p> <p><strong>Superclasses</strong></p> <ul> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.MetaPlotsBuilderMixin title=vectorbt.generic.plots_builder.MetaPlotsBuilderMixin>MetaPlotsBuilderMixin</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.MetaStatsBuilderMixin title=vectorbt.generic.stats_builder.MetaStatsBuilderMixin>MetaStatsBuilderMixin</a></li> <li><code>builtins.type</code></li> </ul> <p><strong>Inherited members</strong></p> <ul> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.MetaPlotsBuilderMixin.subplots title=vectorbt.generic.plots_builder.MetaPlotsBuilderMixin.subplots>MetaPlotsBuilderMixin.subplots</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.MetaStatsBuilderMixin.metrics title=vectorbt.generic.stats_builder.MetaStatsBuilderMixin.metrics>MetaStatsBuilderMixin.metrics</a></li> </ul> <hr> <h2 id=vectorbt.portfolio.base.Portfolio>Portfolio <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L1495-L5502 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=p>(</span>
    <span class=n>wrapper</span><span class=p>,</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>order_records</span><span class=p>,</span>
    <span class=n>log_records</span><span class=p>,</span>
    <span class=n>init_cash</span><span class=p>,</span>
    <span class=n>cash_sharing</span><span class=p>,</span>
    <span class=n>call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>fillna_close</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>trades_type</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Class for modeling portfolio and measuring its performance.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper.</p> <p>See <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.ArrayWrapper title=vectorbt.base.array_wrapper.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>close</code></strong> :&ensp;<code>array_like</code></dt> <dd>Last asset price at each time step.</dd> <dt><strong><code>order_records</code></strong> :&ensp;<code>array_like</code></dt> <dd>A structured NumPy array of order records.</dd> <dt><strong><code>log_records</code></strong> :&ensp;<code>array_like</code></dt> <dd>A structured NumPy array of log records.</dd> <dt><strong><code>init_cash</code></strong> :&ensp;<code>InitCashMode</code>, <code>float</code> or <code>array_like</code> of <code>float</code></dt> <dd>Initial capital.</dd> <dt><strong><code>cash_sharing</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to share cash within the same group.</dd> <dt><strong><code>call_seq</code></strong> :&ensp;<code>array_like</code> of <code>int</code></dt> <dd>Sequence of calls per row and group. Defaults to None.</dd> <dt><strong><code>fillna_close</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to forward and backward fill NaN values in <code>close</code>.</p> <p>Applied after the simulation to avoid NaNs in asset value.</p> <p>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_filled_close title=vectorbt.portfolio.base.Portfolio.get_filled_close>Portfolio.get_filled_close()</a>.</p> </dd> <dt><strong><code>trades_type</code></strong> :&ensp;<code>str</code> or <code>int</code></dt> <dd> <p>Default <a href=/api/portfolio/trades/#vectorbt.portfolio.trades.Trades title=vectorbt.portfolio.trades.Trades>Trades</a> to use across <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>.</p> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.TradesType title=vectorbt.portfolio.enums.TradesType>TradesType</a>.</p> </dd> </dl> <p>For defaults, see <code>portfolio</code> in <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Use class methods with <code>from_</code> prefix to build a portfolio. The <code>__init__</code> method is reserved for indexing purposes.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This class is meant to be immutable. To change any attribute, use <a href=/api/utils/config/#vectorbt.utils.config.Configured.replace title=vectorbt.portfolio.base.Portfolio.replace>Configured.replace()</a>.</p> </div> <p><strong>Superclasses</strong></p> <ul> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver title=vectorbt.utils.attr_.AttrResolver>AttrResolver</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured title=vectorbt.utils.config.Configured>Configured</a></li> <li><a href=/api/utils/docs/#vectorbt.utils.docs.Documented title=vectorbt.utils.docs.Documented>Documented</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.IndexingBase title=vectorbt.base.indexing.IndexingBase>IndexingBase</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer title=vectorbt.base.indexing.PandasIndexer>PandasIndexer</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable title=vectorbt.utils.config.Pickleable>Pickleable</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin title=vectorbt.generic.plots_builder.PlotsBuilderMixin>PlotsBuilderMixin</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin title=vectorbt.generic.stats_builder.StatsBuilderMixin>StatsBuilderMixin</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping title=vectorbt.base.array_wrapper.Wrapping>Wrapping</a></li> </ul> <p><strong>Inherited members</strong></p> <ul> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.deep_getattr title=vectorbt.base.array_wrapper.Wrapping.deep_getattr>AttrResolver.deep_getattr()</a></li> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.resolve_attr title=vectorbt.base.array_wrapper.Wrapping.resolve_attr>AttrResolver.resolve_attr()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.copy title=vectorbt.base.array_wrapper.Wrapping.copy>Configured.copy()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.dumps title=vectorbt.base.array_wrapper.Wrapping.dumps>Configured.dumps()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.loads title=vectorbt.base.array_wrapper.Wrapping.loads>Configured.loads()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.replace title=vectorbt.base.array_wrapper.Wrapping.replace>Configured.replace()</a></li> <li><a href=/api/utils/docs/#vectorbt.utils.docs.Documented.to_doc title=vectorbt.base.array_wrapper.Wrapping.to_doc>Configured.to_doc()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.update_config title=vectorbt.base.array_wrapper.Wrapping.update_config>Configured.update_config()</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.xs title=vectorbt.base.array_wrapper.Wrapping.xs>PandasIndexer.xs()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.load title=vectorbt.base.array_wrapper.Wrapping.load>Pickleable.load()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Pickleable.save title=vectorbt.base.array_wrapper.Wrapping.save>Pickleable.save()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.build_subplots_doc title=vectorbt.generic.plots_builder.PlotsBuilderMixin.build_subplots_doc>PlotsBuilderMixin.build_subplots_doc()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.override_subplots_doc title=vectorbt.generic.plots_builder.PlotsBuilderMixin.override_subplots_doc>PlotsBuilderMixin.override_subplots_doc()</a></li> <li><a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.build_metrics_doc title=vectorbt.generic.stats_builder.StatsBuilderMixin.build_metrics_doc>StatsBuilderMixin.build_metrics_doc()</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.override_metrics_doc title=vectorbt.generic.stats_builder.StatsBuilderMixin.override_metrics_doc>StatsBuilderMixin.override_metrics_doc()</a></li> <li><a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats()</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.config title=vectorbt.base.array_wrapper.Wrapping.config>Wrapping.config</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.iloc title=vectorbt.base.array_wrapper.Wrapping.iloc>Wrapping.iloc</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.indexing_kwargs title=vectorbt.base.array_wrapper.Wrapping.indexing_kwargs>Wrapping.indexing_kwargs</a></li> <li><a href=/api/base/indexing/#vectorbt.base.indexing.PandasIndexer.loc title=vectorbt.base.array_wrapper.Wrapping.loc>Wrapping.loc</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.resolve_self title=vectorbt.base.array_wrapper.Wrapping.resolve_self>Wrapping.resolve_self()</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.select_one title=vectorbt.base.array_wrapper.Wrapping.select_one>Wrapping.select_one()</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.select_one_from_obj title=vectorbt.base.array_wrapper.Wrapping.select_one_from_obj>Wrapping.select_one_from_obj()</a></li> <li><a href=/api/utils/attr_/#vectorbt.utils.attr_.AttrResolver.self_aliases title=vectorbt.base.array_wrapper.Wrapping.self_aliases>Wrapping.self_aliases</a></li> <li><a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.wrapper title=vectorbt.base.array_wrapper.Wrapping.wrapper>Wrapping.wrapper</a></li> <li><a href=/api/utils/config/#vectorbt.utils.config.Configured.writeable_attrs title=vectorbt.base.array_wrapper.Wrapping.writeable_attrs>Wrapping.writeable_attrs</a></li> </ul> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.alpha>alpha <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.alpha title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>alpha</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.alpha title=vectorbt.returns.accessors.ReturnsAccessor.alpha>ReturnsAccessor.alpha()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.annual_returns>annual_returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.annual_returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>annual_returns</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.annual title=vectorbt.returns.accessors.ReturnsAccessor.annual>ReturnsAccessor.annual()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.annualized_return>annualized_return <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.annualized_return title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>annualized_return</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.annualized title=vectorbt.returns.accessors.ReturnsAccessor.annualized>ReturnsAccessor.annualized()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.annualized_volatility>annualized_volatility <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.annualized_volatility title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>annualized_volatility</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.annualized_volatility title=vectorbt.returns.accessors.ReturnsAccessor.annualized_volatility>ReturnsAccessor.annualized_volatility()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.asset_flow>asset_flow <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4128-L4140 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.asset_flow title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>(</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get asset flow series per column.</p> <p>Returns the total transacted amount of assets at each time step.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.asset_returns>asset_returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4408-L4420 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.asset_returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>asset_returns</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get asset return series per column/group.</p> <p>This type of returns is based solely on cash flows and asset value rather than portfolio value. It ignores passive cash and thus it will return the same numbers irrespective of the amount of cash currently available, even <code>np.inf</code>. The scale of returns is comparable to that of going all in and keeping available cash at zero.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.asset_value>asset_value <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4277-L4294 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.asset_value title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>asset_value</span><span class=p>(</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get asset value series per column/group.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.assets>assets <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4142-L4154 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.assets title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>assets</span><span class=p>(</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get asset series per column.</p> <p>Returns the current position at each time step.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.benchmark_rets>benchmark_rets <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4505-L4512 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.benchmark_rets title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>benchmark_returns</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get return series per column/group based on benchmark value.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.benchmark_returns>benchmark_returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4505-L4512 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.benchmark_returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>benchmark_returns</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get return series per column/group based on benchmark value.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.benchmark_value>benchmark_value <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4483-L4503 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.benchmark_value title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>benchmark_value</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get market benchmark value series per column/group.</p> <p>If grouped, evenly distributes the initial cash among assets in the group.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Does not take into account fees and slippage. For this, create a separate portfolio.</p> </div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.beta>beta <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.beta title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>beta</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.beta title=vectorbt.returns.accessors.ReturnsAccessor.beta>ReturnsAccessor.beta()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.call_seq>call_seq <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L3995-L4000 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.call_seq title="Permanent link">&para;</a></h3> <p>Sequence of calls per row and group.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.calmar_ratio>calmar_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.calmar_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>calmar_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.calmar_ratio title=vectorbt.returns.accessors.ReturnsAccessor.calmar_ratio>ReturnsAccessor.calmar_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.capture>capture <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.capture title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>capture</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.capture title=vectorbt.returns.accessors.ReturnsAccessor.capture>ReturnsAccessor.capture()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.cash>cash <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4240-L4273 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.cash title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>cash</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_sim_order</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>free</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get cash balance series per column/group.</p> <p>See the explanation on <code>in_sim_order</code> in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.value title=vectorbt.portfolio.base.Portfolio.value>Portfolio.value()</a>. For <code>free</code>, see <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.cash_flow title=vectorbt.portfolio.base.Portfolio.cash_flow>Portfolio.cash_flow()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.cash_flow>cash_flow <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4189-L4207 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.cash_flow title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>cash_flow</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>free</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get cash flow series per column/group.</p> <p>Use <code>free</code> to return the flow of the free cash, which never goes above the initial level, because an operation always costs money.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.cash_sharing>cash_sharing <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L3990-L3993 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.cash_sharing title="Permanent link">&para;</a></h3> <p>Whether to share cash within the same group.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.close>close <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4014-L4017 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.close title="Permanent link">&para;</a></h3> <p>Price per unit series.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.cond_value_at_risk>cond_value_at_risk <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.cond_value_at_risk title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>cond_value_at_risk</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.cond_value_at_risk title=vectorbt.returns.accessors.ReturnsAccessor.cond_value_at_risk>ReturnsAccessor.cond_value_at_risk()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.cumulative_returns>cumulative_returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.cumulative_returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>cumulative_returns</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.cumulative title=vectorbt.returns.accessors.ReturnsAccessor.cumulative>ReturnsAccessor.cumulative()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.daily_returns>daily_returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.daily_returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>daily_returns</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.daily title=vectorbt.returns.accessors.ReturnsAccessor.daily>ReturnsAccessor.daily()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.deflated_sharpe_ratio>deflated_sharpe_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.deflated_sharpe_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>deflated_sharpe_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.deflated_sharpe_ratio title=vectorbt.returns.accessors.ReturnsAccessor.deflated_sharpe_ratio>ReturnsAccessor.deflated_sharpe_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.down_capture>down_capture <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.down_capture title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>down_capture</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.down_capture title=vectorbt.returns.accessors.ReturnsAccessor.down_capture>ReturnsAccessor.down_capture()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.downside_risk>downside_risk <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.downside_risk title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>downside_risk</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.downside_risk title=vectorbt.returns.accessors.ReturnsAccessor.downside_risk>ReturnsAccessor.downside_risk()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.drawdown>drawdown <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.drawdown title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>drawdown</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.drawdown title=vectorbt.returns.accessors.ReturnsAccessor.drawdown>ReturnsAccessor.drawdown()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.drawdowns>drawdowns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.drawdowns title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_drawdowns title=vectorbt.portfolio.base.Portfolio.get_drawdowns>Portfolio.get_drawdowns()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.entry_trades>entry_trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.entry_trades title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_entry_trades title=vectorbt.portfolio.base.Portfolio.get_entry_trades>Portfolio.get_entry_trades()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.exit_trades>exit_trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.exit_trades title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_exit_trades title=vectorbt.portfolio.base.Portfolio.get_exit_trades>Portfolio.get_exit_trades()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.fillna_close>fillna_close <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4002-L4005 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.fillna_close title="Permanent link">&para;</a></h3> <p>Whether to forward-backward fill NaN values in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.close title=vectorbt.portfolio.base.Portfolio.close>Portfolio.close</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.final_value>final_value <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4369-L4377 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.final_value title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>final_value</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get total profit per column/group.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.from_holding>from_holding <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L3023-L3035 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.from_holding title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_holding</span><span class=p>(</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Simulate portfolio from holding.</p> <p>Based on <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a>.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_holding</span><span class=p>(</span><span class=n>close</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>final_value</span><span class=p>()</span>
<span class=go>500.0</span>
</code></pre></div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.from_order_func>from_order_func <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L3144-L3963 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.from_order_func title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>order_func_nb</span><span class=p>,</span>
    <span class=o>*</span><span class=n>order_args</span><span class=p>,</span>
    <span class=n>flexible</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>init_cash</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>cash_sharing</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>segment_mask</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>call_pre_segment</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>call_post_segment</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>pre_sim_func_nb</span><span class=o>=</span><span class=n>no_pre_func_nb</span><span class=p>,</span>
    <span class=n>pre_sim_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>post_sim_func_nb</span><span class=o>=</span><span class=n>no_post_func_nb</span><span class=p>,</span>
    <span class=n>post_sim_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>pre_group_func_nb</span><span class=o>=</span><span class=n>no_pre_func_nb</span><span class=p>,</span>
    <span class=n>pre_group_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>post_group_func_nb</span><span class=o>=</span><span class=n>no_post_func_nb</span><span class=p>,</span>
    <span class=n>post_group_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>pre_row_func_nb</span><span class=o>=</span><span class=n>no_pre_func_nb</span><span class=p>,</span>
    <span class=n>pre_row_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>post_row_func_nb</span><span class=o>=</span><span class=n>no_post_func_nb</span><span class=p>,</span>
    <span class=n>post_row_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>pre_segment_func_nb</span><span class=o>=</span><span class=n>no_pre_func_nb</span><span class=p>,</span>
    <span class=n>pre_segment_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>post_segment_func_nb</span><span class=o>=</span><span class=n>no_post_func_nb</span><span class=p>,</span>
    <span class=n>post_segment_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>post_order_func_nb</span><span class=o>=</span><span class=n>no_post_func_nb</span><span class=p>,</span>
    <span class=n>post_order_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>ffill_val_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>update_value</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>fill_pos_record</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>row_wise</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_numba</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_orders</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_logs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>broadcast_named_args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>broadcast_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>template_mapping</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>attach_call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Build portfolio from a custom order function.</p> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>See <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_nb title=vectorbt.portfolio.nb.simulate_nb>simulate_nb()</a> for illustrations and argument definitions.</p> </div> <p>For more details on individual simulation functions:</p> <ul> <li>not <code>row_wise</code> and not <code>flexible</code>: See <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_nb title=vectorbt.portfolio.nb.simulate_nb>simulate_nb()</a></li> <li>not <code>row_wise</code> and <code>flexible</code>: See <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.flex_simulate_nb title=vectorbt.portfolio.nb.flex_simulate_nb>flex_simulate_nb()</a></li> <li><code>row_wise</code> and not <code>flexible</code>: See <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_row_wise_nb title=vectorbt.portfolio.nb.simulate_row_wise_nb>simulate_row_wise_nb()</a></li> <li><code>row_wise</code> and <code>flexible</code>: See <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.flex_simulate_row_wise_nb title=vectorbt.portfolio.nb.flex_simulate_row_wise_nb>flex_simulate_row_wise_nb()</a></li> </ul> <p><strong>Args</strong></p> <dl> <dt><strong><code>close</code></strong> :&ensp;<code>array_like</code></dt> <dd> <p>Last asset price at each time step. Will broadcast to <code>target_shape</code>.</p> <p>Used for calculating unrealized PnL and portfolio value.</p> </dd> <dt><strong><code>order_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd>Order generation function.</dd> <dt><strong><code>*order_args</code></strong></dt> <dd>Arguments passed to <code>order_func_nb</code>.</dd> <dt><strong><code>flexible</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to simulate using a flexible order function.</p> <p>This lifts the limit of one order per tick and symbol.</p> </dd> <dt><strong><code>init_cash</code></strong> :&ensp;<code>InitCashMode</code>, <code>float</code> or <code>array_like</code> of <code>float</code></dt> <dd> <p>Initial capital.</p> <p>See <code>init_cash</code> in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> </dd> <dt><strong><code>cash_sharing</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to share cash within the same group.</p> <p>If <code>group_by</code> is None, <code>group_by</code> becomes True to form a single group with cash sharing.</p> </dd> <dt><strong><code>call_seq</code></strong> :&ensp;<code>CallSeqType</code> or <code>array_like</code></dt> <dd> <p>Default sequence of calls per row and group.</p> <ul> <li>Use <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.CallSeqType title=vectorbt.portfolio.enums.CallSeqType>CallSeqType</a> to select a sequence type.</li> <li>Set to array to specify custom sequence. Will not broadcast.</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>CallSeqType.Auto should be implemented manually. Use <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.sort_call_seq_nb title=vectorbt.portfolio.nb.sort_call_seq_nb>sort_call_seq_nb()</a> or <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.sort_call_seq_out_nb title=vectorbt.portfolio.nb.sort_call_seq_out_nb>sort_call_seq_out_nb()</a> in <code>pre_segment_func_nb</code>.</p> </div> </dd> <dt><strong><code>segment_mask</code></strong> :&ensp;<code>int</code> or <code>array_like</code> of <code>bool</code></dt> <dd> <p>Mask of whether a particular segment should be executed.</p> <p>Supplying an integer will activate every n-th row. Supplying a boolean or an array of boolean will broadcast to the number of rows and groups.</p> <p>Does not broadcast together with <code>close</code> and <code>broadcast_named_args</code>, only against the final shape.</p> </dd> <dt><strong><code>call_pre_segment</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to call <code>pre_segment_func_nb</code> regardless of <code>segment_mask</code>.</dd> <dt><strong><code>call_post_segment</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to call <code>post_segment_func_nb</code> regardless of <code>segment_mask</code>.</dd> <dt><strong><code>pre_sim_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd>Function called before simulation. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_pre_func_nb title=vectorbt.portfolio.nb.no_pre_func_nb>no_pre_func_nb()</a>.</dd> <dt><strong><code>pre_sim_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>pre_sim_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>post_sim_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd>Function called after simulation. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_post_func_nb title=vectorbt.portfolio.nb.no_post_func_nb>no_post_func_nb()</a>.</dd> <dt><strong><code>post_sim_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>post_sim_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>pre_group_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function called before each group. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_pre_func_nb title=vectorbt.portfolio.nb.no_pre_func_nb>no_pre_func_nb()</a>.</p> <p>Called only if <code>row_wise</code> is False.</p> </dd> <dt><strong><code>pre_group_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>pre_group_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>post_group_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function called after each group. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_post_func_nb title=vectorbt.portfolio.nb.no_post_func_nb>no_post_func_nb()</a>.</p> <p>Called only if <code>row_wise</code> is False.</p> </dd> <dt><strong><code>post_group_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>post_group_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>pre_row_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function called before each row. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_pre_func_nb title=vectorbt.portfolio.nb.no_pre_func_nb>no_pre_func_nb()</a>.</p> <p>Called only if <code>row_wise</code> is True.</p> </dd> <dt><strong><code>pre_row_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>pre_row_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>post_row_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function called after each row. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_post_func_nb title=vectorbt.portfolio.nb.no_post_func_nb>no_post_func_nb()</a>.</p> <p>Called only if <code>row_wise</code> is True.</p> </dd> <dt><strong><code>post_row_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>post_row_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>pre_segment_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd>Function called before each segment. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_pre_func_nb title=vectorbt.portfolio.nb.no_pre_func_nb>no_pre_func_nb()</a>.</dd> <dt><strong><code>pre_segment_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>pre_segment_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>post_segment_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd>Function called after each segment. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_post_func_nb title=vectorbt.portfolio.nb.no_post_func_nb>no_post_func_nb()</a>.</dd> <dt><strong><code>post_segment_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>post_segment_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>post_order_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd>Callback that is called after the order has been processed.</dd> <dt><strong><code>post_order_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>post_order_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>ffill_val_price</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to track valuation price only if it's known.</p> <p>Otherwise, unknown <code>close</code> will lead to NaN in valuation price at the next timestamp.</p> </dd> <dt><strong><code>update_value</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to update group value after each filled order.</dd> <dt><strong><code>fill_pos_record</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to fill position record.</p> <p>Disable this to make simulation a bit faster for simple use cases.</p> </dd> <dt><strong><code>row_wise</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to iterate over rows rather than columns/groups.</dd> <dt><strong><code>use_numba</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to run the main simulation function using Numba.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Disabling it does not disable Numba for other functions. If necessary, you should ensure that every other function does not uses Numba as well. You can do this by using the <code>py_func</code> attribute of that function. Or, you could disable Numba globally by doing <code>os.environ['NUMBA_DISABLE_JIT'] = '1'</code>.</p> </div> </dd> <dt><strong><code>max_orders</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Size of the order records array. Defaults to the number of elements in the broadcasted shape.</p> <p>Set to a lower number if you run out of memory.</p> </dd> <dt><strong><code>max_logs</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Size of the log records array. Defaults to the number of elements in the broadcasted shape.</p> <p>Set to a lower number if you run out of memory.</p> </dd> <dt><strong><code>seed</code></strong> :&ensp;<code>int</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>broadcast_named_args</code></strong> :&ensp;<code>dict</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a>.</dd> <dt><strong><code>broadcast_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>template_mapping</code></strong> :&ensp;<code>mapping</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a>.</dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>freq</code></strong> :&ensp;<code>any</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>attach_call_seq</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to the <code>__init__</code> method.</dd> </dl> <p>For defaults, see <code>portfolio</code> in <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>All passed functions should be Numba-compiled if Numba is enabled.</p> <p>Also see notes on <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>In contrast to other methods, the valuation price is previous <code>close</code> instead of the order price since the price of an order is unknown before the call (which is more realistic by the way). You can still override the valuation price in <code>pre_segment_func_nb</code>.</p> </div> <p><strong>Usage</strong></p> <ul> <li>Buy 10 units each tick using closing price:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=n>size</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>order_func_nb</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>assets</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1    20.0</span>
<span class=go>2    30.0</span>
<span class=go>3    40.0</span>
<span class=go>4    40.0</span>
<span class=go>dtype: float64</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>cash</span><span class=p>()</span>
<span class=go>0    90.0</span>
<span class=go>1    70.0</span>
<span class=go>2    40.0</span>
<span class=go>3     0.0</span>
<span class=go>4     0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Reverse each position by first closing it. Keep state of last position to determine which position to open next (just as an example, there are easier ways to do this):</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>pre_group_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>last_pos_state</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>last_pos_state</span><span class=p>,)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>last_pos_state</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>position_now</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>close_position_nb</span><span class=p>()</span>
<span class=gp>...</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>last_pos_state</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>size</span> <span class=o>=</span> <span class=o>-</span><span class=n>np</span><span class=o>.</span><span class=n>inf</span>  <span class=c1># open short</span>
<span class=gp>... </span>        <span class=n>last_pos_state</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
<span class=gp>... </span>    <span class=k>else</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>size</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>inf</span>  <span class=c1># open long</span>
<span class=gp>... </span>        <span class=n>last_pos_state</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=n>size</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>pre_group_func_nb</span><span class=o>=</span><span class=n>pre_group_func_nb</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>assets</span><span class=p>()</span>
<span class=go>0    100.000000</span>
<span class=go>1      0.000000</span>
<span class=go>2    -66.666667</span>
<span class=go>3      0.000000</span>
<span class=go>4     26.666667</span>
<span class=go>dtype: float64</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>cash</span><span class=p>()</span>
<span class=go>0      0.000000</span>
<span class=go>1    200.000000</span>
<span class=go>2    400.000000</span>
<span class=go>3    133.333333</span>
<span class=go>4      0.000000</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Equal-weighted portfolio as in the example under <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_nb title=vectorbt.portfolio.nb.simulate_nb>simulate_nb()</a>:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>pre_group_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>order_value_out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>group_len</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>order_value_out</span><span class=p>,)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>pre_segment_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>order_value_out</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>size_type</span><span class=p>,</span> <span class=n>direction</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>from_col</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>to_col</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>c</span><span class=o>.</span><span class=n>last_val_price</span><span class=p>[</span><span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_col_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>price</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>nb</span><span class=o>.</span><span class=n>sort_call_seq_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>size_type</span><span class=p>,</span> <span class=n>direction</span><span class=p>,</span> <span class=n>order_value_out</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>()</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>size_type</span><span class=p>,</span> <span class=n>direction</span><span class=p>,</span> <span class=n>fees</span><span class=p>,</span> <span class=n>fixed_fees</span><span class=p>,</span> <span class=n>slippage</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>size</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>price</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>price</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>size_type</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size_type</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>direction</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>direction</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>fees</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>fees</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>fixed_fees</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>fixed_fees</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>slippage</span><span class=o>=</span><span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>slippage</span><span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=mi>42</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>size_template</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>RepEval</span><span class=p>(</span><span class=s1>&#39;np.asarray(1 / group_lens[0])&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>size_template</span><span class=p>,</span>  <span class=c1># order_args as *args</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;price&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;size_type&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;direction&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;fees&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;fixed_fees&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;slippage&#39;</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>segment_mask</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>  <span class=c1># rebalance every second tick</span>
<span class=gp>... </span>    <span class=n>pre_group_func_nb</span><span class=o>=</span><span class=n>pre_group_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>pre_segment_func_nb</span><span class=o>=</span><span class=n>pre_segment_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>pre_segment_args</span><span class=o>=</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>size_template</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;price&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;size_type&#39;</span><span class=p>),</span>
<span class=gp>... </span>        <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;direction&#39;</span><span class=p>)</span>
<span class=gp>... </span>    <span class=p>),</span>
<span class=gp>... </span>    <span class=n>broadcast_named_args</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>  <span class=c1># broadcast against each other</span>
<span class=gp>... </span>        <span class=n>price</span><span class=o>=</span><span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>size_type</span><span class=o>=</span><span class=n>SizeType</span><span class=o>.</span><span class=n>TargetPercent</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>direction</span><span class=o>=</span><span class=n>Direction</span><span class=o>.</span><span class=n>LongOnly</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>fixed_fees</span><span class=o>=</span><span class=mf>1.</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span>
<span class=gp>... </span>    <span class=p>),</span>
<span class=gp>... </span>    <span class=n>template_mapping</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>np</span><span class=o>=</span><span class=n>np</span><span class=p>),</span>  <span class=c1># required by size_template</span>
<span class=gp>... </span>    <span class=n>cash_sharing</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>group_by</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># one group with cash sharing</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_value</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/simulate_nb.svg></p> <p>Templates are a very powerful tool to prepare any custom arguments after they are broadcast and before they are passed to the simulation function. In the example above, we use <code>broadcast_named_args</code> to broadcast some arguments against each other and templates to pass those objects to callbacks. Additionally, we used an evaluation template to compute the size based on the number of assets in each group.</p> <p>You may ask: why should we bother using broadcasting and templates if we could just pass <code>size=1/3</code>? Because of flexibility those features provide: we can now pass whatever parameter combinations we want and it will work flawlessly. For example, to create two groups of equally-allocated positions, we need to change only two parameters:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>  <span class=c1># 6 columns instead of 3</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>group_by</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;g1&#39;</span><span class=p>,</span> <span class=s1>&#39;g1&#39;</span><span class=p>,</span> <span class=s1>&#39;g1&#39;</span><span class=p>,</span> <span class=s1>&#39;g2&#39;</span><span class=p>,</span> <span class=s1>&#39;g2&#39;</span><span class=p>,</span> <span class=s1>&#39;g2&#39;</span><span class=p>]</span>  <span class=c1># 2 groups instead of 1</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=p>[</span><span class=s1>&#39;g1&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>asset_value</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=p>[</span><span class=s1>&#39;g2&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>asset_value</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/from_order_func_g1.svg></p> <p><img alt src=/assets/images/from_order_func_g2.svg></p> <ul> <li>Combine multiple exit conditions. Exit early if the price hits some threshold before an actual exit:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>pre_sim_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>):</span>
<span class=gp>... </span>    <span class=c1># We need to define stop price per column once</span>
<span class=gp>... </span>    <span class=n>stop_price</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>target_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=p>(</span><span class=n>stop_price</span><span class=p>,)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>stop_price</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span>
<span class=gp>... </span>    <span class=c1># Select info related to this order</span>
<span class=gp>... </span>    <span class=n>entry_now</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>entries</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>exit_now</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>exits</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>size_now</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>price_now</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>close</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>stop_price_now</span> <span class=o>=</span> <span class=n>stop_price</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>col</span><span class=p>]</span>
<span class=gp>...</span>
<span class=gp>... </span>    <span class=c1># Our logic</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>entry_now</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>position_now</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>            <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span>
<span class=gp>... </span>                <span class=n>size</span><span class=o>=</span><span class=n>size_now</span><span class=p>,</span>
<span class=gp>... </span>                <span class=n>price</span><span class=o>=</span><span class=n>price_now</span><span class=p>,</span>
<span class=gp>... </span>                <span class=n>direction</span><span class=o>=</span><span class=n>Direction</span><span class=o>.</span><span class=n>LongOnly</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>elif</span> <span class=n>exit_now</span> <span class=ow>or</span> <span class=n>price_now</span> <span class=o>&gt;=</span> <span class=n>stop_price_now</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>position_now</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>            <span class=k>return</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span>
<span class=gp>... </span>                <span class=n>size</span><span class=o>=-</span><span class=n>size_now</span><span class=p>,</span>
<span class=gp>... </span>                <span class=n>price</span><span class=o>=</span><span class=n>price_now</span><span class=p>,</span>
<span class=gp>... </span>                <span class=n>direction</span><span class=o>=</span><span class=n>Direction</span><span class=o>.</span><span class=n>LongOnly</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>NoOrder</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>post_order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>stop_price</span><span class=p>,</span> <span class=n>stop</span><span class=p>):</span>
<span class=gp>... </span>    <span class=c1># Same broadcasting as for size</span>
<span class=gp>... </span>    <span class=n>stop_now</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>stop</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>order_result</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>Filled</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>order_result</span><span class=o>.</span><span class=n>side</span> <span class=o>==</span> <span class=n>OrderSide</span><span class=o>.</span><span class=n>Buy</span><span class=p>:</span>
<span class=gp>... </span>            <span class=c1># Position entered: Set stop condition</span>
<span class=gp>... </span>            <span class=n>stop_price</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=n>stop_now</span><span class=p>)</span> <span class=o>*</span> <span class=n>c</span><span class=o>.</span><span class=n>order_result</span><span class=o>.</span><span class=n>price</span>
<span class=gp>... </span>        <span class=k>else</span><span class=p>:</span>
<span class=gp>... </span>            <span class=c1># Position exited: Remove stop condition</span>
<span class=gp>... </span>            <span class=n>stop_price</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span>

<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>simulate</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>threshold</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;entries&#39;</span><span class=p>),</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;exits&#39;</span><span class=p>),</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;size&#39;</span><span class=p>),</span>  <span class=c1># order_args</span>
<span class=gp>... </span>        <span class=n>pre_sim_func_nb</span><span class=o>=</span><span class=n>pre_sim_func_nb</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>post_order_func_nb</span><span class=o>=</span><span class=n>post_order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>        <span class=n>post_order_args</span><span class=o>=</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;threshold&#39;</span><span class=p>),),</span>
<span class=gp>... </span>        <span class=n>broadcast_named_args</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>  <span class=c1># broadcast against each other</span>
<span class=gp>... </span>            <span class=n>entries</span><span class=o>=</span><span class=n>entries</span><span class=p>,</span>
<span class=gp>... </span>            <span class=n>exits</span><span class=o>=</span><span class=n>exits</span><span class=p>,</span>
<span class=gp>... </span>            <span class=n>size</span><span class=o>=</span><span class=n>size</span><span class=p>,</span>
<span class=gp>... </span>            <span class=n>threshold</span><span class=o>=</span><span class=n>threshold</span>
<span class=gp>... </span>        <span class=p>)</span>
<span class=gp>... </span>    <span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>14</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>exits</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>simulate</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>inf</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>)</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2   -10.0</span>
<span class=go>3     0.0</span>
<span class=go>4     0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>simulate</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>inf</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>)</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2   -10.0</span>
<span class=go>3     0.0</span>
<span class=go>4     0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>simulate</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>)</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2     0.0</span>
<span class=go>3   -10.0</span>
<span class=go>4     0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <p>The reason why stop of 10% does not result in an order at the second time step is because it comes at the same time as entry, so it must wait until no entry is present. This can be changed by replacing the statement "elif" with "if", which would execute an exit regardless if an entry is present (similar to using <code>ConflictMode.Opposite</code> in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a>).</p> <p>We can also test the parameter combinations above all at once (thanks to broadcasting):</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>size</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[[</span><span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>]],</span>
<span class=gp>... </span>    <span class=n>columns</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Index</span><span class=p>([</span><span class=s1>&#39;0.1&#39;</span><span class=p>,</span> <span class=s1>&#39;0.2&#39;</span><span class=p>,</span> <span class=s1>&#39;nan&#39;</span><span class=p>],</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;size&#39;</span><span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>simulate</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>inf</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>size   0.1   0.2   nan</span>
<span class=go>0     10.0  10.0  10.0</span>
<span class=go>1      0.0   0.0   0.0</span>
<span class=go>2    -10.0 -10.0   0.0</span>
<span class=go>3      0.0   0.0 -10.0</span>
<span class=go>4      0.0   0.0   0.0</span>
</code></pre></div> <ul> <li>Let's illustrate how to generate multiple orders per symbol and bar. For each bar, buy at open and sell at close:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>flex_order_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=nb>open</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>call_idx</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>c</span><span class=o>.</span><span class=n>from_col</span><span class=p>,</span> <span class=n>nb</span><span class=o>.</span><span class=n>order_nb</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=n>size</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=nb>open</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>i</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>from_col</span><span class=p>])</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>call_idx</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>c</span><span class=o>.</span><span class=n>from_col</span><span class=p>,</span> <span class=n>nb</span><span class=o>.</span><span class=n>close_position_nb</span><span class=p>(</span><span class=n>price</span><span class=o>=</span><span class=n>c</span><span class=o>.</span><span class=n>close</span><span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>i</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>from_col</span><span class=p>])</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=n>NoOrder</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nb>open</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=s1>&#39;b&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>]})</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=s1>&#39;b&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]})</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>size</span> <span class=o>=</span> <span class=mi>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_order_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>flex_order_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>to_2d_array</span><span class=p>(</span><span class=nb>open</span><span class=p>),</span> <span class=n>size</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>flexible</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>max_orders</span><span class=o>=</span><span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>records_readable</span>
<span class=go>    Order Id  Timestamp Column  Size  Price  Fees  Side</span>
<span class=go>0          0          0      a   1.0    1.0   0.0   Buy</span>
<span class=go>1          1          0      a   1.0    2.0   0.0  Sell</span>
<span class=go>2          2          1      a   1.0    2.0   0.0   Buy</span>
<span class=go>3          3          1      a   1.0    3.0   0.0  Sell</span>
<span class=go>4          4          2      a   1.0    3.0   0.0   Buy</span>
<span class=go>5          5          2      a   1.0    4.0   0.0  Sell</span>
<span class=go>6          6          0      b   1.0    4.0   0.0   Buy</span>
<span class=go>7          7          0      b   1.0    3.0   0.0  Sell</span>
<span class=go>8          8          1      b   1.0    5.0   0.0   Buy</span>
<span class=go>9          9          1      b   1.0    4.0   0.0  Sell</span>
<span class=go>10        10          2      b   1.0    6.0   0.0   Buy</span>
<span class=go>11        11          2      b   1.0    5.0   0.0  Sell</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Each bar is effectively a black box - we don't know how the price moves inside. Since trades must come in an order that replicates that of the real world, the only reliable pieces of information are the opening and the closing price.</p> </div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.from_orders>from_orders <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L1600-L2019 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.from_orders title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>size</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>size_type</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>direction</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>fees</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>fixed_fees</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>slippage</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>min_size</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_size</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>size_granularity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>reject_prob</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>lock_cash</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>allow_partial</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>raise_reject</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>log</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>val_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>init_cash</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>cash_sharing</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>ffill_val_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>update_value</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_orders</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_logs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>broadcast_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>attach_call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Simulate portfolio from orders - size, price, fees, and other information.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>close</code></strong> :&ensp;<code>array_like</code></dt> <dd> <p>Last asset price at each time step. Will broadcast.</p> <p>Used for calculating unrealized PnL and portfolio value.</p> </dd> <dt><strong><code>size</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Size to order. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.size title=vectorbt.portfolio.enums.Order.size>Order.size</a>. Will broadcast.</dd> <dt><strong><code>size_type</code></strong> :&ensp;<code>SizeType</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.SizeType title=vectorbt.portfolio.enums.SizeType>SizeType</a>. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.size_type title=vectorbt.portfolio.enums.Order.size_type>Order.size_type</a>. Will broadcast.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>SizeType.Percent</code> does not support position reversal. Switch to a single direction.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Be cautious using <code>SizeType.Percent</code> with <code>call_seq</code> set to 'auto'. To execute sell orders before buy orders, the value of each order in the group needs to be approximated in advance. But since <code>SizeType.Percent</code> depends upon the cash balance, which cannot be calculated in advance since it may change after each order, this can yield a non-optimal call sequence.</p> </div> </dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Direction</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Direction title=vectorbt.portfolio.enums.Direction>Direction</a>. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.direction title=vectorbt.portfolio.enums.Order.direction>Order.direction</a>. Will broadcast.</dd> <dt><strong><code>price</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>Order price. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.price title=vectorbt.portfolio.enums.Order.price>Order.price</a>. Defaults to <code>np.inf</code>. Will broadcast.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Make sure to use the same timestamp for all order prices in the group with cash sharing and <code>call_seq</code> set to <code>CallSeqType.Auto</code>.</p> </div> </dd> <dt><strong><code>fees</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Fees in percentage of the order value. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.fees title=vectorbt.portfolio.enums.Order.fees>Order.fees</a>. Will broadcast.</dd> <dt><strong><code>fixed_fees</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Fixed amount of fees to pay per order. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.fixed_fees title=vectorbt.portfolio.enums.Order.fixed_fees>Order.fixed_fees</a>. Will broadcast.</dd> <dt><strong><code>slippage</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Slippage in percentage of price. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.slippage title=vectorbt.portfolio.enums.Order.slippage>Order.slippage</a>. Will broadcast.</dd> <dt><strong><code>min_size</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Minimum size for an order to be accepted. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.min_size title=vectorbt.portfolio.enums.Order.min_size>Order.min_size</a>. Will broadcast.</dd> <dt><strong><code>max_size</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd> <p>Maximum size for an order. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.max_size title=vectorbt.portfolio.enums.Order.max_size>Order.max_size</a>. Will broadcast.</p> <p>Will be partially filled if exceeded.</p> </dd> <dt><strong><code>size_granularity</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Granularity of the size. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.size_granularity title=vectorbt.portfolio.enums.Order.size_granularity>Order.size_granularity</a>. Will broadcast.</dd> <dt><strong><code>reject_prob</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>Order rejection probability. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.reject_prob title=vectorbt.portfolio.enums.Order.reject_prob>Order.reject_prob</a>. Will broadcast.</dd> <dt><strong><code>lock_cash</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>Whether to lock cash when shorting. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.lock_cash title=vectorbt.portfolio.enums.Order.lock_cash>Order.lock_cash</a>. Will broadcast.</dd> <dt><strong><code>allow_partial</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd> <p>Whether to allow partial fills. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.allow_partial title=vectorbt.portfolio.enums.Order.allow_partial>Order.allow_partial</a>. Will broadcast.</p> <p>Does not apply when size is <code>np.inf</code>.</p> </dd> <dt><strong><code>raise_reject</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>Whether to raise an exception if order gets rejected. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.raise_reject title=vectorbt.portfolio.enums.Order.raise_reject>Order.raise_reject</a>. Will broadcast.</dd> <dt><strong><code>log</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>Whether to log orders. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Order.log title=vectorbt.portfolio.enums.Order.log>Order.log</a>. Will broadcast.</dd> <dt><strong><code>val_price</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>Asset valuation price. Will broadcast.</p> <ul> <li>Any <code>-np.inf</code> element is replaced by the latest valuation price (the previous <code>close</code> or the latest known valuation price if <code>ffill_val_price</code>).</li> <li>Any <code>np.inf</code> element is replaced by the current order price.</li> </ul> <p>Used at the time of decision making to calculate value of each asset in the group, for example, to convert target value into target amount.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>In contrast to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a>, order price is known beforehand (kind of), thus <code>val_price</code> is set to the current order price (using <code>np.inf</code>) by default. To valuate using previous close, set it in the settings to <code>-np.inf</code>.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Make sure to use timestamp for <code>val_price</code> that comes before timestamps of all orders in the group with cash sharing (previous <code>close</code> for example), otherwise you're cheating yourself.</p> </div> </dd> <dt><strong><code>init_cash</code></strong> :&ensp;<code>InitCashMode</code>, <code>float</code> or <code>array_like</code> of <code>float</code></dt> <dd> <p>Initial capital.</p> <p>By default, will broadcast to the number of columns. If cash sharing is enabled, will broadcast to the number of groups. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.InitCashMode title=vectorbt.portfolio.enums.InitCashMode>InitCashMode</a> to find optimal initial cash.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Mode <code>InitCashMode.AutoAlign</code> is applied after the portfolio is initialized to set the same initial cash for all columns/groups. Changing grouping will change the initial cash, so be aware when indexing.</p> </div> </dd> <dt><strong><code>cash_sharing</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to share cash within the same group.</p> <p>If <code>group_by</code> is None, <code>group_by</code> becomes True to form a single group with cash sharing.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Introduces cross-asset dependencies.</p> <p>This method presumes that in a group of assets that share the same capital all orders will be executed within the same tick and retain their price regardless of their position in the queue, even though they depend upon each other and thus cannot be executed in parallel.</p> </div> </dd> <dt><strong><code>call_seq</code></strong> :&ensp;<code>CallSeqType</code> or <code>array_like</code></dt> <dd> <p>Default sequence of calls per row and group.</p> <p>Each value in this sequence should indicate the position of column in the group to call next. Processing of <code>call_seq</code> goes always from left to right. For example, <code>[2, 0, 1]</code> would first call column 'c', then 'a', and finally 'b'.</p> <ul> <li>Use <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.CallSeqType title=vectorbt.portfolio.enums.CallSeqType>CallSeqType</a> to select a sequence type.</li> <li>Set to array to specify custom sequence. Will not broadcast.</li> </ul> <p>If <code>CallSeqType.Auto</code> selected, rearranges calls dynamically based on order value. Calculates value of all orders per row and group, and sorts them by this value. Sell orders will be executed first to release funds for buy orders.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><code>CallSeqType.Auto</code> should be used with caution:</p> <ul> <li>It not only presumes that order prices are known beforehand, but also that orders can be executed in arbitrary order and still retain their price. In reality, this is hardly the case: after processing one asset, some time has passed and the price for other assets might have already changed.</li> <li>Even if you're able to specify a slippage large enough to compensate for this behavior, slippage itself should depend upon execution order. This method doesn't let you do that.</li> <li>If one order is rejected, it still may execute next orders and possibly leave them without required funds.</li> </ul> <p>For more control, use <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_order_func title=vectorbt.portfolio.base.Portfolio.from_order_func>Portfolio.from_order_func()</a>.</p> </div> </dd> <dt><strong><code>ffill_val_price</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to track valuation price only if it's known.</p> <p>Otherwise, unknown <code>close</code> will lead to NaN in valuation price at the next timestamp.</p> </dd> <dt><strong><code>update_value</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to update group value after each filled order.</dd> <dt><strong><code>max_orders</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Size of the order records array. Defaults to the number of elements in the broadcasted shape.</p> <p>Set to a lower number if you run out of memory.</p> </dd> <dt><strong><code>max_logs</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Size of the log records array. Defaults to the number of elements in the broadcasted shape if any of the <code>log</code> is True, otherwise to 1.</p> <p>Set to a lower number if you run out of memory.</p> </dd> <dt><strong><code>seed</code></strong> :&ensp;<code>int</code></dt> <dd>Seed to be set for both <code>call_seq</code> and at the beginning of the simulation.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>broadcast_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.broadcast title=vectorbt.base.reshape_fns.broadcast>broadcast()</a>.</dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.ArrayWrapper title=vectorbt.base.array_wrapper.ArrayWrapper>ArrayWrapper</a>.</dd> <dt><strong><code>freq</code></strong> :&ensp;<code>any</code></dt> <dd>Index frequency in case it cannot be parsed from <code>close</code>.</dd> <dt><strong><code>attach_call_seq</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to pass <code>call_seq</code> to the constructor.</p> <p>Makes sense if you want to analyze some metrics in the simulation order. Otherwise, just takes memory.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to the <code>__init__</code> method.</dd> </dl> <p>All broadcastable arguments will broadcast using <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.broadcast title=vectorbt.base.reshape_fns.broadcast>broadcast()</a> but keep original shape to utilize flexible indexing and to save memory.</p> <p>For defaults, see <code>portfolio</code> in <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When <code>call_seq</code> is not <code>CallSeqType.Auto</code>, at each timestamp, processing of the assets in a group goes strictly in order defined in <code>call_seq</code>. This order can't be changed dynamically.</p> <p>This has one big implication for this particular method: the last asset in the call stack cannot be processed until other assets are processed. This is the reason why rebalancing cannot work properly in this setting: one has to specify percentages for all assets beforehand and then tweak the processing order to sell to-be-sold assets first in order to release funds for to-be-bought assets. This can be automatically done by using <code>CallSeqType.Auto</code>.</p> </div> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>All broadcastable arguments can be set per frame, series, row, column, or element.</p> </div> <p><strong>Usage</strong></p> <ul> <li>Buy 10 units each tick:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>assets</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1    20.0</span>
<span class=go>2    30.0</span>
<span class=go>3    40.0</span>
<span class=go>4    40.0</span>
<span class=go>dtype: float64</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>cash</span><span class=p>()</span>
<span class=go>0    90.0</span>
<span class=go>1    70.0</span>
<span class=go>2    40.0</span>
<span class=go>3     0.0</span>
<span class=go>4     0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Reverse each position by first closing it:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>size</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>size_type</span><span class=o>=</span><span class=s1>&#39;targetpercent&#39;</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>assets</span><span class=p>()</span>
<span class=go>0    100.000000</span>
<span class=go>1      0.000000</span>
<span class=go>2    -66.666667</span>
<span class=go>3      0.000000</span>
<span class=go>4     26.666667</span>
<span class=go>dtype: float64</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>cash</span><span class=p>()</span>
<span class=go>0      0.000000</span>
<span class=go>1    200.000000</span>
<span class=go>2    400.000000</span>
<span class=go>3    133.333333</span>
<span class=go>4      0.000000</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Equal-weighted portfolio as in <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_nb title=vectorbt.portfolio.nb.simulate_nb>simulate_nb()</a> example (it's more compact but has less control over execution):</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=mi>42</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>)))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>size</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>1</span><span class=o>/</span><span class=mi>3</span><span class=p>))</span>  <span class=c1># each column 33.3%</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>size</span><span class=p>[</span><span class=mi>1</span><span class=p>::</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span>  <span class=c1># skip every second tick</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_orders</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>  <span class=c1># acts both as reference and order price here</span>
<span class=gp>... </span>    <span class=n>size</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>size_type</span><span class=o>=</span><span class=s1>&#39;targetpercent&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>call_seq</span><span class=o>=</span><span class=s1>&#39;auto&#39;</span><span class=p>,</span>  <span class=c1># first sell then buy</span>
<span class=gp>... </span>    <span class=n>group_by</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># one group</span>
<span class=gp>... </span>    <span class=n>cash_sharing</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># assets share the same cash</span>
<span class=gp>... </span>    <span class=n>fees</span><span class=o>=</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>fixed_fees</span><span class=o>=</span><span class=mf>1.</span><span class=p>,</span> <span class=n>slippage</span><span class=o>=</span><span class=mf>0.001</span>  <span class=c1># costs</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_value</span><span class=p>(</span><span class=n>group_by</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>
</code></pre></div> <p><img alt src=/assets/images/simulate_nb.svg></p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.from_random_signals>from_random_signals <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L3037-L3142 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.from_random_signals title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>n</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>prob</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>entry_prob</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>exit_prob</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>param_product</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>run_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Simulate portfolio from random entry and exit signals.</p> <p>Generates signals based either on the number of signals <code>n</code> or the probability of encountering a signal <code>prob</code>.</p> <ul> <li>If <code>n</code> is set, see <a href=/api/signals/generators/#vectorbt.signals.generators.RANDNX title=vectorbt.signals.generators.RANDNX>RANDNX</a>.</li> <li>If <code>prob</code> is set, see <a href=/api/signals/generators/#vectorbt.signals.generators.RPROBNX title=vectorbt.signals.generators.RPROBNX>RPROBNX</a>.</li> </ul> <p>Based on <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>To generate random signals, the shape of <code>close</code> is used. Broadcasting with other arrays happens after the generation.</p> </div> <p><strong>Usage</strong></p> <ul> <li>Test multiple combinations of random entries and exits:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span> <span class=n>seed</span><span class=o>=</span><span class=mi>42</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
<span class=go>randnx_n</span>
<span class=go>2    4</span>
<span class=go>1    2</span>
<span class=go>0    0</span>
<span class=go>Name: count, dtype: int64</span>
</code></pre></div> <ul> <li>Test the Cartesian product of entry and exit encounter probabilities:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_random_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entry_prob</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>exit_prob</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_product</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>seed</span><span class=o>=</span><span class=mi>42</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>orders</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
<span class=go>rprobnx_entry_prob  rprobnx_exit_prob</span>
<span class=go>0.0                 0.0                  0</span>
<span class=go>                    0.5                  0</span>
<span class=go>                    1.0                  0</span>
<span class=go>0.5                 0.0                  1</span>
<span class=go>                    0.5                  4</span>
<span class=go>                    1.0                  3</span>
<span class=go>1.0                 0.0                  1</span>
<span class=go>                    0.5                  4</span>
<span class=go>                    1.0                  5</span>
<span class=go>Name: count, dtype: int64</span>
</code></pre></div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.from_signals>from_signals <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L2021-L3021 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.from_signals title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>entries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>exits</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>short_entries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>short_exits</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>signal_func_nb</span><span class=o>=</span><span class=n>no_signal_func_nb</span><span class=p>,</span>
    <span class=n>signal_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>size</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>size_type</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>fees</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>fixed_fees</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>slippage</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>min_size</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_size</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>size_granularity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>reject_prob</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>lock_cash</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>allow_partial</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>raise_reject</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>log</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>accumulate</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>upon_long_conflict</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>upon_short_conflict</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>upon_dir_conflict</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>upon_opposite_entry</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>direction</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>val_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=nb>open</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>high</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>low</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>sl_stop</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>sl_trail</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>tp_stop</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>stop_entry_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>stop_exit_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>upon_stop_exit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>upon_stop_update</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>adjust_sl_func_nb</span><span class=o>=</span><span class=n>no_adjust_sl_func_nb</span><span class=p>,</span>
    <span class=n>adjust_sl_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>adjust_tp_func_nb</span><span class=o>=</span><span class=n>no_adjust_tp_func_nb</span><span class=p>,</span>
    <span class=n>adjust_tp_args</span><span class=o>=</span><span class=p>(),</span>
    <span class=n>use_stops</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>init_cash</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>cash_sharing</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>ffill_val_price</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>update_value</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_orders</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>max_logs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>broadcast_named_args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>broadcast_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>template_mapping</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>attach_call_seq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Simulate portfolio from entry and exit signals.</p> <p>See <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.simulate_from_signal_func_nb title=vectorbt.portfolio.nb.simulate_from_signal_func_nb>simulate_from_signal_func_nb()</a>.</p> <p>You have three options to provide signals:</p> <ul> <li> <p><code>entries</code> and <code>exits</code>: The direction of each pair of signals is taken from <code>direction</code> argument. Best to use when the direction doesn't change throughout time.</p> <p>Uses <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.dir_enex_signal_func_nb title=vectorbt.portfolio.nb.dir_enex_signal_func_nb>dir_enex_signal_func_nb()</a> as <code>signal_func_nb</code>.</p> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p><code>entries</code> and <code>exits</code> can be easily translated to direction-aware signals:</p> <ul> <li>(True, True, 'longonly') -&gt; True, True, False, False</li> <li>(True, True, 'shortonly') -&gt; False, False, True, True</li> <li>(True, True, 'both') -&gt; True, False, True, False</li> </ul> </div> </li> <li> <p><code>entries</code> (acting as long), <code>exits</code> (acting as long), <code>short_entries</code>, and <code>short_exits</code>: The direction is already built into the arrays. Best to use when the direction changes frequently (for example, if you have one indicator providing long signals and one providing short signals).</p> <p>Uses <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.ls_enex_signal_func_nb title=vectorbt.portfolio.nb.ls_enex_signal_func_nb>ls_enex_signal_func_nb()</a> as <code>signal_func_nb</code>.</p> </li> <li> <p><code>signal_func_nb</code> and <code>signal_args</code>: Custom signal function that returns direction-aware signals. Best to use when signals should be placed dynamically based on custom conditions.</p> </li> </ul> <p><strong>Args</strong></p> <dl> <dt><strong><code>close</code></strong> :&ensp;<code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>entries</code></strong> :&ensp;<code>array_like</code> of <code>bool</code></dt> <dd> <p>Boolean array of entry signals. Defaults to True if all other signal arrays are not set, otherwise False. Will broadcast.</p> <ul> <li>If <code>short_entries</code> and <code>short_exits</code> are not set: Acts as a long signal if <code>direction</code> is <code>all</code> or <code>longonly</code>, otherwise short.</li> <li>If <code>short_entries</code> or <code>short_exits</code> are set: Acts as <code>long_entries</code>.</li> </ul> </dd> <dt><strong><code>exits</code></strong> :&ensp;<code>array_like</code> of <code>bool</code></dt> <dd> <p>Boolean array of exit signals. Defaults to False. Will broadcast.</p> <ul> <li>If <code>short_entries</code> and <code>short_exits</code> are not set: Acts as a short signal if <code>direction</code> is <code>all</code> or <code>longonly</code>, otherwise long.</li> <li>If <code>short_entries</code> or <code>short_exits</code> are set: Acts as <code>long_exits</code>.</li> </ul> </dd> <dt><strong><code>short_entries</code></strong> :&ensp;<code>array_like</code> of <code>bool</code></dt> <dd>Boolean array of short entry signals. Defaults to False. Will broadcast.</dd> <dt><strong><code>short_exits</code></strong> :&ensp;<code>array_like</code> of <code>bool</code></dt> <dd>Boolean array of short exit signals. Defaults to False. Will broadcast.</dd> <dt><strong><code>signal_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function called to generate signals.</p> <p>Should accept <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.SignalContext title=vectorbt.portfolio.enums.SignalContext>SignalContext</a> and <code>*signal_args</code>. Should return long entry signal, long exit signal, short entry signal, and short exit signal.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Stop signal has priority: <code>signal_func_nb</code> is executed only if there is no stop signal.</p> </div> </dd> <dt><strong><code>signal_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>signal_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>size</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Negative size is not allowed. You should express direction using signals.</p> </div> </dd> <dt><strong><code>size_type</code></strong> :&ensp;<code>SizeType</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> <p>Only <code>SizeType.Amount</code>, <code>SizeType.Value</code>, and <code>SizeType.Percent</code> are supported. Other modes such as target percentage are not compatible with signals since their logic may contradict the direction of the signal.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>SizeType.Percent</code> does not support position reversal. Switch to a single direction or use <code>vectorbt.portfolio.enums.OppositeEntryMode.Close</code> to close the position first.</p> </div> <p>See warning in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> </dd> <dt><strong><code>price</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>fees</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>fixed_fees</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>slippage</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>min_size</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>max_size</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> <p>Will be partially filled if exceeded. You might not be able to properly close the position if accumulation is enabled and <code>max_size</code> is too low.</p> </dd> <dt><strong><code>size_granularity</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>reject_prob</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>lock_cash</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>allow_partial</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>raise_reject</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>log</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>accumulate</code></strong> :&ensp;<code>bool</code>, <code>AccumulationMode</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.AccumulationMode title=vectorbt.portfolio.enums.AccumulationMode>AccumulationMode</a>. If True, becomes 'both'. If False, becomes 'disabled'. Will broadcast.</p> <p>When enabled, <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_signals title=vectorbt.portfolio.base.Portfolio.from_signals>Portfolio.from_signals()</a> behaves similarly to <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> </dd> <dt><strong><code>upon_long_conflict</code></strong> :&ensp;<code>ConflictMode</code> or <code>array_like</code></dt> <dd>Conflict mode for long signals. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.ConflictMode title=vectorbt.portfolio.enums.ConflictMode>ConflictMode</a>. Will broadcast.</dd> <dt><strong><code>upon_short_conflict</code></strong> :&ensp;<code>ConflictMode</code> or <code>array_like</code></dt> <dd>Conflict mode for short signals. See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.ConflictMode title=vectorbt.portfolio.enums.ConflictMode>ConflictMode</a>. Will broadcast.</dd> <dt><strong><code>upon_dir_conflict</code></strong> :&ensp;<code>DirectionConflictMode</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.DirectionConflictMode title=vectorbt.portfolio.enums.DirectionConflictMode>DirectionConflictMode</a>. Will broadcast.</dd> <dt><strong><code>upon_opposite_entry</code></strong> :&ensp;<code>OppositeEntryMode</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.OppositeEntryMode title=vectorbt.portfolio.enums.OppositeEntryMode>OppositeEntryMode</a>. Will broadcast.</dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Direction</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> <p>Takes only effect if <code>short_entries</code> and <code>short_exits</code> are not set.</p> </dd> <dt><strong><code>val_price</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>open</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>First asset price at each time step. Defaults to <code>np.nan</code>, which gets replaced by <code>close</code>. Will broadcast.</p> <p>Used solely for stop signals.</p> </dd> <dt><strong><code>high</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>Highest asset price at each time step. Defaults to <code>np.nan</code>, which gets replaced by the maximum out of <code>open</code> and <code>close</code>. Will broadcast.</p> <p>Used solely for stop signals.</p> </dd> <dt><strong><code>low</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>Lowest asset price at each time step. Defaults to <code>np.nan</code>, which gets replaced by the minimum out of <code>open</code> and <code>close</code>. Will broadcast.</p> <p>Used solely for stop signals.</p> </dd> <dt><strong><code>sl_stop</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>Stop loss. Will broadcast.</p> <p>A percentage below/above the acquisition price for long/short position. Note that 0.01 = 1%.</p> </dd> <dt><strong><code>sl_trail</code></strong> :&ensp;<code>array_like</code> of <code>bool</code></dt> <dd>Whether <code>sl_stop</code> should be trailing. Will broadcast.</dd> <dt><strong><code>tp_stop</code></strong> :&ensp;<code>array_like</code> of <code>float</code></dt> <dd> <p>Take profit. Will broadcast.</p> <p>A percentage above/below the acquisition price for long/short position. Note that 0.01 = 1%.</p> </dd> <dt><strong><code>stop_entry_price</code></strong> :&ensp;<code>StopEntryPrice</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.StopEntryPrice title=vectorbt.portfolio.enums.StopEntryPrice>StopEntryPrice</a>. Will broadcast.</p> <p>If provided on per-element basis, gets applied upon entry.</p> </dd> <dt><strong><code>stop_exit_price</code></strong> :&ensp;<code>StopExitPrice</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.StopExitPrice title=vectorbt.portfolio.enums.StopExitPrice>StopExitPrice</a>. Will broadcast.</p> <p>If provided on per-element basis, gets applied upon exit.</p> </dd> <dt><strong><code>upon_stop_exit</code></strong> :&ensp;<code>StopExitMode</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.StopExitMode title=vectorbt.portfolio.enums.StopExitMode>StopExitMode</a>. Will broadcast.</p> <p>If provided on per-element basis, gets applied upon exit.</p> </dd> <dt><strong><code>upon_stop_update</code></strong> :&ensp;<code>StopUpdateMode</code> or <code>array_like</code></dt> <dd> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.StopUpdateMode title=vectorbt.portfolio.enums.StopUpdateMode>StopUpdateMode</a>. Will broadcast.</p> <p>Only has effect if accumulation is enabled.</p> <p>If provided on per-element basis, gets applied upon repeated entry.</p> </dd> <dt><strong><code>adjust_sl_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function to adjust stop loss. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_adjust_sl_func_nb title=vectorbt.portfolio.nb.no_adjust_sl_func_nb>no_adjust_sl_func_nb()</a>.</p> <p>Called for each element before each row.</p> <p>Should accept <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.AdjustSLContext title=vectorbt.portfolio.enums.AdjustSLContext>AdjustSLContext</a> and <code>*adjust_sl_args</code>. Should return a tuple of a new stop value and trailing flag.</p> </dd> <dt><strong><code>adjust_sl_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>adjust_sl_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>adjust_tp_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Function to adjust take profit. Defaults to <a href=/api/portfolio/nb/#vectorbt.portfolio.nb.no_adjust_tp_func_nb title=vectorbt.portfolio.nb.no_adjust_tp_func_nb>no_adjust_tp_func_nb()</a>.</p> <p>Called for each element before each row.</p> <p>Should accept <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.AdjustTPContext title=vectorbt.portfolio.enums.AdjustTPContext>AdjustTPContext</a> and <code>*adjust_tp_args</code>. of the stop, and <code>*adjust_tp_args</code>. Should return a new stop value.</p> </dd> <dt><strong><code>adjust_tp_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Packed arguments passed to <code>adjust_tp_func_nb</code>. Defaults to <code>()</code>.</dd> <dt><strong><code>use_stops</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to use stops. Defaults to None, which becomes True if any of the stops are not NaN or any of the adjustment functions are custom.</p> <p>Disable this to make simulation a bit faster for simple use cases.</p> </dd> <dt><strong><code>init_cash</code></strong> :&ensp;<code>InitCashMode</code>, <code>float</code> or <code>array_like</code> of <code>float</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>cash_sharing</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>call_seq</code></strong> :&ensp;<code>CallSeqType</code> or <code>array_like</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>ffill_val_price</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>update_value</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>max_orders</code></strong> :&ensp;<code>int</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>max_logs</code></strong> :&ensp;<code>int</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>seed</code></strong> :&ensp;<code>int</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>broadcast_named_args</code></strong> :&ensp;<code>dict</code></dt> <dd> <p>Dictionary with named arguments to broadcast.</p> <p>You can then pass argument names to the functions and this method will substitute them by their corresponding broadcasted objects.</p> </dd> <dt><strong><code>broadcast_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>template_mapping</code></strong> :&ensp;<code>mapping</code></dt> <dd>Mapping to replace templates in arguments.</dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>freq</code></strong> :&ensp;<code>any</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>attach_call_seq</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to the <code>__init__</code> method.</dd> </dl> <p>All broadcastable arguments will broadcast using <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.broadcast title=vectorbt.base.reshape_fns.broadcast>broadcast()</a> but keep original shape to utilize flexible indexing and to save memory.</p> <p>For defaults, see <code>portfolio</code> in <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Stop signal has priority - it's executed before other signals within the same bar. That is, if a stop signal is present, no other signals are generated and executed since there is a limit of one order per symbol and bar.</p> </div> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>If you generated signals using close price, don't forget to shift your signals by one tick forward, for example, with <code>signals.vbt.fshift(1)</code>. In general, make sure to use a price that comes after the signal.</p> </div> <p>Also see notes and hints for <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.from_orders title=vectorbt.portfolio.base.Portfolio.from_orders>Portfolio.from_orders()</a>.</p> <p><strong>Usage</strong></p> <ul> <li>By default, if all signal arrays are None, <code>entries</code> becomes True, which opens a position at the very first tick and does nothing else:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3    0.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Entry opens long, exit closes long:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;longonly&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3   -1.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Using direction-aware arrays instead of `direction`</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>  <span class=c1># long_entries</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>  <span class=c1># long_exits</span>
<span class=gp>... </span>    <span class=n>short_entries</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>short_exits</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3   -1.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <p>Notice how both <code>short_entries</code> and <code>short_exits</code> are provided as constants - as any other broadcastable argument, they are treated as arrays where each element is False.</p> <ul> <li>Entry opens short, exit closes short:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;shortonly&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0   -1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3    1.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Using direction-aware arrays instead of `direction`</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>  <span class=c1># long_entries</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>  <span class=c1># long_exits</span>
<span class=gp>... </span>    <span class=n>short_entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>short_exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0   -1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3    1.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Entry opens long and closes short, exit closes long and opens short:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3   -2.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Using direction-aware arrays instead of `direction`</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>  <span class=c1># long_entries</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>  <span class=c1># long_exits</span>
<span class=gp>... </span>    <span class=n>short_entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>short_exits</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3   -2.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>More complex signal combinations are best expressed using direction-aware arrays. For example, ignore opposite signals as long as the current position is open:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span>      <span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>  <span class=c1># long_entries</span>
<span class=gp>... </span>    <span class=n>exits</span>        <span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>  <span class=c1># long_exits</span>
<span class=gp>... </span>    <span class=n>short_entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>short_exits</span>  <span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_opposite_entry</span><span class=o>=</span><span class=s1>&#39;ignore&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2   -1.0</span>
<span class=go>3   -1.0</span>
<span class=go>4    1.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>First opposite signal closes the position, second one opens a new position:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_opposite_entry</span><span class=o>=</span><span class=s1>&#39;close&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3   -1.0</span>
<span class=go>4   -1.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>If both long entry and exit signals are True (a signal conflict), choose exit:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mf>1.</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;longonly&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_long_conflict</span><span class=o>=</span><span class=s1>&#39;exit&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2   -1.0</span>
<span class=go>3    0.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>If both long entry and short entry signal are True (a direction conflict), choose short:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mf>1.</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_dir_conflict</span><span class=o>=</span><span class=s1>&#39;short&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2   -2.0</span>
<span class=go>3    0.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Remember that when direction is set to 'both', entries become <code>long_entries</code> and exits become <code>short_entries</code>, so this becomes a conflict of directions rather than signals.</p> </div> <ul> <li>If there are both signal and direction conflicts:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># long_entries</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># long_exits</span>
<span class=gp>... </span>    <span class=n>short_entries</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>short_exits</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_long_conflict</span><span class=o>=</span><span class=s1>&#39;entry&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_short_conflict</span><span class=o>=</span><span class=s1>&#39;entry&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_dir_conflict</span><span class=o>=</span><span class=s1>&#39;short&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0   -1.0</span>
<span class=go>1    0.0</span>
<span class=go>2    0.0</span>
<span class=go>3    0.0</span>
<span class=go>4    0.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Turn on accumulation of signals. Entry means long order, exit means short order (acts similar to <code>from_orders</code>):</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mf>1.</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>accumulate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    1.0</span>
<span class=go>2    0.0</span>
<span class=go>3   -1.0</span>
<span class=go>4   -1.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Allow increasing a position (of any direction), deny decreasing a position:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mf>1.</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>accumulate</span><span class=o>=</span><span class=s1>&#39;addonly&#39;</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0  &lt;&lt; open a long position</span>
<span class=go>1    1.0  &lt;&lt; add to the position</span>
<span class=go>2    0.0</span>
<span class=go>3   -3.0  &lt;&lt; close and open a short position</span>
<span class=go>4   -1.0  &lt;&lt; add to the position</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Testing multiple parameters (via broadcasting):</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>exits</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>direction</span><span class=o>=</span><span class=p>[</span><span class=nb>list</span><span class=p>(</span><span class=n>Direction</span><span class=p>)],</span>
<span class=gp>... </span>    <span class=n>broadcast_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>columns_from</span><span class=o>=</span><span class=n>Direction</span><span class=o>.</span><span class=n>_fields</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>    Long  Short    All</span>
<span class=go>0  100.0 -100.0  100.0</span>
<span class=go>1    0.0    0.0    0.0</span>
<span class=go>2    0.0    0.0    0.0</span>
<span class=go>3 -100.0   50.0 -200.0</span>
<span class=go>4    0.0    0.0    0.0</span>
</code></pre></div> <ul> <li>Set risk/reward ratio by passing trailing stop loss and take profit thresholds:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>9</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>exits</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>sl_stop</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>sl_trail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>tp_stop</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>  <span class=c1># take profit hit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2   -10.0</span>
<span class=go>3     0.0</span>
<span class=go>4     0.0</span>
<span class=go>5     0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>sl_stop</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>sl_trail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>tp_stop</span><span class=o>=</span><span class=mf>0.3</span><span class=p>)</span>  <span class=c1># stop loss hit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2     0.0</span>
<span class=go>3     0.0</span>
<span class=go>4   -10.0</span>
<span class=go>5     0.0</span>
<span class=go>dtype: float64</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>close</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>sl_stop</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>inf</span><span class=p>,</span> <span class=n>sl_trail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>tp_stop</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>inf</span><span class=p>)</span>  <span class=c1># nothing hit, exit as usual</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2     0.0</span>
<span class=go>3     0.0</span>
<span class=go>4     0.0</span>
<span class=go>5   -10.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When the stop price is hit, the stop signal invalidates any other signal defined for this bar. Thus, make sure that your signaling logic happens at the very end of the bar (for example, by using the closing price), otherwise you may expose yourself to a look-ahead bias.</p> <p>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.StopExitPrice title=vectorbt.portfolio.enums.StopExitPrice>StopExitPrice</a> for more details.</p> </div> <ul> <li>We can implement our own stop loss or take profit, or adjust the existing one at each time step. Let's implement <a href=https://www.freqtrade.io/en/stable/strategy-advanced/#stepped-stoploss>stepped stop-loss</a>:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>adjust_sl_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>current_profit</span> <span class=o>=</span> <span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>val_price_now</span> <span class=o>-</span> <span class=n>c</span><span class=o>.</span><span class=n>init_price</span><span class=p>)</span> <span class=o>/</span> <span class=n>c</span><span class=o>.</span><span class=n>init_price</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>current_profit</span> <span class=o>&gt;=</span> <span class=mf>0.40</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=mf>0.25</span><span class=p>,</span> <span class=kc>True</span>
<span class=gp>... </span>    <span class=k>elif</span> <span class=n>current_profit</span> <span class=o>&gt;=</span> <span class=mf>0.25</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=mf>0.15</span><span class=p>,</span> <span class=kc>True</span>
<span class=gp>... </span>    <span class=k>elif</span> <span class=n>current_profit</span> <span class=o>&gt;=</span> <span class=mf>0.20</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=mf>0.07</span><span class=p>,</span> <span class=kc>True</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>c</span><span class=o>.</span><span class=n>curr_stop</span><span class=p>,</span> <span class=n>c</span><span class=o>.</span><span class=n>curr_trail</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>10</span><span class=p>])</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span><span class=n>close</span><span class=p>,</span> <span class=n>adjust_sl_func_nb</span><span class=o>=</span><span class=n>adjust_sl_func_nb</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    10.0</span>
<span class=go>1     0.0</span>
<span class=go>2     0.0</span>
<span class=go>3   -10.0  # 7% from 12 hit</span>
<span class=go>4    11.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <ul> <li>Sometimes there is a need to provide or transform signals dynamically. For this, we can implement a custom signal function <code>signal_func_nb</code>. For example, let's implement a signal function that takes two numerical arrays - long and short one - and transforms them into 4 direction-aware boolean arrays that vectorbt understands:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>signal_func_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>long_num_arr</span><span class=p>,</span> <span class=n>short_num_arr</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>long_num</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>long_num_arr</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>short_num</span> <span class=o>=</span> <span class=n>nb</span><span class=o>.</span><span class=n>get_elem_nb</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>short_num_arr</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>is_long_entry</span> <span class=o>=</span> <span class=n>long_num</span> <span class=o>&gt;</span> <span class=mi>0</span>
<span class=gp>... </span>    <span class=n>is_long_exit</span> <span class=o>=</span> <span class=n>long_num</span> <span class=o>&lt;</span> <span class=mi>0</span>
<span class=gp>... </span>    <span class=n>is_short_entry</span> <span class=o>=</span> <span class=n>short_num</span> <span class=o>&gt;</span> <span class=mi>0</span>
<span class=gp>... </span>    <span class=n>is_short_exit</span> <span class=o>=</span> <span class=n>short_num</span> <span class=o>&lt;</span> <span class=mi>0</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>is_long_entry</span><span class=p>,</span> <span class=n>is_long_exit</span><span class=p>,</span> <span class=n>is_short_entry</span><span class=p>,</span> <span class=n>is_short_exit</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]),</span>
<span class=gp>... </span>    <span class=n>signal_func_nb</span><span class=o>=</span><span class=n>signal_func_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>signal_args</span><span class=o>=</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;long_num_arr&#39;</span><span class=p>),</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Rep</span><span class=p>(</span><span class=s1>&#39;short_num_arr&#39;</span><span class=p>)),</span>
<span class=gp>... </span>    <span class=n>broadcast_named_args</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>long_num_arr</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]),</span>
<span class=gp>... </span>        <span class=n>short_num_arr</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>])</span>
<span class=gp>... </span>    <span class=p>),</span>
<span class=gp>... </span>    <span class=n>size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>upon_opposite_entry</span><span class=o>=</span><span class=s1>&#39;ignore&#39;</span>
<span class=gp>... </span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>pf</span><span class=o>.</span><span class=n>asset_flow</span><span class=p>()</span>
<span class=go>0    1.0</span>
<span class=go>1    0.0</span>
<span class=go>2   -1.0</span>
<span class=go>3   -1.0</span>
<span class=go>4    1.0</span>
<span class=go>dtype: float64</span>
</code></pre></div> <p>Passing both arrays as <code>broadcast_named_args</code> broadcasts them internally as any other array, so we don't have to worry about their dimensions every time we change our data.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_drawdowns>get_drawdowns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4116-L4124 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_drawdowns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_drawdowns</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get drawdown records from <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.value title=vectorbt.portfolio.base.Portfolio.value>Portfolio.value()</a>.</p> <p>See <a href=/api/generic/drawdowns/#vectorbt.generic.drawdowns.Drawdowns title=vectorbt.generic.drawdowns.Drawdowns>Drawdowns</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_entry_trades>get_entry_trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4066-L4071 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_entry_trades title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_entry_trades</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get entry trade records.</p> <p>See <a href=/api/portfolio/trades/#vectorbt.portfolio.trades.EntryTrades title=vectorbt.portfolio.trades.EntryTrades>EntryTrades</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_exit_trades>get_exit_trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4078-L4083 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_exit_trades title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_exit_trades</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get exit trade records.</p> <p>See <a href=/api/portfolio/trades/#vectorbt.portfolio.trades.ExitTrades title=vectorbt.portfolio.trades.ExitTrades>ExitTrades</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_filled_close>get_filled_close <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4019-L4023 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_filled_close title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_filled_close</span><span class=p>(</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Forward-backward-fill NaN values in <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.close title=vectorbt.portfolio.base.Portfolio.close>Portfolio.close</a></p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_init_cash>get_init_cash <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4214-L4238 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_init_cash title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_init_cash</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Initial amount of cash per column/group with default arguments.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If the initial cash balance was found automatically and no own cash is used throughout the simulation (for example, when shorting), it will be set to 1 instead of 0 to enable smooth calculation of returns.</p> </div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_logs>get_logs <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4054-L4059 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_logs title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_logs</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get log records.</p> <p>See <a href=/api/portfolio/logs/#vectorbt.portfolio.logs.Logs title=vectorbt.portfolio.logs.Logs>Logs</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_orders>get_orders <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4037-L4042 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_orders title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_orders</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get order records.</p> <p>See <a href=/api/portfolio/orders/#vectorbt.portfolio.orders.Orders title=vectorbt.portfolio.orders.Orders>Orders</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_positions>get_positions <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4095-L4100 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_positions title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_positions</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get position records.</p> <p>See <a href=/api/portfolio/trades/#vectorbt.portfolio.trades.Positions title=vectorbt.portfolio.trades.Positions>Positions</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_qs>get_qs <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4461-L4481 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_qs title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_qs</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get quantstats adapter of type <a href=/api/returns/qs_adapter/#vectorbt.returns.qs_adapter.QSAdapter title=vectorbt.returns.qs_adapter.QSAdapter>QSAdapter</a>.</p> <p><code>**kwargs</code> are passed to the adapter constructor.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_returns_acc>get_returns_acc <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4427-L4454 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_returns_acc title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_returns_acc</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>defaults</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get returns accessor of type <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor title=vectorbt.returns.accessors.ReturnsAccessor>ReturnsAccessor</a>.</p> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>You can find most methods of this accessor as (cacheable) attributes of this portfolio.</p> </div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.get_trades>get_trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4102-L4109 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.get_trades title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>get_trades</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Get trade/position records depending upon <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.trades_type title=vectorbt.portfolio.base.Portfolio.trades_type>Portfolio.trades_type</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.gross_exposure>gross_exposure <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4296-L4303 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.gross_exposure title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>gross_exposure</span><span class=p>(</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get gross exposure.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.indexing_func>indexing_func <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L1573-L1596 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.indexing_func title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>indexing_func</span><span class=p>(</span>
    <span class=n>pd_indexing_func</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Perform indexing on <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.information_ratio>information_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.information_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>information_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.information_ratio title=vectorbt.returns.accessors.ReturnsAccessor.information_ratio>ReturnsAccessor.information_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.init_cash>init_cash <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.init_cash title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_init_cash title=vectorbt.portfolio.base.Portfolio.get_init_cash>Portfolio.get_init_cash()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.log_records>log_records <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4044-L4047 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.log_records title="Permanent link">&para;</a></h3> <p>A structured NumPy array of log records.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.logs>logs <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.logs title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_logs title=vectorbt.portfolio.base.Portfolio.get_logs>Portfolio.get_logs()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.max_drawdown>max_drawdown <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.max_drawdown title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>max_drawdown</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.max_drawdown title=vectorbt.returns.accessors.ReturnsAccessor.max_drawdown>ReturnsAccessor.max_drawdown()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.metrics>metrics <span class=dobjtype>class variable</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.metrics title="Permanent link">&para;</a></h3> <p>Metrics supported by <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>.</p> <div class=highlight><pre><span></span><code><span class=err>Co</span><span class=kc>nf</span><span class=err>ig(</span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Start&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d4902c0&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;agg_func&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;wrapper&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;end&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;End&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490360&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;agg_func&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;wrapper&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;period&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Period&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490400&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;apply_to_timedelta&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;agg_func&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;wrapper&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;start_value&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Start Value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;get_init_cash&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;portfolio&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;end_value&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;End Value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;final_value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;portfolio&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;total_return&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Total Return [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;total_return&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d4904a0&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;portfolio&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;benchmark_return&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Benchmark Return [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;benchmark_rets.vbt.returns.total&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490540&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;portfolio&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;max_gross_exposure&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Max Gross Exposure [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;gross_exposure.vbt.max&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d4905e0&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;portfolio&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;total_fees_paid&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Total Fees Paid&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;orders.fees.sum&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;orders&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;max_dd&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Max Drawdown [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;drawdowns.max_drawdown&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490680&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;drawdowns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;max_dd_duration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Max Drawdown Duration&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;drawdowns.max_duration&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;fill_wrap_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;drawdowns&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;duration&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;total_trades&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Total Trades&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.count&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;incl_open&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;trades&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;total_closed_trades&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Total Closed Trades&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.closed.count&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;trades&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;closed&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;total_open_trades&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Total Open Trades&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.open.count&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;incl_open&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;trades&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;open&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;open_trade_pnl&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Open Trade PnL&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.open.pnl.sum&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;incl_open&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;trades&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;open&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;win_rate&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Win Rate [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.win_rate&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490720&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;best_trade&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Best Trade [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.returns.max&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d4907c0&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;worst_trade&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Worst Trade [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.returns.min&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490860&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;avg_winning_trade&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Avg Winning Trade [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.winning.returns.mean&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d490900&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags, &#39;winning&#39;]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;avg_losing_trade&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Avg Losing Trade [%]&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.losing.returns.mean&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;post_calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;function Portfolio.&lt;lambda&gt; at 0x12d4909a0&gt;&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags, &#39;losing&#39;]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;avg_winning_trade_duration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Avg Winning Trade Duration&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.winning.duration.mean&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;apply_to_timedelta&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags, &#39;winning&#39;, &#39;duration&#39;]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;avg_losing_trade_duration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Avg Losing Trade Duration&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.losing.duration.mean&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;apply_to_timedelta&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags, &#39;losing&#39;, &#39;duration&#39;]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;profit_factor&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Profit Factor&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.profit_factor&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;expectancy&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Expectancy&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.expectancy&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;RepEval(expression=\&quot;[&#39;portfolio&#39;, &#39;trades&#39;, *incl_open_tags]\&quot;, mapping={})&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;sharpe_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Sharpe Ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;returns_acc.sharpe_ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_year_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;returns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;calmar_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Calmar Ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;returns_acc.calmar_ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_year_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;returns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;omega_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Omega Ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;returns_acc.omega_ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_year_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;returns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;sortino_ratio&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Sortino Ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;calc_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;returns_acc.sortino_ratio&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;check_has_year_freq&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;returns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span><span class=err>)</span>
</code></pre></div> <p>Returns <code>Portfolio._metrics</code>, which gets (deep) copied upon creation of each instance. Thus, changing this config won't affect the class.</p> <p>To change metrics, you can either change the config in-place, override this property, or overwrite the instance variable <code>Portfolio._metrics</code>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.net_exposure>net_exposure <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4305-L4312 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.net_exposure title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>net_exposure</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get net exposure.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.omega_ratio>omega_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.omega_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>omega_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.omega_ratio title=vectorbt.returns.accessors.ReturnsAccessor.omega_ratio>ReturnsAccessor.omega_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.order_records>order_records <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4027-L4030 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.order_records title="Permanent link">&para;</a></h3> <p>A structured NumPy array of order records.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.orders>orders <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.orders title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_orders title=vectorbt.portfolio.base.Portfolio.get_orders>Portfolio.get_orders()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot>plot <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/generic/plots_builder.py#L79-L672 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>PlotsBuilderMixin</span><span class=o>.</span><span class=n>plots</span><span class=p>(</span>
    <span class=n>subplots</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>tags</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>template_mapping</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>filters</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>subplot_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>show_titles</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>hide_id_labels</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_id_labels</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>make_subplots_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>layout_kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_asset_flow>plot_asset_flow <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4816-L4861 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_asset_flow title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_asset_flow</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column of asset flow.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column to plot.</dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Direction</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Direction title=vectorbt.portfolio.enums.Direction>Direction</a>.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericAccessor.plot title=vectorbt.generic.accessors.GenericAccessor.plot>GenericAccessor.plot()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_asset_value>plot_asset_value <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5024-L5078 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_asset_value title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_asset_value</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of asset value.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Direction</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Direction title=vectorbt.portfolio.enums.Direction>Direction</a>.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericSRAccessor.plot_against title=vectorbt.generic.accessors.GenericSRAccessor.plot_against>GenericSRAccessor.plot_against()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_assets>plot_assets <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4912-L4964 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_assets title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_assets</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column of assets.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column to plot.</dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Direction</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Direction title=vectorbt.portfolio.enums.Direction>Direction</a>.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericSRAccessor.plot_against title=vectorbt.generic.accessors.GenericSRAccessor.plot_against>GenericSRAccessor.plot_against()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_cash>plot_cash <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4966-L5022 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_cash title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_cash</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>free</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of cash balance.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>free</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to plot the flow of the free cash.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericSRAccessor.plot_against title=vectorbt.generic.accessors.GenericSRAccessor.plot_against>GenericSRAccessor.plot_against()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_cash_flow>plot_cash_flow <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4863-L4910 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_cash_flow title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_cash_flow</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>free</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of cash flow.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>free</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to plot the flow of the free cash.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericAccessor.plot title=vectorbt.generic.accessors.GenericAccessor.plot>GenericAccessor.plot()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_cum_returns>plot_cum_returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5131-L5179 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_cum_returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_cum_returns</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of cumulative returns.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>benchmark_rets</code></strong> :&ensp;<code>array_like</code></dt> <dd> <p>Benchmark returns.</p> <p>If None, will use <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.benchmark_returns title=vectorbt.portfolio.base.Portfolio.benchmark_returns>Portfolio.benchmark_returns()</a>.</p> </dd> <dt><strong><code>use_asset_returns</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to plot asset returns.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsSRAccessor.plot_cumulative title=vectorbt.returns.accessors.ReturnsSRAccessor.plot_cumulative>ReturnsSRAccessor.plot_cumulative()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_drawdowns>plot_drawdowns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5181-L5203 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_drawdowns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_drawdowns</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of drawdowns.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/drawdowns/#vectorbt.generic.drawdowns.Drawdowns.plot title=vectorbt.generic.drawdowns.Drawdowns.plot>Drawdowns.plot()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_gross_exposure>plot_gross_exposure <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5256-L5310 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_gross_exposure title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_gross_exposure</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of gross exposure.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Direction</code></dt> <dd>See <a href=/api/portfolio/enums/#vectorbt.portfolio.enums.Direction title=vectorbt.portfolio.enums.Direction>Direction</a>.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericSRAccessor.plot_against title=vectorbt.generic.accessors.GenericSRAccessor.plot_against>GenericSRAccessor.plot_against()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_net_exposure>plot_net_exposure <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5312-L5364 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_net_exposure title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_net_exposure</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of net exposure.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericSRAccessor.plot_against title=vectorbt.generic.accessors.GenericSRAccessor.plot_against>GenericSRAccessor.plot_against()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_orders>plot_orders <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4793-L4796 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_orders title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_orders</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of orders.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_position_pnl>plot_position_pnl <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4812-L4814 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_position_pnl title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_position_pnl</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of position PnL.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_positions>plot_positions <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4807-L4810 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_positions title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_positions</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of positions.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_trade_pnl>plot_trade_pnl <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4803-L4805 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_trade_pnl title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_trade_pnl</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of trade PnL.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_trades>plot_trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4798-L4801 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_trades title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_trades</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of trades.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_underwater>plot_underwater <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5205-L5254 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_underwater title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_underwater</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of underwater.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericAccessor.plot title=vectorbt.generic.accessors.GenericAccessor.plot>GenericAccessor.plot()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plot_value>plot_value <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5080-L5129 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plot_value title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>plot_value</span><span class=p>(</span>
    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>xref</span><span class=o>=</span><span class=s1>&#39;x&#39;</span><span class=p>,</span>
    <span class=n>yref</span><span class=o>=</span><span class=s1>&#39;y&#39;</span><span class=p>,</span>
    <span class=n>hline_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Plot one column/group of value.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>str</code></dt> <dd>Name of the column/group to plot.</dd> <dt><strong><code>group_by</code></strong> :&ensp;<code>any</code></dt> <dd>Group or ungroup columns. See <a href=/api/base/column_grouper/#vectorbt.base.column_grouper.ColumnGrouper title=vectorbt.base.column_grouper.ColumnGrouper>ColumnGrouper</a>.</dd> <dt><strong><code>free</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to plot free cash flow.</dd> <dt><strong><code>xref</code></strong> :&ensp;<code>str</code></dt> <dd>X coordinate axis.</dd> <dt><strong><code>yref</code></strong> :&ensp;<code>str</code></dt> <dd>Y coordinate axis.</dd> <dt><strong><code>hline_shape_kwargs</code></strong> :&ensp;<code>dict</code></dt> <dd>Keyword arguments passed to <code>plotly.graph_objects.Figure.add_shape</code> for zeroline.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <a href=/api/generic/accessors/#vectorbt.generic.accessors.GenericSRAccessor.plot_against title=vectorbt.generic.accessors.GenericSRAccessor.plot_against>GenericSRAccessor.plot_against()</a>.</dd> </dl> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.plots_defaults>plots_defaults <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L5366-L5385 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.plots_defaults title="Permanent link">&para;</a></h3> <p>Defaults for <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.plot title=vectorbt.portfolio.base.Portfolio.plot>PlotsBuilderMixin.plots()</a>.</p> <p>Merges <a href=/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots_defaults title=vectorbt.generic.plots_builder.PlotsBuilderMixin.plots_defaults>PlotsBuilderMixin.plots_defaults</a> and <code>portfolio.plots</code> from <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.position_coverage>position_coverage <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4172-L4185 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.position_coverage title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>position_coverage</span><span class=p>(</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get position coverage per column/group.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.position_mask>position_mask <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4156-L4170 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.position_mask title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>position_mask</span><span class=p>(</span>
    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;both&#39;</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get position mask per column/group.</p> <p>An element is True if the asset is in the market at this tick.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.positions>positions <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.positions title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_positions title=vectorbt.portfolio.base.Portfolio.get_positions>Portfolio.get_positions()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.post_resolve_attr>post_resolve_attr <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4555-L4565 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.post_resolve_attr title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>post_resolve_attr</span><span class=p>(</span>
    <span class=n>attr</span><span class=p>,</span>
    <span class=n>out</span><span class=p>,</span>
    <span class=n>final_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Post-process an object after resolution.</p> <p>Uses the following keys:</p> <ul> <li><code>incl_open</code>: Whether to include open trades/positions when resolving an argument that is an instance of <a href=/api/portfolio/trades/#vectorbt.portfolio.trades.Trades title=vectorbt.portfolio.trades.Trades>Trades</a>.</li> </ul> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.pre_resolve_attr>pre_resolve_attr <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4532-L4553 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.pre_resolve_attr title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>pre_resolve_attr</span><span class=p>(</span>
    <span class=n>attr</span><span class=p>,</span>
    <span class=n>final_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Pre-process an attribute before resolution.</p> <p>Uses the following keys:</p> <ul> <li><code>use_asset_returns</code>: Whether to use <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.asset_returns title=vectorbt.portfolio.base.Portfolio.asset_returns>Portfolio.asset_returns()</a> when resolving <code>returns</code> argument.</li> <li><code>trades_type</code>: Which trade type to use when resolving <code>trades</code> argument.</li> </ul> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.qs>qs <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.qs title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_qs title=vectorbt.portfolio.base.Portfolio.get_qs>Portfolio.get_qs()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.regroup>regroup <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L3978-L3988 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.regroup title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>regroup</span><span class=p>(</span>
    <span class=n>group_by</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Regroup this object.</p> <p>See <a href=/api/base/array_wrapper/#vectorbt.base.array_wrapper.Wrapping.regroup title=vectorbt.base.array_wrapper.Wrapping.regroup>Wrapping.regroup()</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>All cached objects will be lost.</p> </div> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.returns>returns <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4389-L4406 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.returns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>returns</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_sim_order</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get return series per column/group based on portfolio value.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.returns_acc>returns_acc <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4422-L4425 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.returns_acc title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_returns_acc title=vectorbt.portfolio.base.Portfolio.get_returns_acc>Portfolio.get_returns_acc()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.returns_stats>returns_stats <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4767-L4789 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.returns_stats title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>returns_stats</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>defaults</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>Compute various statistics on returns of this portfolio.</p> <p>See <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.returns_acc title=vectorbt.portfolio.base.Portfolio.returns_acc>Portfolio.returns_acc</a> and <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.metrics title=vectorbt.returns.accessors.ReturnsAccessor.metrics>ReturnsAccessor.metrics</a>.</p> <p><code>kwargs</code> will be passed to <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.returns.accessors.ReturnsAccessor.stats>StatsBuilderMixin.stats()</a> method. If <code>benchmark_rets</code> is not set, uses <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.benchmark_returns title=vectorbt.portfolio.base.Portfolio.benchmark_returns>Portfolio.benchmark_returns()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.sharpe_ratio>sharpe_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.sharpe_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>sharpe_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.sharpe_ratio title=vectorbt.returns.accessors.ReturnsAccessor.sharpe_ratio>ReturnsAccessor.sharpe_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.sortino_ratio>sortino_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.sortino_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>sortino_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.sortino_ratio title=vectorbt.returns.accessors.ReturnsAccessor.sortino_ratio>ReturnsAccessor.sortino_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.stats_defaults>stats_defaults <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4569-L4588 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.stats_defaults title="Permanent link">&para;</a></h3> <p>Defaults for <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats title=vectorbt.portfolio.base.Portfolio.stats>StatsBuilderMixin.stats()</a>.</p> <p>Merges <a href=/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats_defaults title=vectorbt.generic.stats_builder.StatsBuilderMixin.stats_defaults>StatsBuilderMixin.stats_defaults</a> and <code>portfolio.stats</code> from <a href=/api/_settings/#vectorbt._settings.settings title=vectorbt._settings.settings>settings</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.subplots>subplots <span class=dobjtype>class variable</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.subplots title="Permanent link">&para;</a></h3> <p>Subplots supported by <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>.</p> <div class=highlight><pre><span></span><code><span class=err>Co</span><span class=kc>nf</span><span class=err>ig(</span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;orders&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Orders&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Price&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;check_is_not_grouped&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;orders.plot&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;orders&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;trades&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Trades&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Price&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;check_is_not_grouped&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.plot&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;trades&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;trade_pnl&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Trade PnL&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Trade PnL&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;check_is_not_grouped&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;trades.plot_pnl&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;trades&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;asset_flow&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Asset Flow&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Asset flow&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;check_is_not_grouped&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_asset_flow&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;assets&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;cash_flow&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cash Flow&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cash flow&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_cash_flow&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;cash&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;assets&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Assets&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Assets&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;check_is_not_grouped&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_assets&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;assets&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;cash&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cash&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cash&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_cash&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;cash&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;asset_value&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Asset Value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Asset value&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_asset_value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;assets&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;value&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;value&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Value&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_value&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;value&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;cum_returns&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cumulative Returns&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cumulative returns&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_cum_returns&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_hline_shape_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_xref&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_yref&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;returns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;drawdowns&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Drawdowns&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Value&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_drawdowns&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_xref&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_yref&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;value&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;drawdowns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;underwater&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Underwater&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Drawdown&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_underwater&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;value&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;drawdowns&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;gross_exposure&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Gross Exposure&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Gross exposure&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_gross_exposure&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;exposure&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;net_exposure&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Net Exposure&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;yaxis_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Net exposure&quot;</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>        </span><span class=nt>&quot;plot_func&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;plot_net_exposure&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;pass_add_trace_kwargs&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=s2>&quot;portfolio&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=s2>&quot;exposure&quot;</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span><span class=err>)</span>
</code></pre></div> <p>Returns <code>Portfolio._subplots</code>, which gets (deep) copied upon creation of each instance. Thus, changing this config won't affect the class.</p> <p>To change subplots, you can either change the config in-place, override this property, or overwrite the instance variable <code>Portfolio._subplots</code>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.tail_ratio>tail_ratio <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.tail_ratio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>tail_ratio</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.tail_ratio title=vectorbt.returns.accessors.ReturnsAccessor.tail_ratio>ReturnsAccessor.tail_ratio()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.total_benchmark_return>total_benchmark_return <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4516-L4523 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.total_benchmark_return title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>total_benchmark_return</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get total benchmark return.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.total_profit>total_profit <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4342-L4367 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.total_profit title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>total_profit</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get total profit per column/group.</p> <p>Calculated directly from order records (fast).</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.total_return>total_return <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4379-L4387 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.total_return title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>total_return</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get total profit per column/group.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.trades>trades <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/utils/decorators.py#L325-L339 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.trades title="Permanent link">&para;</a></h3> <p><a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio.get_trades title=vectorbt.portfolio.base.Portfolio.get_trades>Portfolio.get_trades()</a> with default arguments.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.trades_type>trades_type <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4007-L4010 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.trades_type title="Permanent link">&para;</a></h3> <p>Default <a href=/api/portfolio/trades/#vectorbt.portfolio.trades.Trades title=vectorbt.portfolio.trades.Trades>Trades</a> to use across <a href=/api/portfolio/base/#vectorbt.portfolio.base.Portfolio title=vectorbt.portfolio.base.Portfolio>Portfolio</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.up_capture>up_capture <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.up_capture title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>up_capture</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.up_capture title=vectorbt.returns.accessors.ReturnsAccessor.up_capture>ReturnsAccessor.up_capture()</a>.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.value>value <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/base.py#L4314-L4340 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.value title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>value</span><span class=p>(</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>in_sim_order</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Get portfolio value series per column/group.</p> <p>By default, will generate portfolio value for each asset based on cash flows and thus independent from other assets, with the initial cash balance and position being that of the entire group. Useful for generating returns and comparing assets within the same group.</p> <p>When <code>group_by</code> is False and <code>in_sim_order</code> is True, returns value generated in simulation order (see <a href=https://en.wikipedia.org/wiki/Row-_and_column-major_order>row-major order</a>. This value cannot be used for generating returns as-is. Useful to analyze how value evolved throughout simulation.</p> <hr> <h3 id=vectorbt.portfolio.base.Portfolio.value_at_risk>value_at_risk <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/portfolio/decorators.py#L32-L48 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.portfolio.base.Portfolio.value_at_risk title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=n>Portfolio</span><span class=o>.</span><span class=n>value_at_risk</span><span class=p>(</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>group_by</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>benchmark_rets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>use_asset_returns</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>See <a href=/api/returns/accessors/#vectorbt.returns.accessors.ReturnsAccessor.value_at_risk title=vectorbt.returns.accessors.ReturnsAccessor.value_at_risk>ReturnsAccessor.value_at_risk()</a>.</p> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/polakowo title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg> </span> </a> <hr> </footer> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Oleg Polakow. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.instant", "search.suggest", "search.share"], "search": "../../../assets/javascripts/workers/search.f2da59ea.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.65061dd4.min.js></script> <script src=../../../assets/javascripts/extra.js></script> </body> </html>