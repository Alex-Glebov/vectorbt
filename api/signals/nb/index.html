<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Numba-compiled functions"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.dev/api/signals/nb/ rel=canonical><link href=../generators/ rel=prev><link href=../../utils/ rel=next><link rel=icon href=/assets/logo/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.2+insiders-4.42.0"><title>nb - vectorbt</title><link rel=stylesheet href=../../../assets/stylesheets/main.f2778614.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.46987102.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4QLCS0J048"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4QLCS0J048",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4QLCS0J048",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:title content=nb><meta property=og:type content=website><meta content=https://vectorbt.dev/api/signals/nb/ property=og:url><meta property=og:image:url content=/assets/logo/social-512x512.png><meta property=og:image:type content=image/png><meta property=og:description content="Numba-compiled functions"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/assets/logo/favicon-16x16.png><link rel=manifest href=/assets/logo/site.webmanifest><link rel=mask-icon href=/assets/logo/safari-pinned-tab.svg color=#1e2029><link rel="shortcut icon" href=/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e2029><meta name=msapplication-config content=/assets/logo/browserconfig.xml><meta name=theme-color content=#1e2029></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#vectorbt.signals.nb class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Get access to <a href=https://vectorbt.pro/ style="color: #ff6e42; text-decoration: underline;">vectorbt PRO</a> and join our quant army! </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=vectorbt class="md-header__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> vectorbt </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> nb </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=../../../documentation/ class=md-tabs__link> Documentation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../../terms/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=vectorbt class="md-nav__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> vectorbt </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../.. class="md-nav__link "> <span class=md-ellipsis> Getting started </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/features/ class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/usage/ class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/resources/ class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> API </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../_settings/ class=md-nav__link> <span class=md-ellipsis> _settings </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../base/ class="md-nav__link "> <span class=md-ellipsis> base </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../base/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../base/array_wrapper/ class=md-nav__link> <span class=md-ellipsis> array_wrapper </span> </a> </li> <li class=md-nav__item> <a href=../../base/column_grouper/ class=md-nav__link> <span class=md-ellipsis> column_grouper </span> </a> </li> <li class=md-nav__item> <a href=../../base/combine_fns/ class=md-nav__link> <span class=md-ellipsis> combine_fns </span> </a> </li> <li class=md-nav__item> <a href=../../base/index_fns/ class=md-nav__link> <span class=md-ellipsis> index_fns </span> </a> </li> <li class=md-nav__item> <a href=../../base/indexing/ class=md-nav__link> <span class=md-ellipsis> indexing </span> </a> </li> <li class=md-nav__item> <a href=../../base/reshape_fns/ class=md-nav__link> <span class=md-ellipsis> reshape_fns </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__container"> <a href=../../data/ class="md-nav__link "> <span class=md-ellipsis> data </span> </a> <label class="md-nav__link " for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../data/custom/ class=md-nav__link> <span class=md-ellipsis> custom </span> </a> </li> <li class=md-nav__item> <a href=../../data/updater/ class=md-nav__link> <span class=md-ellipsis> updater </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <div class="md-nav__link md-nav__container"> <a href=../../generic/ class="md-nav__link "> <span class=md-ellipsis> generic </span> </a> <label class="md-nav__link " for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> generic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../generic/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../generic/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../generic/drawdowns/ class=md-nav__link> <span class=md-ellipsis> drawdowns </span> </a> </li> <li class=md-nav__item> <a href=../../generic/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../generic/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../generic/plots_builder/ class=md-nav__link> <span class=md-ellipsis> plots_builder </span> </a> </li> <li class=md-nav__item> <a href=../../generic/plotting/ class=md-nav__link> <span class=md-ellipsis> plotting </span> </a> </li> <li class=md-nav__item> <a href=../../generic/ranges/ class=md-nav__link> <span class=md-ellipsis> ranges </span> </a> </li> <li class=md-nav__item> <a href=../../generic/splitters/ class=md-nav__link> <span class=md-ellipsis> splitters </span> </a> </li> <li class=md-nav__item> <a href=../../generic/stats_builder/ class=md-nav__link> <span class=md-ellipsis> stats_builder </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <div class="md-nav__link md-nav__container"> <a href=../../indicators/ class="md-nav__link "> <span class=md-ellipsis> indicators </span> </a> <label class="md-nav__link " for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> indicators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../indicators/basic/ class=md-nav__link> <span class=md-ellipsis> basic </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/configs/ class=md-nav__link> <span class=md-ellipsis> configs </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/factory/ class=md-nav__link> <span class=md-ellipsis> factory </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <div class="md-nav__link md-nav__container"> <a href=../../labels/ class="md-nav__link "> <span class=md-ellipsis> labels </span> </a> <label class="md-nav__link " for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> labels </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../labels/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../labels/generators/ class=md-nav__link> <span class=md-ellipsis> generators </span> </a> </li> <li class=md-nav__item> <a href=../../labels/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <div class="md-nav__link md-nav__container"> <a href=../../messaging/ class="md-nav__link "> <span class=md-ellipsis> messaging </span> </a> <label class="md-nav__link " for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> messaging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../messaging/telegram/ class=md-nav__link> <span class=md-ellipsis> telegram </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ohlcv_accessors/ class=md-nav__link> <span class=md-ellipsis> ohlcv_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10> <div class="md-nav__link md-nav__container"> <a href=../../portfolio/ class="md-nav__link "> <span class=md-ellipsis> portfolio </span> </a> <label class="md-nav__link " for=__nav_3_10 id=__nav_3_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> portfolio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../portfolio/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/logs/ class=md-nav__link> <span class=md-ellipsis> logs </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/orders/ class=md-nav__link> <span class=md-ellipsis> orders </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/trades/ class=md-nav__link> <span class=md-ellipsis> trades </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../px_accessors/ class=md-nav__link> <span class=md-ellipsis> px_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__container"> <a href=../../records/ class="md-nav__link "> <span class=md-ellipsis> records </span> </a> <label class="md-nav__link " for=__nav_3_12 id=__nav_3_12_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../records/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../records/col_mapper/ class=md-nav__link> <span class=md-ellipsis> col_mapper </span> </a> </li> <li class=md-nav__item> <a href=../../records/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../records/mapped_array/ class=md-nav__link> <span class=md-ellipsis> mapped_array </span> </a> </li> <li class=md-nav__item> <a href=../../records/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__container"> <a href=../../returns/ class="md-nav__link "> <span class=md-ellipsis> returns </span> </a> <label class="md-nav__link " for=__nav_3_13 id=__nav_3_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_13_label aria-expanded=false> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> returns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../returns/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../returns/metrics/ class=md-nav__link> <span class=md-ellipsis> metrics </span> </a> </li> <li class=md-nav__item> <a href=../../returns/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../returns/qs_adapter/ class=md-nav__link> <span class=md-ellipsis> qs_adapter </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../root_accessors/ class=md-nav__link> <span class=md-ellipsis> root_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_15 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> signals </span> </a> <label class="md-nav__link " for=__nav_3_15 id=__nav_3_15_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_15_label aria-expanded=true> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> signals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../factory/ class=md-nav__link> <span class=md-ellipsis> factory </span> </a> </li> <li class=md-nav__item> <a href=../generators/ class=md-nav__link> <span class=md-ellipsis> generators </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> nb </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> nb </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vectorbt.signals.nb.between_partition_ranges_nb class=md-nav__link> <span class=md-ellipsis> between_partition_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.between_ranges_nb class=md-nav__link> <span class=md-ellipsis> between_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.between_two_ranges_nb class=md-nav__link> <span class=md-ellipsis> between_two_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.clean_enex_1d_nb class=md-nav__link> <span class=md-ellipsis> clean_enex_1d_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.clean_enex_nb class=md-nav__link> <span class=md-ellipsis> clean_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.first_choice_nb class=md-nav__link> <span class=md-ellipsis> first_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_nb class=md-nav__link> <span class=md-ellipsis> generate_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_ohlc_stop_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_ohlc_stop_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_ohlc_stop_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_ohlc_stop_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_by_prob_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_by_prob_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_enex_by_prob_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_enex_by_prob_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_ex_by_prob_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_ex_by_prob_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_stop_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_stop_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_stop_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_stop_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.norm_avg_index_1d_nb class=md-nav__link> <span class=md-ellipsis> norm_avg_index_1d_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.norm_avg_index_nb class=md-nav__link> <span class=md-ellipsis> norm_avg_index_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.nth_index_1d_nb class=md-nav__link> <span class=md-ellipsis> nth_index_1d_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.nth_index_nb class=md-nav__link> <span class=md-ellipsis> nth_index_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.ohlc_stop_choice_nb class=md-nav__link> <span class=md-ellipsis> ohlc_stop_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.part_pos_rank_nb class=md-nav__link> <span class=md-ellipsis> part_pos_rank_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.partition_ranges_nb class=md-nav__link> <span class=md-ellipsis> partition_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rand_by_prob_choice_nb class=md-nav__link> <span class=md-ellipsis> rand_by_prob_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rand_choice_nb class=md-nav__link> <span class=md-ellipsis> rand_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rand_enex_apply_nb class=md-nav__link> <span class=md-ellipsis> rand_enex_apply_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rank_nb class=md-nav__link> <span class=md-ellipsis> rank_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.sig_pos_rank_nb class=md-nav__link> <span class=md-ellipsis> sig_pos_rank_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.stop_choice_nb class=md-nav__link> <span class=md-ellipsis> stop_choice_nb() </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_16> <div class="md-nav__link md-nav__container"> <a href=../../utils/ class="md-nav__link "> <span class=md-ellipsis> utils </span> </a> <label class="md-nav__link " for=__nav_3_16 id=__nav_3_16_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_16_label aria-expanded=false> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> utils </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../utils/array_/ class=md-nav__link> <span class=md-ellipsis> array_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/attr_/ class=md-nav__link> <span class=md-ellipsis> attr_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/checks/ class=md-nav__link> <span class=md-ellipsis> checks </span> </a> </li> <li class=md-nav__item> <a href=../../utils/colors/ class=md-nav__link> <span class=md-ellipsis> colors </span> </a> </li> <li class=md-nav__item> <a href=../../utils/config/ class=md-nav__link> <span class=md-ellipsis> config </span> </a> </li> <li class=md-nav__item> <a href=../../utils/datetime_/ class=md-nav__link> <span class=md-ellipsis> datetime_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../utils/docs/ class=md-nav__link> <span class=md-ellipsis> docs </span> </a> </li> <li class=md-nav__item> <a href=../../utils/enum_/ class=md-nav__link> <span class=md-ellipsis> enum_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/figure/ class=md-nav__link> <span class=md-ellipsis> figure </span> </a> </li> <li class=md-nav__item> <a href=../../utils/image_/ class=md-nav__link> <span class=md-ellipsis> image_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/mapping/ class=md-nav__link> <span class=md-ellipsis> mapping </span> </a> </li> <li class=md-nav__item> <a href=../../utils/math_/ class=md-nav__link> <span class=md-ellipsis> math_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/module_/ class=md-nav__link> <span class=md-ellipsis> module_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/params/ class=md-nav__link> <span class=md-ellipsis> params </span> </a> </li> <li class=md-nav__item> <a href=../../utils/random_/ class=md-nav__link> <span class=md-ellipsis> random_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/requests_/ class=md-nav__link> <span class=md-ellipsis> requests_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/schedule_/ class=md-nav__link> <span class=md-ellipsis> schedule_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/tags/ class=md-nav__link> <span class=md-ellipsis> tags </span> </a> </li> <li class=md-nav__item> <a href=../../utils/template/ class=md-nav__link> <span class=md-ellipsis> template </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../terms/ class="md-nav__link "> <span class=md-ellipsis> Terms </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Terms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../terms/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vectorbt.signals.nb.between_partition_ranges_nb class=md-nav__link> <span class=md-ellipsis> between_partition_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.between_ranges_nb class=md-nav__link> <span class=md-ellipsis> between_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.between_two_ranges_nb class=md-nav__link> <span class=md-ellipsis> between_two_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.clean_enex_1d_nb class=md-nav__link> <span class=md-ellipsis> clean_enex_1d_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.clean_enex_nb class=md-nav__link> <span class=md-ellipsis> clean_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.first_choice_nb class=md-nav__link> <span class=md-ellipsis> first_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_nb class=md-nav__link> <span class=md-ellipsis> generate_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_ohlc_stop_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_ohlc_stop_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_ohlc_stop_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_ohlc_stop_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_by_prob_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_by_prob_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_enex_by_prob_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_enex_by_prob_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_ex_by_prob_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_ex_by_prob_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_rand_nb class=md-nav__link> <span class=md-ellipsis> generate_rand_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_stop_enex_nb class=md-nav__link> <span class=md-ellipsis> generate_stop_enex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.generate_stop_ex_nb class=md-nav__link> <span class=md-ellipsis> generate_stop_ex_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.norm_avg_index_1d_nb class=md-nav__link> <span class=md-ellipsis> norm_avg_index_1d_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.norm_avg_index_nb class=md-nav__link> <span class=md-ellipsis> norm_avg_index_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.nth_index_1d_nb class=md-nav__link> <span class=md-ellipsis> nth_index_1d_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.nth_index_nb class=md-nav__link> <span class=md-ellipsis> nth_index_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.ohlc_stop_choice_nb class=md-nav__link> <span class=md-ellipsis> ohlc_stop_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.part_pos_rank_nb class=md-nav__link> <span class=md-ellipsis> part_pos_rank_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.partition_ranges_nb class=md-nav__link> <span class=md-ellipsis> partition_ranges_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rand_by_prob_choice_nb class=md-nav__link> <span class=md-ellipsis> rand_by_prob_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rand_choice_nb class=md-nav__link> <span class=md-ellipsis> rand_choice_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rand_enex_apply_nb class=md-nav__link> <span class=md-ellipsis> rand_enex_apply_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.rank_nb class=md-nav__link> <span class=md-ellipsis> rank_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.sig_pos_rank_nb class=md-nav__link> <span class=md-ellipsis> sig_pos_rank_nb() </span> </a> </li> <li class=md-nav__item> <a href=#vectorbt.signals.nb.stop_choice_nb class=md-nav__link> <span class=md-ellipsis> stop_choice_nb() </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=vectorbt.signals.nb>nb <span class=dobjtype>module</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb title="Permanent link">&para;</a></h1> <p>Numba-compiled functions.</p> <p>Provides an arsenal of Numba-compiled functions that are used by accessors and in many other parts of the backtesting pipeline, such as technical indicators. These only accept NumPy arrays and other Numba-compatible types.</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>vectorbt</span> <span class=k>as</span> <span class=nn>vbt</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># vectorbt.signals.nb.pos_rank_nb</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>signals</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>pos_rank_nb</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>])[:,</span> <span class=kc>None</span><span class=p>])[:,</span> <span class=mi>0</span><span class=p>]</span>
<span class=go>[-1  0  1  2 -1]</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>vectorbt treats matrices as first-class citizens and expects input arrays to be 2-dim, unless function has suffix <code>_1d</code> or is meant to be input to another function. Data is processed along index (axis 0).</p> <p>All functions passed as argument should be Numba-compiled.</p> <p>Returned indices should be absolute.</p> </div> <hr> <h2 id=vectorbt.signals.nb.between_partition_ranges_nb>between_partition_ranges_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1133-L1156 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.between_partition_ranges_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>between_partition_ranges_nb</span><span class=p>(</span>
    <span class=n>a</span>
<span class=p>)</span>
</code></pre></div> <p>Create a record of type <a href=/api/generic/enums/#vectorbt.generic.enums.range_dt title=vectorbt.generic.enums.range_dt>range_dt</a> for each range between two partitions in <code>a</code>.</p> <hr> <h2 id=vectorbt.signals.nb.between_ranges_nb>between_ranges_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1035-L1053 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.between_ranges_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>between_ranges_nb</span><span class=p>(</span>
    <span class=n>a</span>
<span class=p>)</span>
</code></pre></div> <p>Create a record of type <a href=/api/generic/enums/#vectorbt.generic.enums.range_dt title=vectorbt.generic.enums.range_dt>range_dt</a> for each range between two signals in <code>a</code>.</p> <hr> <h2 id=vectorbt.signals.nb.between_two_ranges_nb>between_two_ranges_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1056-L1095 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.between_two_ranges_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>between_two_ranges_nb</span><span class=p>(</span>
    <span class=n>a</span><span class=p>,</span>
    <span class=n>b</span><span class=p>,</span>
    <span class=n>from_other</span><span class=o>=</span><span class=kc>False</span>
<span class=p>)</span>
</code></pre></div> <p>Create a record of type <a href=/api/generic/enums/#vectorbt.generic.enums.range_dt title=vectorbt.generic.enums.range_dt>range_dt</a> for each range between two signals in <code>a</code> and <code>b</code>.</p> <p>If <code>from_other</code> is False, returns ranges from each in <code>a</code> to the succeeding in <code>b</code>. Otherwise, returns ranges from each in <code>b</code> to the preceding in <code>a</code>.</p> <p>When <code>a</code> and <code>b</code> overlap (two signals at the same time), the distance between overlapping signals is still considered and <code>from_i</code> would match <code>to_i</code>.</p> <hr> <h2 id=vectorbt.signals.nb.clean_enex_1d_nb>clean_enex_1d_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L255-L278 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.clean_enex_1d_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>clean_enex_1d_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>exits</span><span class=p>,</span>
    <span class=n>entry_first</span>
<span class=p>)</span>
</code></pre></div> <p>Clean entry and exit arrays by picking the first signal out of each.</p> <p>Entry signal must be picked first. If both signals are present, selects none.</p> <hr> <h2 id=vectorbt.signals.nb.clean_enex_nb>clean_enex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L281-L291 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.clean_enex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>clean_enex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>exits</span><span class=p>,</span>
    <span class=n>entry_first</span>
<span class=p>)</span>
</code></pre></div> <p>2-dim version of <a href=/api/signals/nb/#vectorbt.signals.nb.clean_enex_1d_nb title=vectorbt.signals.nb.clean_enex_1d_nb>clean_enex_1d_nb()</a>.</p> <hr> <h2 id=vectorbt.signals.nb.first_choice_nb>first_choice_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L554-L562 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.first_choice_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>first_choice_nb</span><span class=p>(</span>
    <span class=n>from_i</span><span class=p>,</span>
    <span class=n>to_i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=n>a</span>
<span class=p>)</span>
</code></pre></div> <p><code>choice_func_nb</code> that returns the index of the first signal in <code>a</code>.</p> <hr> <h2 id=vectorbt.signals.nb.generate_enex_nb>generate_enex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L157-L249 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_enex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_enex_nb</span><span class=p>(</span>
    <span class=n>shape</span><span class=p>,</span>
    <span class=n>entry_wait</span><span class=p>,</span>
    <span class=n>exit_wait</span><span class=p>,</span>
    <span class=n>entry_pick_first</span><span class=p>,</span>
    <span class=n>exit_pick_first</span><span class=p>,</span>
    <span class=n>entry_choice_func_nb</span><span class=p>,</span>
    <span class=n>entry_args</span><span class=p>,</span>
    <span class=n>exit_choice_func_nb</span><span class=p>,</span>
    <span class=n>exit_args</span>
<span class=p>)</span>
</code></pre></div> <p>Pick entry signals using <code>entry_choice_func_nb</code> and exit signals using <code>exit_choice_func_nb</code> one after another.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>shape</code></strong> :&ensp;<code>array</code></dt> <dd>Target shape.</dd> <dt><strong><code>entry_wait</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Number of ticks to wait before placing entries.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Setting <code>entry_wait</code> to 0 or False assumes that both entry and exit can be processed within the same bar, and exit can be processed before entry.</p> </div> </dd> <dt><strong><code>exit_wait</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Number of ticks to wait before placing exits.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Setting <code>exit_wait</code> to 0 or False assumes that both entry and exit can be processed within the same bar, and entry can be processed before exit.</p> </div> </dd> <dt><strong><code>entry_pick_first</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pick the first entry out of all returned by <code>entry_choice_func_nb</code>.</dd> <dt><strong><code>exit_pick_first</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to pick the first exit out of all returned by <code>exit_choice_func_nb</code>.</p> <p>Setting it to False acts similarly to setting <code>skip_until_exit</code> to True in <a href=/api/signals/nb/#vectorbt.signals.nb.generate_ex_nb title=vectorbt.signals.nb.generate_ex_nb>generate_ex_nb()</a>.</p> </dd> <dt><strong><code>entry_choice_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Entry choice function.</p> <p>See <code>choice_func_nb</code> in <a href=/api/signals/nb/#vectorbt.signals.nb.generate_nb title=vectorbt.signals.nb.generate_nb>generate_nb()</a>.</p> </dd> <dt><strong><code>entry_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Arguments unpacked and passed to <code>entry_choice_func_nb</code>.</dd> <dt><strong><code>exit_choice_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Exit choice function.</p> <p>See <code>choice_func_nb</code> in <a href=/api/signals/nb/#vectorbt.signals.nb.generate_nb title=vectorbt.signals.nb.generate_nb>generate_nb()</a>.</p> </dd> <dt><strong><code>exit_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Arguments unpacked and passed to <code>exit_choice_func_nb</code>.</dd> </dl> <hr> <h2 id=vectorbt.signals.nb.generate_ex_nb>generate_ex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L93-L154 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_ex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_ex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>until_next</span><span class=p>,</span>
    <span class=n>skip_until_exit</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>exit_choice_func_nb</span><span class=p>,</span>
    <span class=o>*</span><span class=n>args</span>
<span class=p>)</span>
</code></pre></div> <p>Pick exit signals using <code>exit_choice_func_nb</code> after each signal in <code>entries</code>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>entries</code></strong> :&ensp;<code>array</code></dt> <dd>Boolean array with entry signals.</dd> <dt><strong><code>wait</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Number of ticks to wait before placing exits.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Setting <code>wait</code> to 0 or False may result in two signals at one bar.</p> </div> </dd> <dt><strong><code>until_next</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Whether to place signals up to the next entry signal.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Setting it to False makes it difficult to tell which exit belongs to which entry.</p> </div> </dd> <dt><strong><code>skip_until_exit</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to skip processing entry signals until the next exit.</p> <p>Has only effect when <code>until_next</code> is disabled.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Setting it to True makes it difficult to tell which exit belongs to which entry.</p> </div> </dd> <dt><strong><code>pick_first</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pick the first signal out of all returned by <code>exit_choice_func_nb</code>.</dd> <dt><strong><code>exit_choice_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Exit choice function.</p> <p>See <code>choice_func_nb</code> in <a href=/api/signals/nb/#vectorbt.signals.nb.generate_nb title=vectorbt.signals.nb.generate_nb>generate_nb()</a>.</p> </dd> <dt><strong><code>*args</code></strong> :&ensp;<code>callable</code></dt> <dd>Arguments passed to <code>exit_choice_func_nb</code>.</dd> </dl> <hr> <h2 id=vectorbt.signals.nb.generate_nb>generate_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L41-L90 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_nb</span><span class=p>(</span>
    <span class=n>shape</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>choice_func_nb</span><span class=p>,</span>
    <span class=o>*</span><span class=n>args</span>
<span class=p>)</span>
</code></pre></div> <p>Create a boolean matrix of <code>shape</code> and pick signals using <code>choice_func_nb</code>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>shape</code></strong> :&ensp;<code>array</code></dt> <dd>Target shape.</dd> <dt><strong><code>pick_first</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to pick the first signal out of all returned by <code>choice_func_nb</code>.</dd> <dt><strong><code>choice_func_nb</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Choice function.</p> <p><code>choice_func_nb</code> should accept index of the start of the range <code>from_i</code>, index of the end of the range <code>to_i</code>, index of the column <code>col</code>, and <code>*args</code>. It should return an array of indices from <code>[from_i, to_i)</code> (can be empty).</p> </dd> <dt><strong><code>*args</code></strong></dt> <dd>Arguments passed to <code>choice_func_nb</code>.</dd> </dl> <p><strong>Usage</strong></p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.signals.nb</span> <span class=kn>import</span> <span class=n>generate_nb</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>choice_func_nb</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>from_i</span> <span class=o>+</span> <span class=n>col</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>generate_nb</span><span class=p>((</span><span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span> <span class=n>choice_func_nb</span><span class=p>)</span>
<span class=go>[[ True False False]</span>
<span class=go> [False  True False]</span>
<span class=go> [False False  True]</span>
<span class=go> [False False False]</span>
<span class=go> [False False False]]</span>
</code></pre></div> <hr> <h2 id=vectorbt.signals.nb.generate_ohlc_stop_enex_nb>generate_ohlc_stop_enex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L980-L1029 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_ohlc_stop_enex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_ohlc_stop_enex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=nb>open</span><span class=p>,</span>
    <span class=n>high</span><span class=p>,</span>
    <span class=n>low</span><span class=p>,</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>stop_price_out</span><span class=p>,</span>
    <span class=n>stop_type_out</span><span class=p>,</span>
    <span class=n>sl_stop</span><span class=p>,</span>
    <span class=n>sl_trail</span><span class=p>,</span>
    <span class=n>tp_stop</span><span class=p>,</span>
    <span class=n>reverse</span><span class=p>,</span>
    <span class=n>is_open_safe</span><span class=p>,</span>
    <span class=n>entry_wait</span><span class=p>,</span>
    <span class=n>exit_wait</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p>Generate one after another using <a href=/api/signals/nb/#vectorbt.signals.nb.generate_enex_nb title=vectorbt.signals.nb.generate_enex_nb>generate_enex_nb()</a> and <a href=/api/signals/nb/#vectorbt.signals.nb.ohlc_stop_choice_nb title=vectorbt.signals.nb.ohlc_stop_choice_nb>ohlc_stop_choice_nb()</a>.</p> <p>Returns two arrays: new entries and exits.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Has the same logic as calling <a href=/api/signals/nb/#vectorbt.signals.nb.generate_ohlc_stop_ex_nb title=vectorbt.signals.nb.generate_ohlc_stop_ex_nb>generate_ohlc_stop_ex_nb()</a> with <code>skip_until_exit=True</code>, but removes all entries that come before the next exit.</p> </div> <hr> <h2 id=vectorbt.signals.nb.generate_ohlc_stop_ex_nb>generate_ohlc_stop_ex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L874-L977 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_ohlc_stop_ex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_ohlc_stop_ex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=nb>open</span><span class=p>,</span>
    <span class=n>high</span><span class=p>,</span>
    <span class=n>low</span><span class=p>,</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>stop_price_out</span><span class=p>,</span>
    <span class=n>stop_type_out</span><span class=p>,</span>
    <span class=n>sl_stop</span><span class=p>,</span>
    <span class=n>sl_trail</span><span class=p>,</span>
    <span class=n>tp_stop</span><span class=p>,</span>
    <span class=n>reverse</span><span class=p>,</span>
    <span class=n>is_open_safe</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>until_next</span><span class=p>,</span>
    <span class=n>skip_until_exit</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p>Generate using <a href=/api/signals/nb/#vectorbt.signals.nb.generate_ex_nb title=vectorbt.signals.nb.generate_ex_nb>generate_ex_nb()</a> and <a href=/api/signals/nb/#vectorbt.signals.nb.ohlc_stop_choice_nb title=vectorbt.signals.nb.ohlc_stop_choice_nb>ohlc_stop_choice_nb()</a>.</p> <p><strong>Usage</strong></p> <ul> <li>Generate trailing stop loss and take profit signals for 10%. Illustrates how exit signal can be generated within the same bar as entry.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.signals.nb</span> <span class=kn>import</span> <span class=n>generate_ohlc_stop_ex_nb</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>])[:,</span> <span class=kc>None</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entry_price</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>10</span><span class=p>])[:,</span> <span class=kc>None</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>high_price</span> <span class=o>=</span> <span class=n>entry_price</span> <span class=o>+</span> <span class=mi>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>low_price</span> <span class=o>=</span> <span class=n>entry_price</span> <span class=o>-</span> <span class=mi>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>close_price</span> <span class=o>=</span> <span class=n>entry_price</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>stop_price_out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full_like</span><span class=p>(</span><span class=n>entries</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>stop_type_out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>full_like</span><span class=p>(</span><span class=n>entries</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>int64</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>generate_ohlc_stop_ex_nb</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>entries</span><span class=o>=</span><span class=n>entries</span><span class=p>,</span>
<span class=gp>... </span>    <span class=nb>open</span><span class=o>=</span><span class=n>entry_price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>high</span><span class=o>=</span><span class=n>high_price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>low</span><span class=o>=</span><span class=n>low_price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>close</span><span class=o>=</span><span class=n>close_price</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>stop_price_out</span><span class=o>=</span><span class=n>stop_price_out</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>stop_type_out</span><span class=o>=</span><span class=n>stop_type_out</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>sl_stop</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>sl_trail</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>tp_stop</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>reverse</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>is_open_safe</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>wait</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>until_next</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>skip_until_exit</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>pick_first</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>flex_2d</span><span class=o>=</span><span class=kc>True</span>
<span class=gp>... </span><span class=p>)</span>
<span class=go>array([[ True],</span>
<span class=go>       [False],</span>
<span class=go>       [False],</span>
<span class=go>       [ True],</span>
<span class=go>       [False]])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>stop_price_out</span>
<span class=go>array([[ 9. ],  &lt;&lt; trailing SL from 10 (entry_price)</span>
<span class=go>       [ nan],</span>
<span class=go>       [ nan],</span>
<span class=go>       [11.7],  &lt;&lt; trailing SL from 13 (high_price)</span>
<span class=go>       [ nan]])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>stop_type_out</span>
<span class=go>array([[ 1],</span>
<span class=go>       [-1],</span>
<span class=go>       [-1],</span>
<span class=go>       [ 1],</span>
<span class=go>       [-1]])</span>
</code></pre></div> <p>Note that if <code>is_open_safe</code> was False, the first exit would be executed at the second bar. This is because we don't know whether the entry price comes before the high and low price at the first bar, and so the trailing stop isn't triggered for the low price of 9.0.</p> <hr> <h2 id=vectorbt.signals.nb.generate_rand_by_prob_nb>generate_rand_by_prob_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L345-L364 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_rand_by_prob_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_rand_by_prob_nb</span><span class=p>(</span>
    <span class=n>shape</span><span class=p>,</span>
    <span class=n>prob</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>flex_2d</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Create a boolean matrix of <code>shape</code> and pick signals randomly by probability <code>prob</code>.</p> <p><code>prob</code> should be a 2-dim array of shape <code>shape</code>. Specify <code>seed</code> to make output deterministic.</p> <p>See <a href=/api/signals/nb/#vectorbt.signals.nb.rand_by_prob_choice_nb title=vectorbt.signals.nb.rand_by_prob_choice_nb>rand_by_prob_choice_nb()</a>.</p> <hr> <h2 id=vectorbt.signals.nb.generate_rand_enex_by_prob_nb>generate_rand_enex_by_prob_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L523-L548 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_rand_enex_by_prob_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_rand_enex_by_prob_nb</span><span class=p>(</span>
    <span class=n>shape</span><span class=p>,</span>
    <span class=n>entry_prob</span><span class=p>,</span>
    <span class=n>exit_prob</span><span class=p>,</span>
    <span class=n>entry_wait</span><span class=p>,</span>
    <span class=n>exit_wait</span><span class=p>,</span>
    <span class=n>entry_pick_first</span><span class=p>,</span>
    <span class=n>exit_pick_first</span><span class=p>,</span>
    <span class=n>flex_2d</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Pick entries by probability <code>entry_prob</code> and exits by probability <code>exit_prob</code> one after another.</p> <p><code>entry_prob</code> and <code>exit_prob</code> should be 2-dim arrays of shape <code>shape</code>. Specify <code>seed</code> to make output deterministic.</p> <hr> <h2 id=vectorbt.signals.nb.generate_rand_enex_nb>generate_rand_enex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L415-L512 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_rand_enex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_rand_enex_nb</span><span class=p>(</span>
    <span class=n>shape</span><span class=p>,</span>
    <span class=n>n</span><span class=p>,</span>
    <span class=n>entry_wait</span><span class=p>,</span>
    <span class=n>exit_wait</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Pick a number of entries and the same number of exits one after another.</p> <p>Respects <code>entry_wait</code> and <code>exit_wait</code> constraints through a number of tricks. Tries to mimic a uniform distribution as much as possible.</p> <p>The idea is the following: with constraints, there is some fixed amount of total space required between first entry and last exit. Upscale this space in a way that distribution of entries and exit is similar to a uniform distribution. This means randomizing the position of first entry, last exit, and all signals between them.</p> <p><code>n</code> uses flexible indexing. Specify <code>seed</code> to make output deterministic.</p> <hr> <h2 id=vectorbt.signals.nb.generate_rand_ex_by_prob_nb>generate_rand_ex_by_prob_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L390-L412 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_rand_ex_by_prob_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_rand_ex_by_prob_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>prob</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>until_next</span><span class=p>,</span>
    <span class=n>skip_until_exit</span><span class=p>,</span>
    <span class=n>flex_2d</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Pick an exit after each entry in <code>entries</code> by probability <code>prob</code>.</p> <p><code>prob</code> should be a 2-dim array of shape <code>shape</code>. Specify <code>seed</code> to make output deterministic.</p> <hr> <h2 id=vectorbt.signals.nb.generate_rand_ex_nb>generate_rand_ex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L369-L387 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_rand_ex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_rand_ex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>until_next</span><span class=p>,</span>
    <span class=n>skip_until_exit</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Pick an exit after each entry in <code>entries</code>.</p> <p>Specify <code>seed</code> to make output deterministic.</p> <hr> <h2 id=vectorbt.signals.nb.generate_rand_nb>generate_rand_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L307-L320 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_rand_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_rand_nb</span><span class=p>(</span>
    <span class=n>shape</span><span class=p>,</span>
    <span class=n>n</span><span class=p>,</span>
    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span>
<span class=p>)</span>
</code></pre></div> <p>Create a boolean matrix of <code>shape</code> and pick a number of signals randomly.</p> <p>Specify <code>seed</code> to make output deterministic.</p> <p>See <a href=/api/signals/nb/#vectorbt.signals.nb.rand_choice_nb title=vectorbt.signals.nb.rand_choice_nb>rand_choice_nb()</a>.</p> <hr> <h2 id=vectorbt.signals.nb.generate_stop_enex_nb>generate_stop_enex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L694-L719 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_stop_enex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_stop_enex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>ts</span><span class=p>,</span>
    <span class=n>stop</span><span class=p>,</span>
    <span class=n>trailing</span><span class=p>,</span>
    <span class=n>entry_wait</span><span class=p>,</span>
    <span class=n>exit_wait</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p>Generate one after another using <a href=/api/signals/nb/#vectorbt.signals.nb.generate_enex_nb title=vectorbt.signals.nb.generate_enex_nb>generate_enex_nb()</a> and <a href=/api/signals/nb/#vectorbt.signals.nb.stop_choice_nb title=vectorbt.signals.nb.stop_choice_nb>stop_choice_nb()</a>.</p> <p>Returns two arrays: new entries and exits.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Has the same logic as calling <a href=/api/signals/nb/#vectorbt.signals.nb.generate_stop_ex_nb title=vectorbt.signals.nb.generate_stop_ex_nb>generate_stop_ex_nb()</a> with <code>skip_until_exit=True</code>, but removes all entries that come before the next exit.</p> </div> <hr> <h2 id=vectorbt.signals.nb.generate_stop_ex_nb>generate_stop_ex_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L639-L691 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.generate_stop_ex_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>generate_stop_ex_nb</span><span class=p>(</span>
    <span class=n>entries</span><span class=p>,</span>
    <span class=n>ts</span><span class=p>,</span>
    <span class=n>stop</span><span class=p>,</span>
    <span class=n>trailing</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>until_next</span><span class=p>,</span>
    <span class=n>skip_until_exit</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p>Generate using <a href=/api/signals/nb/#vectorbt.signals.nb.generate_ex_nb title=vectorbt.signals.nb.generate_ex_nb>generate_ex_nb()</a> and <a href=/api/signals/nb/#vectorbt.signals.nb.stop_choice_nb title=vectorbt.signals.nb.stop_choice_nb>stop_choice_nb()</a>.</p> <p><strong>Usage</strong></p> <ul> <li>Generate trailing stop loss and take profit signals for 10%.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.signals.nb</span> <span class=kn>import</span> <span class=n>generate_stop_ex_nb</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>([</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>False</span><span class=p>])[:,</span> <span class=kc>None</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>ts</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>])[:,</span> <span class=kc>None</span><span class=p>]</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>generate_stop_ex_nb</span><span class=p>(</span><span class=n>entries</span><span class=p>,</span> <span class=n>ts</span><span class=p>,</span> <span class=o>-</span><span class=mf>0.1</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=go>array([[False],</span>
<span class=go>       [False],</span>
<span class=go>       [False],</span>
<span class=go>       [ True],</span>
<span class=go>       [False]])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>generate_stop_ex_nb</span><span class=p>(</span><span class=n>entries</span><span class=p>,</span> <span class=n>ts</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=go>array([[False],</span>
<span class=go>       [False],</span>
<span class=go>       [ True],</span>
<span class=go>       [False],</span>
<span class=go>       [False]])</span>
</code></pre></div> <hr> <h2 id=vectorbt.signals.nb.norm_avg_index_1d_nb>norm_avg_index_1d_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1257-L1261 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.norm_avg_index_1d_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>norm_avg_index_1d_nb</span><span class=p>(</span>
    <span class=n>a</span>
<span class=p>)</span>
</code></pre></div> <p>Get mean index normalized to (-1, 1).</p> <hr> <h2 id=vectorbt.signals.nb.norm_avg_index_nb>norm_avg_index_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1264-L1270 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.norm_avg_index_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>norm_avg_index_nb</span><span class=p>(</span>
    <span class=n>a</span>
<span class=p>)</span>
</code></pre></div> <p>2-dim version of <a href=/api/signals/nb/#vectorbt.signals.nb.norm_avg_index_1d_nb title=vectorbt.signals.nb.norm_avg_index_1d_nb>norm_avg_index_1d_nb()</a>.</p> <hr> <h2 id=vectorbt.signals.nb.nth_index_1d_nb>nth_index_1d_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1225-L1245 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.nth_index_1d_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>nth_index_1d_nb</span><span class=p>(</span>
    <span class=n>a</span><span class=p>,</span>
    <span class=n>n</span>
<span class=p>)</span>
</code></pre></div> <p>Get the index of the n-th True value.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>n</code> starts with 0 and can be negative.</p> </div> <hr> <h2 id=vectorbt.signals.nb.nth_index_nb>nth_index_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1248-L1254 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.nth_index_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>nth_index_nb</span><span class=p>(</span>
    <span class=n>a</span><span class=p>,</span>
    <span class=n>n</span>
<span class=p>)</span>
</code></pre></div> <p>2-dim version of <a href=/api/signals/nb/#vectorbt.signals.nb.nth_index_1d_nb title=vectorbt.signals.nb.nth_index_1d_nb>nth_index_1d_nb()</a>.</p> <hr> <h2 id=vectorbt.signals.nb.ohlc_stop_choice_nb>ohlc_stop_choice_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L722-L871 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.ohlc_stop_choice_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>ohlc_stop_choice_nb</span><span class=p>(</span>
    <span class=n>from_i</span><span class=p>,</span>
    <span class=n>to_i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=nb>open</span><span class=p>,</span>
    <span class=n>high</span><span class=p>,</span>
    <span class=n>low</span><span class=p>,</span>
    <span class=n>close</span><span class=p>,</span>
    <span class=n>stop_price_out</span><span class=p>,</span>
    <span class=n>stop_type_out</span><span class=p>,</span>
    <span class=n>sl_stop</span><span class=p>,</span>
    <span class=n>sl_trail</span><span class=p>,</span>
    <span class=n>tp_stop</span><span class=p>,</span>
    <span class=n>reverse</span><span class=p>,</span>
    <span class=n>is_open_safe</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>temp_idx_arr</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p><code>choice_func_nb</code> that returns the indices of the stop price being hit within OHLC.</p> <p>Compared to <a href=/api/signals/nb/#vectorbt.signals.nb.stop_choice_nb title=vectorbt.signals.nb.stop_choice_nb>stop_choice_nb()</a>, takes into account the whole bar, can check for both (trailing) stop loss and take profit simultaneously, and tracks hit price and stop type.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>We don't have intra-candle data. If there was a huge price fluctuation in both directions, we can't determine whether SL was triggered before TP and vice versa. So some assumptions need to be made: 1) trailing stop can only be based on previous close/high, and 2) we pessimistically assume that SL comes before TP.</p> </div> <p><strong>Args</strong></p> <dl> <dt><strong><code>col</code></strong> :&ensp;<code>int</code></dt> <dd>Current column.</dd> <dt><strong><code>from_i</code></strong> :&ensp;<code>int</code></dt> <dd>Index to start generation from (inclusive).</dd> <dt><strong><code>to_i</code></strong> :&ensp;<code>int</code></dt> <dd>Index to run generation to (exclusive).</dd> <dt><strong><code>open</code></strong> :&ensp;<code>array</code> of <code>float</code></dt> <dd>Entry price such as open or previous close.</dd> <dt><strong><code>high</code></strong> :&ensp;<code>array</code> of <code>float</code></dt> <dd>High price.</dd> <dt><strong><code>low</code></strong> :&ensp;<code>array</code> of <code>float</code></dt> <dd>Low price.</dd> <dt><strong><code>close</code></strong> :&ensp;<code>array</code> of <code>float</code></dt> <dd>Close price.</dd> <dt><strong><code>stop_price_out</code></strong> :&ensp;<code>array</code> of <code>float</code></dt> <dd>Array where hit price of each exit will be stored.</dd> <dt><strong><code>stop_type_out</code></strong> :&ensp;<code>array</code> of <code>int</code></dt> <dd> <p>Array where stop type of each exit will be stored.</p> <p>0 for stop loss, 1 for take profit.</p> </dd> <dt><strong><code>sl_stop</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd> <p>Percentage value for stop loss.</p> <p>Can be per frame, column, row, or element-wise. Set to <code>np.nan</code> to disable.</p> </dd> <dt><strong><code>sl_trail</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd> <p>Whether <code>sl_stop</code> is trailing.</p> <p>Can be per frame, column, row, or element-wise. Set to False to disable.</p> </dd> <dt><strong><code>tp_stop</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd> <p>Percentage value for take profit.</p> <p>Can be per frame, column, row, or element-wise. Set to <code>np.nan</code> to disable.</p> </dd> <dt><strong><code>reverse</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd>Whether to do the opposite, i.e.: prices are followed downwards.</dd> <dt><strong><code>is_open_safe</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether entry price comes right at or before open.</p> <p>If True and wait is 0, can use high/low at entry bar. Otherwise uses only close.</p> </dd> <dt><strong><code>wait</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Number of ticks to wait before placing exits.</p> <p>Setting False or 0 may result in entry and exit signal at one bar.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If <code>wait</code> is greater than 0, even with <code>is_open_safe</code> set to True, trailing stop won't update at bars that come before <code>from_i</code>.</p> </div> </dd> <dt><strong><code>pick_first</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to stop as soon as the first exit signal is found.</dd> <dt><strong><code>temp_idx_arr</code></strong> :&ensp;<code>array</code> of <code>int</code></dt> <dd>Empty integer array used to temporarily store indices.</dd> <dt><strong><code>flex_2d</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.flex_select_auto_nb title=vectorbt.base.reshape_fns.flex_select_auto_nb>flex_select_auto_nb()</a>.</dd> </dl> <hr> <h2 id=vectorbt.signals.nb.part_pos_rank_nb>part_pos_rank_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1211-L1219 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.part_pos_rank_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>part_pos_rank_nb</span><span class=p>(</span>
    <span class=n>i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=n>reset_i</span><span class=p>,</span>
    <span class=n>prev_part_end_i</span><span class=p>,</span>
    <span class=n>part_start_i</span><span class=p>,</span>
    <span class=n>part_pos_temp</span>
<span class=p>)</span>
</code></pre></div> <p><code>rank_func_nb</code> that returns the rank of each partition by its position in the series.</p> <hr> <h2 id=vectorbt.signals.nb.partition_ranges_nb>partition_ranges_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1098-L1130 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.partition_ranges_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>partition_ranges_nb</span><span class=p>(</span>
    <span class=n>a</span>
<span class=p>)</span>
</code></pre></div> <p>Create a record of type <a href=/api/generic/enums/#vectorbt.generic.enums.range_dt title=vectorbt.generic.enums.range_dt>range_dt</a> for each partition of signals in <code>a</code>.</p> <hr> <h2 id=vectorbt.signals.nb.rand_by_prob_choice_nb>rand_by_prob_choice_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L323-L342 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.rand_by_prob_choice_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>rand_by_prob_choice_nb</span><span class=p>(</span>
    <span class=n>from_i</span><span class=p>,</span>
    <span class=n>to_i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=n>prob</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>temp_idx_arr</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p><code>choice_func_nb</code> to randomly pick values from range <code>[from_i, to_i)</code> with probability <code>prob</code>.</p> <p><code>prob</code> uses flexible indexing.</p> <hr> <h2 id=vectorbt.signals.nb.rand_choice_nb>rand_choice_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L297-L304 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.rand_choice_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>rand_choice_nb</span><span class=p>(</span>
    <span class=n>from_i</span><span class=p>,</span>
    <span class=n>to_i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=n>n</span>
<span class=p>)</span>
</code></pre></div> <p><code>choice_func_nb</code> to randomly pick <code>n</code> values from range <code>[from_i, to_i)</code>.</p> <p><code>n</code> uses flexible indexing.</p> <hr> <h2 id=vectorbt.signals.nb.rand_enex_apply_nb>rand_enex_apply_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L515-L520 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.rand_enex_apply_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>rand_enex_apply_nb</span><span class=p>(</span>
    <span class=n>input_shape</span><span class=p>,</span>
    <span class=n>n</span><span class=p>,</span>
    <span class=n>entry_wait</span><span class=p>,</span>
    <span class=n>exit_wait</span>
<span class=p>)</span>
</code></pre></div> <p><code>apply_func_nb</code> that calls <a href=/api/signals/nb/#vectorbt.signals.nb.generate_rand_enex_nb title=vectorbt.signals.nb.generate_rand_enex_nb>generate_rand_enex_nb()</a>.</p> <hr> <h2 id=vectorbt.signals.nb.rank_nb>rank_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1161-L1196 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.rank_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>rank_nb</span><span class=p>(</span>
    <span class=n>a</span><span class=p>,</span>
    <span class=n>reset_by</span><span class=p>,</span>
    <span class=n>after_false</span><span class=p>,</span>
    <span class=n>rank_func_nb</span><span class=p>,</span>
    <span class=o>*</span><span class=n>args</span>
<span class=p>)</span>
</code></pre></div> <p>Rank each signal using <code>rank_func_nb</code>.</p> <p>Applies <code>rank_func_nb</code> on each True value. Should accept index of the row, index of the column, index of the last reset signal, index of the end of the previous partition, index of the start of the current partition, and <code>*args</code>. Should return -1 for no rank, otherwise 0 or greater.</p> <p>Setting <code>after_false</code> to True will disregard the first partition of True values if there is no False value before them.</p> <hr> <h2 id=vectorbt.signals.nb.sig_pos_rank_nb>sig_pos_rank_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L1199-L1208 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.sig_pos_rank_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>sig_pos_rank_nb</span><span class=p>(</span>
    <span class=n>i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=n>reset_i</span><span class=p>,</span>
    <span class=n>prev_part_end_i</span><span class=p>,</span>
    <span class=n>part_start_i</span><span class=p>,</span>
    <span class=n>sig_pos_temp</span><span class=p>,</span>
    <span class=n>allow_gaps</span>
<span class=p>)</span>
</code></pre></div> <p><code>rank_func_nb</code> that returns the rank of each signal by its position in the partition.</p> <hr> <h2 id=vectorbt.signals.nb.stop_choice_nb>stop_choice_nb <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/nb.py#L565-L636 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.nb.stop_choice_nb title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>stop_choice_nb</span><span class=p>(</span>
    <span class=n>from_i</span><span class=p>,</span>
    <span class=n>to_i</span><span class=p>,</span>
    <span class=n>col</span><span class=p>,</span>
    <span class=n>ts</span><span class=p>,</span>
    <span class=n>stop</span><span class=p>,</span>
    <span class=n>trailing</span><span class=p>,</span>
    <span class=n>wait</span><span class=p>,</span>
    <span class=n>pick_first</span><span class=p>,</span>
    <span class=n>temp_idx_arr</span><span class=p>,</span>
    <span class=n>flex_2d</span>
<span class=p>)</span>
</code></pre></div> <p><code>choice_func_nb</code> that returns the indices of the stop being hit.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>from_i</code></strong> :&ensp;<code>int</code></dt> <dd>Index to start generation from (inclusive).</dd> <dt><strong><code>to_i</code></strong> :&ensp;<code>int</code></dt> <dd>Index to run generation to (exclusive).</dd> <dt><strong><code>col</code></strong> :&ensp;<code>int</code></dt> <dd>Current column.</dd> <dt><strong><code>ts</code></strong> :&ensp;<code>array</code> of <code>float</code></dt> <dd>2-dim time series array such as price.</dd> <dt><strong><code>stop</code></strong> :&ensp;<code>float</code> or <code>array_like</code></dt> <dd> <p>Stop value for stop loss.</p> <p>Can be per frame, column, row, or element-wise. Set to <code>np.nan</code> to disable.</p> </dd> <dt><strong><code>trailing</code></strong> :&ensp;<code>bool</code> or <code>array_like</code></dt> <dd> <p>Whether to use trailing stop.</p> <p>Can be per frame, column, row, or element-wise. Set to False to disable.</p> </dd> <dt><strong><code>wait</code></strong> :&ensp;<code>int</code></dt> <dd> <p>Number of ticks to wait before placing exits.</p> <p>Setting False or 0 may result in two signals at one bar.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If <code>wait</code> is greater than 0, trailing stop won't update at bars that come before <code>from_i</code>.</p> </div> </dd> <dt><strong><code>pick_first</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to stop as soon as the first exit signal is found.</dd> <dt><strong><code>temp_idx_arr</code></strong> :&ensp;<code>array</code> of <code>int</code></dt> <dd>Empty integer array used to temporarily store indices.</dd> <dt><strong><code>flex_2d</code></strong> :&ensp;<code>bool</code></dt> <dd>See <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.flex_select_auto_nb title=vectorbt.base.reshape_fns.flex_select_auto_nb>flex_select_auto_nb()</a>.</dd> </dl> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/polakowo title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg> </span> </a> <hr> </footer> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Oleg Polakow. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.instant", "search.suggest", "search.share"], "search": "../../../assets/javascripts/workers/search.f2da59ea.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.65061dd4.min.js></script> <script src=../../../assets/javascripts/extra.js></script> </body> </html>