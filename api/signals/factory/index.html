<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A factory for building new signal generators with ease"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.dev/api/signals/factory/ rel=canonical><link href=../enums/ rel=prev><link href=../generators/ rel=next><link rel=icon href=/assets/logo/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.2+insiders-4.42.0"><title>factory - vectorbt</title><link rel=stylesheet href=../../../assets/stylesheets/main.f2778614.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.46987102.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4QLCS0J048"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4QLCS0J048",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4QLCS0J048",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:title content=factory><meta property=og:type content=website><meta content=https://vectorbt.dev/api/signals/factory/ property=og:url><meta property=og:image:url content=/assets/logo/social-512x512.png><meta property=og:image:type content=image/png><meta property=og:description content="A factory for building new signal generators with ease"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/assets/logo/favicon-16x16.png><link rel=manifest href=/assets/logo/site.webmanifest><link rel=mask-icon href=/assets/logo/safari-pinned-tab.svg color=#1e2029><link rel="shortcut icon" href=/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e2029><meta name=msapplication-config content=/assets/logo/browserconfig.xml><meta name=theme-color content=#1e2029></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#vectorbt.signals.factory class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Get access to <a href=https://vectorbt.pro/ style="color: #ff6e42; text-decoration: underline;">vectorbt PRO</a> and join our quant army! </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=vectorbt class="md-header__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> vectorbt </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> factory </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=../../../documentation/ class=md-tabs__link> Documentation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=../../../terms/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=vectorbt class="md-nav__button md-logo" aria-label=vectorbt data-md-component=logo> <img src=../../../assets/logo/logo-white.svg alt=logo> </a> vectorbt </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> vectorbt </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../.. class="md-nav__link "> <span class=md-ellipsis> Getting started </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/features/ class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/usage/ class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/resources/ class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> API </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../_settings/ class=md-nav__link> <span class=md-ellipsis> _settings </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../base/ class="md-nav__link "> <span class=md-ellipsis> base </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../base/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../base/array_wrapper/ class=md-nav__link> <span class=md-ellipsis> array_wrapper </span> </a> </li> <li class=md-nav__item> <a href=../../base/column_grouper/ class=md-nav__link> <span class=md-ellipsis> column_grouper </span> </a> </li> <li class=md-nav__item> <a href=../../base/combine_fns/ class=md-nav__link> <span class=md-ellipsis> combine_fns </span> </a> </li> <li class=md-nav__item> <a href=../../base/index_fns/ class=md-nav__link> <span class=md-ellipsis> index_fns </span> </a> </li> <li class=md-nav__item> <a href=../../base/indexing/ class=md-nav__link> <span class=md-ellipsis> indexing </span> </a> </li> <li class=md-nav__item> <a href=../../base/reshape_fns/ class=md-nav__link> <span class=md-ellipsis> reshape_fns </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__container"> <a href=../../data/ class="md-nav__link "> <span class=md-ellipsis> data </span> </a> <label class="md-nav__link " for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../data/custom/ class=md-nav__link> <span class=md-ellipsis> custom </span> </a> </li> <li class=md-nav__item> <a href=../../data/updater/ class=md-nav__link> <span class=md-ellipsis> updater </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <div class="md-nav__link md-nav__container"> <a href=../../generic/ class="md-nav__link "> <span class=md-ellipsis> generic </span> </a> <label class="md-nav__link " for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> generic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../generic/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../generic/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../generic/drawdowns/ class=md-nav__link> <span class=md-ellipsis> drawdowns </span> </a> </li> <li class=md-nav__item> <a href=../../generic/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../generic/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../generic/plots_builder/ class=md-nav__link> <span class=md-ellipsis> plots_builder </span> </a> </li> <li class=md-nav__item> <a href=../../generic/plotting/ class=md-nav__link> <span class=md-ellipsis> plotting </span> </a> </li> <li class=md-nav__item> <a href=../../generic/ranges/ class=md-nav__link> <span class=md-ellipsis> ranges </span> </a> </li> <li class=md-nav__item> <a href=../../generic/splitters/ class=md-nav__link> <span class=md-ellipsis> splitters </span> </a> </li> <li class=md-nav__item> <a href=../../generic/stats_builder/ class=md-nav__link> <span class=md-ellipsis> stats_builder </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <div class="md-nav__link md-nav__container"> <a href=../../indicators/ class="md-nav__link "> <span class=md-ellipsis> indicators </span> </a> <label class="md-nav__link " for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> indicators </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../indicators/basic/ class=md-nav__link> <span class=md-ellipsis> basic </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/configs/ class=md-nav__link> <span class=md-ellipsis> configs </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/factory/ class=md-nav__link> <span class=md-ellipsis> factory </span> </a> </li> <li class=md-nav__item> <a href=../../indicators/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <div class="md-nav__link md-nav__container"> <a href=../../labels/ class="md-nav__link "> <span class=md-ellipsis> labels </span> </a> <label class="md-nav__link " for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> labels </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../labels/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../labels/generators/ class=md-nav__link> <span class=md-ellipsis> generators </span> </a> </li> <li class=md-nav__item> <a href=../../labels/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <div class="md-nav__link md-nav__container"> <a href=../../messaging/ class="md-nav__link "> <span class=md-ellipsis> messaging </span> </a> <label class="md-nav__link " for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> messaging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../messaging/telegram/ class=md-nav__link> <span class=md-ellipsis> telegram </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ohlcv_accessors/ class=md-nav__link> <span class=md-ellipsis> ohlcv_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10> <div class="md-nav__link md-nav__container"> <a href=../../portfolio/ class="md-nav__link "> <span class=md-ellipsis> portfolio </span> </a> <label class="md-nav__link " for=__nav_3_10 id=__nav_3_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> portfolio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../portfolio/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/logs/ class=md-nav__link> <span class=md-ellipsis> logs </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/orders/ class=md-nav__link> <span class=md-ellipsis> orders </span> </a> </li> <li class=md-nav__item> <a href=../../portfolio/trades/ class=md-nav__link> <span class=md-ellipsis> trades </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../px_accessors/ class=md-nav__link> <span class=md-ellipsis> px_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__container"> <a href=../../records/ class="md-nav__link "> <span class=md-ellipsis> records </span> </a> <label class="md-nav__link " for=__nav_3_12 id=__nav_3_12_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../records/base/ class=md-nav__link> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=../../records/col_mapper/ class=md-nav__link> <span class=md-ellipsis> col_mapper </span> </a> </li> <li class=md-nav__item> <a href=../../records/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../records/mapped_array/ class=md-nav__link> <span class=md-ellipsis> mapped_array </span> </a> </li> <li class=md-nav__item> <a href=../../records/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__container"> <a href=../../returns/ class="md-nav__link "> <span class=md-ellipsis> returns </span> </a> <label class="md-nav__link " for=__nav_3_13 id=__nav_3_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_13_label aria-expanded=false> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> returns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../returns/accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../../returns/metrics/ class=md-nav__link> <span class=md-ellipsis> metrics </span> </a> </li> <li class=md-nav__item> <a href=../../returns/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=../../returns/qs_adapter/ class=md-nav__link> <span class=md-ellipsis> qs_adapter </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../root_accessors/ class=md-nav__link> <span class=md-ellipsis> root_accessors </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_15 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> signals </span> </a> <label class="md-nav__link " for=__nav_3_15 id=__nav_3_15_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_15_label aria-expanded=true> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> signals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../accessors/ class=md-nav__link> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=../enums/ class=md-nav__link> <span class=md-ellipsis> enums </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> factory </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> factory </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vectorbt.signals.factory.SignalFactory class=md-nav__link> <span class=md-ellipsis> SignalFactory() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../generators/ class=md-nav__link> <span class=md-ellipsis> generators </span> </a> </li> <li class=md-nav__item> <a href=../nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_16> <div class="md-nav__link md-nav__container"> <a href=../../utils/ class="md-nav__link "> <span class=md-ellipsis> utils </span> </a> <label class="md-nav__link " for=__nav_3_16 id=__nav_3_16_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_16_label aria-expanded=false> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> utils </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../utils/array_/ class=md-nav__link> <span class=md-ellipsis> array_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/attr_/ class=md-nav__link> <span class=md-ellipsis> attr_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/checks/ class=md-nav__link> <span class=md-ellipsis> checks </span> </a> </li> <li class=md-nav__item> <a href=../../utils/colors/ class=md-nav__link> <span class=md-ellipsis> colors </span> </a> </li> <li class=md-nav__item> <a href=../../utils/config/ class=md-nav__link> <span class=md-ellipsis> config </span> </a> </li> <li class=md-nav__item> <a href=../../utils/datetime_/ class=md-nav__link> <span class=md-ellipsis> datetime_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/decorators/ class=md-nav__link> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=../../utils/docs/ class=md-nav__link> <span class=md-ellipsis> docs </span> </a> </li> <li class=md-nav__item> <a href=../../utils/enum_/ class=md-nav__link> <span class=md-ellipsis> enum_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/figure/ class=md-nav__link> <span class=md-ellipsis> figure </span> </a> </li> <li class=md-nav__item> <a href=../../utils/image_/ class=md-nav__link> <span class=md-ellipsis> image_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/mapping/ class=md-nav__link> <span class=md-ellipsis> mapping </span> </a> </li> <li class=md-nav__item> <a href=../../utils/math_/ class=md-nav__link> <span class=md-ellipsis> math_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/module_/ class=md-nav__link> <span class=md-ellipsis> module_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/params/ class=md-nav__link> <span class=md-ellipsis> params </span> </a> </li> <li class=md-nav__item> <a href=../../utils/random_/ class=md-nav__link> <span class=md-ellipsis> random_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/requests_/ class=md-nav__link> <span class=md-ellipsis> requests_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/schedule_/ class=md-nav__link> <span class=md-ellipsis> schedule_ </span> </a> </li> <li class=md-nav__item> <a href=../../utils/tags/ class=md-nav__link> <span class=md-ellipsis> tags </span> </a> </li> <li class=md-nav__item> <a href=../../utils/template/ class=md-nav__link> <span class=md-ellipsis> template </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../terms/ class="md-nav__link "> <span class=md-ellipsis> Terms </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Terms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../terms/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vectorbt.signals.factory.SignalFactory class=md-nav__link> <span class=md-ellipsis> SignalFactory() </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=vectorbt.signals.factory>factory <span class=dobjtype>module</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/factory.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.factory title="Permanent link">&para;</a></h1> <p>A factory for building new signal generators with ease.</p> <p>The signal factory class <a href=/api/signals/factory/#vectorbt.signals.factory.SignalFactory title=vectorbt.signals.factory.SignalFactory>SignalFactory</a> extends <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> to offer a convenient way to create signal generators of any complexity. By providing it with information such as entry and exit functions and the names of inputs, parameters, and outputs, it will create a stand-alone class capable of generating signals for an arbitrary combination of inputs and parameters.</p> <hr> <h2 id=vectorbt.signals.factory.SignalFactory>SignalFactory <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/factory.py#L33-L950 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span></a><a class=headerlink href=#vectorbt.signals.factory.SignalFactory title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=n>SignalFactory</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
    <span class=n>mode</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
    <span class=n>input_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>attr_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span>
</code></pre></div> <p>A factory for building signal generators.</p> <p>Extends <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a> with choice functions.</p> <p>Generates a fixed number of outputs (depending upon <code>mode</code>). If you need to generate other outputs, use in-place outputs (via <code>in_output_names</code>).</p> <p>See <a href=/api/signals/enums/#vectorbt.signals.enums.FactoryMode title=vectorbt.signals.enums.FactoryMode>FactoryMode</a> for supported generation modes.</p> <p>Other arguments are passed to <a href=/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory title=vectorbt.indicators.factory.IndicatorFactory>IndicatorFactory</a>. <div class=highlight><pre><span></span><code>A factory for creating new indicators.

Initialize `IndicatorFactory` to create a skeleton and then use a class method
such as `IndicatorFactory.from_custom_func` to bind a calculation function to the skeleton.

__Args__

**```class_name```** :&amp;ensp;`str`
:   Name for the created indicator class.

**```class_docstring```** :&amp;ensp;`str`
:   Docstring for the created indicator class.

**```module_name```** :&amp;ensp;`str`
:   Specify the module the class originates from.

**```short_name```** :&amp;ensp;`str`
:   A short name of the indicator.

    Defaults to lower-case `class_name`.

**```prepend_name```** :&amp;ensp;`bool`
:   Whether to prepend `short_name` to each parameter level.

**```input_names```** :&amp;ensp;`list` of `str`
:   A list of names of input arrays.

**```param_names```** :&amp;ensp;`list` of `str`
:   A list of names of parameters.

**```in_output_names```** :&amp;ensp;`list` of `str`
:   A list of names of in-place output arrays.

    An in-place output is an output that is not returned but modified in-place.
    Some advantages of such outputs include:

    1) they don&#39;t need to be returned,
    2) they can be passed between functions as easily as inputs,
    3) they can be provided with already allocated data to safe memory,
    4) if data or default value are not provided, they are created empty to not occupy memory.

**```output_names```** :&amp;ensp;`list` of `str`
:   A list of names of output arrays.

**```output_flags```** :&amp;ensp;`dict`
:   A dictionary of in-place and regular output flags.

**```custom_output_props```** :&amp;ensp;`dict`
:   A dictionary with user-defined functions that will be
    bound to the indicator class and wrapped with `@cached_property`.

**```attr_settings```** :&amp;ensp;`dict`
:   A dictionary of settings by attribute name.

    Attributes can be `input_names`, `in_output_names`, `output_names` and `custom_output_props`.

    Following keys are accepted:

    * `dtype`: Data type used to determine which methods to generate around this attribute.
        Set to None to disable. Default is `np.float64`. Can be set to instance of
        `collections.namedtuple` acting as enumerated type, or any other mapping;
        It will then create a property with suffix `readable` that contains data in a string format.

**```metrics```** :&amp;ensp;`dict`
:   Metrics supported by [StatsBuilderMixin.stats()](/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats &quot;vectorbt.generic.stats_builder.StatsBuilderMixin.stats&quot;).

    If dict, will be converted to [Config](/api/utils/config/#vectorbt.utils.config.Config &quot;vectorbt.utils.config.Config&quot;).

**```stats_defaults```** :&amp;ensp;`callable` or `dict`
:   Defaults for [StatsBuilderMixin.stats()](/api/generic/stats_builder/#vectorbt.generic.stats_builder.StatsBuilderMixin.stats &quot;vectorbt.generic.stats_builder.StatsBuilderMixin.stats&quot;).

    If dict, will be converted into a property.

**```subplots```** :&amp;ensp;`dict`
:   Subplots supported by [PlotsBuilderMixin.plots()](/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots &quot;vectorbt.generic.plots_builder.PlotsBuilderMixin.plots&quot;).

    If dict, will be converted to [Config](/api/utils/config/#vectorbt.utils.config.Config &quot;vectorbt.utils.config.Config&quot;).

**```plots_defaults```** :&amp;ensp;`callable` or `dict`
:   Defaults for [PlotsBuilderMixin.plots()](/api/generic/plots_builder/#vectorbt.generic.plots_builder.PlotsBuilderMixin.plots &quot;vectorbt.generic.plots_builder.PlotsBuilderMixin.plots&quot;).

    If dict, will be converted into a property.

!!! note
    The `__init__` method is not used for running the indicator, for this use `run`.
    The reason for this is indexing, which requires a clean `__init__` method for creating 
    a new indicator object with newly indexed attributes.

__Superclasses__

* [IndicatorFactory](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory &quot;vectorbt.indicators.factory.IndicatorFactory&quot;)

__Inherited members__

* [IndicatorFactory.find_ta_indicator()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.find_ta_indicator &quot;vectorbt.indicators.factory.IndicatorFactory.find_ta_indicator&quot;)
* [IndicatorFactory.from_apply_func()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_apply_func &quot;vectorbt.indicators.factory.IndicatorFactory.from_apply_func&quot;)
* [IndicatorFactory.from_custom_func()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_custom_func &quot;vectorbt.indicators.factory.IndicatorFactory.from_custom_func&quot;)
* [IndicatorFactory.from_pandas_ta()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_pandas_ta &quot;vectorbt.indicators.factory.IndicatorFactory.from_pandas_ta&quot;)
* [IndicatorFactory.from_ta()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_ta &quot;vectorbt.indicators.factory.IndicatorFactory.from_ta&quot;)
* [IndicatorFactory.from_talib()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.from_talib &quot;vectorbt.indicators.factory.IndicatorFactory.from_talib&quot;)
* [IndicatorFactory.get_pandas_ta_indicators()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.get_pandas_ta_indicators &quot;vectorbt.indicators.factory.IndicatorFactory.get_pandas_ta_indicators&quot;)
* [IndicatorFactory.get_ta_indicators()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.get_ta_indicators &quot;vectorbt.indicators.factory.IndicatorFactory.get_ta_indicators&quot;)
* [IndicatorFactory.get_talib_indicators()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.get_talib_indicators &quot;vectorbt.indicators.factory.IndicatorFactory.get_talib_indicators&quot;)
* [IndicatorFactory.parse_pandas_ta_config()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config &quot;vectorbt.indicators.factory.IndicatorFactory.parse_pandas_ta_config&quot;)
* [IndicatorFactory.parse_ta_config()](/api/indicators/factory/#vectorbt.indicators.factory.IndicatorFactory.parse_ta_config &quot;vectorbt.indicators.factory.IndicatorFactory.parse_ta_config&quot;)

---

### from_choice_func &lt;span class=&quot;dobjtype&quot;&gt;method&lt;/span&gt;&lt;a class=&quot;githublink&quot; href=&quot;https://github.com/polakowo/vectorbt/blob/8936ddd22b243635d690dd5d033834e62fb31391/vectorbt/signals/factory.py#L165-L950&quot; target=&quot;_blank&quot; title=&quot;Jump to source&quot;&gt;:material-github:&lt;/a&gt; { #vectorbt.signals.factory.SignalFactory.from_choice_func data-toc-label=&#39;from_choice_func()&#39; }

```python
SignalFactory.from_choice_func(
    entry_choice_func=None,
    exit_choice_func=None,
    generate_func=generate_nb,
    generate_ex_func=generate_ex_nb,
    generate_enex_func=generate_enex_nb,
    cache_func=None,
    entry_settings=None,
    exit_settings=None,
    cache_settings=None,
    numba_loop=False,
    **kwargs
)
</code></pre></div></p> <p>Build signal generator class around entry and exit choice functions.</p> <p>A choice function is simply a function that returns indices of signals. There are two types of it: entry choice function and exit choice function. Each choice function takes broadcast time series, broadcast in-place output time series, broadcast parameter arrays, and other arguments, and returns an array of indices corresponding to chosen signals. See <a href=/api/signals/nb/#vectorbt.signals.nb.generate_nb title=vectorbt.signals.nb.generate_nb>generate_nb()</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>entry_choice_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p><code>choice_func_nb</code> that returns indices of entries.</p> <p>Defaults to <a href=/api/signals/nb/#vectorbt.signals.nb.first_choice_nb title=vectorbt.signals.nb.first_choice_nb>first_choice_nb()</a> for <code>FactoryMode.Chain</code>.</p> </dd> <dt><strong><code>exit_choice_func</code></strong> :&ensp;<code>callable</code></dt> <dd><code>choice_func_nb</code> that returns indices of exits.</dd> <dt><strong><code>generate_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Entry generation function.</p> <p>Defaults to <a href=/api/signals/nb/#vectorbt.signals.nb.generate_nb title=vectorbt.signals.nb.generate_nb>generate_nb()</a>.</p> </dd> <dt><strong><code>generate_ex_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Exit generation function.</p> <p>Defaults to <a href=/api/signals/nb/#vectorbt.signals.nb.generate_ex_nb title=vectorbt.signals.nb.generate_ex_nb>generate_ex_nb()</a>.</p> </dd> <dt><strong><code>generate_enex_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>Entry and exit generation function.</p> <p>Defaults to <a href=/api/signals/nb/#vectorbt.signals.nb.generate_enex_nb title=vectorbt.signals.nb.generate_enex_nb>generate_enex_nb()</a>.</p> </dd> <dt><strong><code>cache_func</code></strong> :&ensp;<code>callable</code></dt> <dd> <p>A caching function to preprocess data beforehand.</p> <p>All returned objects will be passed as last arguments to choice functions.</p> </dd> <dt><strong><code>entry_settings</code></strong> :&ensp;<code>dict</code></dt> <dd>Settings dict for <code>entry_choice_func</code>.</dd> <dt><strong><code>exit_settings</code></strong> :&ensp;<code>dict</code></dt> <dd>Settings dict for <code>exit_choice_func</code>.</dd> <dt><strong><code>cache_settings</code></strong> :&ensp;<code>dict</code></dt> <dd>Settings dict for <code>cache_func</code>.</dd> <dt><strong><code>numba_loop</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to loop using Numba.</p> <p>Set to True when iterating large number of times over small input.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments passed to <code>IndicatorFactory.from_custom_func</code>.</dd> </dl> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Choice functions should be Numba-compiled.</p> <p>Which inputs, parameters and arguments to pass to each function should be explicitly indicated in the function's settings dict. By default, nothing is passed.</p> <p>Passing keyword arguments directly to the choice functions is not supported. Use <code>pass_kwargs</code> in a settings dict to pass keyword arguments as positional.</p> </div> <p>Settings dict of each function can have the following keys:</p> <p><strong>Attributes</strong></p> <dl> <dt><strong><code>pass_inputs</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>Input names to pass to the choice function.</p> <p>Defaults to []. Order matters. Each name must be in <code>input_names</code>.</p> </dd> <dt><strong><code>pass_in_outputs</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>In-place output names to pass to the choice function.</p> <p>Defaults to []. Order matters. Each name must be in <code>in_output_names</code>.</p> </dd> <dt><strong><code>pass_params</code></strong> :&ensp;<code>list</code> of <code>str</code></dt> <dd> <p>Parameter names to pass to the choice function.</p> <p>Defaults to []. Order matters. Each name must be in <code>param_names</code>.</p> </dd> <dt><strong><code>pass_kwargs</code></strong> :&ensp;<code>dict</code>, <code>list</code> of <code>str</code> or <code>list</code> of <code>tuple</code></dt> <dd> <p>Keyword arguments from <code>kwargs</code> dict to pass as positional arguments to the choice function.</p> <p>Defaults to []. Order matters.</p> <p>If any element is a tuple, should contain the name and the default value. If any element is a string, the default value is None.</p> <p>Built-in keys include:</p> <ul> <li><code>input_shape</code>: Input shape if no input time series passed. Default is provided by the pipeline if <code>pass_input_shape</code> is True.</li> <li><code>wait</code>: Number of ticks to wait before placing signals. Default is 1.</li> <li> <p><code>until_next</code>: Whether to place signals up to the next entry signal. Default is True.</p> <p>Applied in <code>generate_ex_func</code> only. * <code>skip_until_exit</code>: Whether to skip processing entry signals until the next exit. Default is False.</p> <p>Applied in <code>generate_ex_func</code> only. * <code>pick_first</code>: Whether to stop as soon as the first exit signal is found. Default is False with <code>FactoryMode.Entries</code>, otherwise is True. * <code>temp_idx_arr</code>: Empty integer array used to temporarily store indices. Default is an automatically generated array of shape <code>input_shape[0]</code>.</p> <p>You can also pass <code>temp_idx_arr1</code>, <code>temp_idx_arr2</code>, etc. to generate multiple. * <code>flex_2d</code>: See <a href=/api/base/reshape_fns/#vectorbt.base.reshape_fns.flex_select_auto_nb title=vectorbt.base.reshape_fns.flex_select_auto_nb>flex_select_auto_nb()</a>. Default is provided by the pipeline if <code>pass_flex_2d</code> is True.</p> </li> </ul> </dd> <dt><strong><code>pass_cache</code></strong> :&ensp;<code>bool</code></dt> <dd> <p>Whether to pass cache from <code>cache_func</code> to the choice function.</p> <p>Defaults to False. Cache is passed unpacked.</p> </dd> </dl> <p>The following arguments can be passed to <code>run</code> and <code>run_combs</code> methods:</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>*args</code></strong></dt> <dd>Should be used instead of <code>entry_args</code> with <code>FactoryMode.Entries</code> and instead of <code>exit_args</code> with <code>FactoryMode.Exits</code> and <code>FactoryMode.Chain</code> with default <code>entry_choice_func</code>.</dd> <dt><strong><code>entry_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Arguments passed to the entry choice function.</dd> <dt><strong><code>exit_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Arguments passed to the exit choice function.</dd> <dt><strong><code>cache_args</code></strong> :&ensp;<code>tuple</code></dt> <dd>Arguments passed to the cache function.</dd> <dt><strong><code>entry_kwargs</code></strong> :&ensp;<code>tuple</code></dt> <dd>Settings for the entry choice function. Also contains arguments passed as positional if in <code>pass_kwargs</code>.</dd> <dt><strong><code>exit_kwargs</code></strong> :&ensp;<code>tuple</code></dt> <dd>Settings for the exit choice function. Also contains arguments passed as positional if in <code>pass_kwargs</code>.</dd> <dt><strong><code>cache_kwargs</code></strong> :&ensp;<code>tuple</code></dt> <dd>Settings for the cache function. Also contains arguments passed as positional if in <code>pass_kwargs</code>.</dd> <dt><strong><code>return_cache</code></strong> :&ensp;<code>bool</code></dt> <dd>Whether to return only cache.</dd> <dt><strong><code>use_cache</code></strong> :&ensp;<code>any</code></dt> <dd>Cache to use.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Should be used instead of <code>entry_kwargs</code> with <code>FactoryMode.Entries</code> and instead of <code>exit_kwargs</code> with <code>FactoryMode.Exits</code> and <code>FactoryMode.Chain</code> with default <code>entry_choice_func</code>.</dd> </dl> <p>For more arguments, see <a href=/api/indicators/factory/#vectorbt.indicators.factory.run_pipeline title=vectorbt.indicators.factory.run_pipeline>run_pipeline()</a>.</p> <p><strong>Usage</strong></p> <ul> <li>The simplest signal indicator that places True at the very first index:</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>vectorbt</span> <span class=k>as</span> <span class=nn>vbt</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>entry_choice_func</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>from_i</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>exit_choice_func</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>from_i</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>MySignals</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>SignalFactory</span><span class=p>()</span><span class=o>.</span><span class=n>from_choice_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>entry_choice_func</span><span class=o>=</span><span class=n>entry_choice_func</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>exit_choice_func</span><span class=o>=</span><span class=n>exit_choice_func</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>entry_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>wait</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
<span class=gp>... </span>    <span class=n>exit_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>wait</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span> <span class=o>=</span> <span class=n>MySignals</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>input_shape</span><span class=o>=</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>entries</span>
<span class=go>       0      1      2</span>
<span class=go>0   True   True   True</span>
<span class=go>1  False  False  False</span>
<span class=go>2   True   True   True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>exits</span>
<span class=go>       0      1      2</span>
<span class=go>0  False  False  False</span>
<span class=go>1   True   True   True</span>
<span class=go>2  False  False  False</span>
</code></pre></div> <ul> <li>Take the first entry and place an exit after waiting <code>n</code> ticks. Find the next entry and repeat. Test three different <code>n</code> values.</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.signals.factory</span> <span class=kn>import</span> <span class=n>SignalFactory</span>

<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>wait_choice_nb</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>temp_idx_arr</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>temp_idx_arr</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>from_i</span> <span class=o>+</span> <span class=n>n</span>  <span class=c1># index of next exit</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>temp_idx_arr</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>to_i</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>temp_idx_arr</span><span class=p>[:</span><span class=mi>1</span><span class=p>]</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>temp_idx_arr</span><span class=p>[:</span><span class=mi>0</span><span class=p>]</span>  <span class=c1># must return array anyway</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Build signal generator</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>MySignals</span> <span class=o>=</span> <span class=n>SignalFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>mode</span><span class=o>=</span><span class=s1>&#39;chain&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;n&#39;</span><span class=p>]</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_choice_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>exit_choice_func</span><span class=o>=</span><span class=n>wait_choice_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>exit_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>pass_params</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;n&#39;</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>pass_kwargs</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;temp_idx_arr&#39;</span><span class=p>]</span>  <span class=c1># built-in kwarg</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Run signal generator</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=p>[</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span> <span class=o>=</span> <span class=n>MySignals</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>entries</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>])</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>entries</span>  <span class=c1># input entries</span>
<span class=go>custom_n     0     1     2</span>
<span class=go>0         True  True  True</span>
<span class=go>1         True  True  True</span>
<span class=go>2         True  True  True</span>
<span class=go>3         True  True  True</span>
<span class=go>4         True  True  True</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>new_entries</span>  <span class=c1># output entries</span>
<span class=go>custom_n      0      1      2</span>
<span class=go>0          True   True   True</span>
<span class=go>1         False  False  False</span>
<span class=go>2          True  False  False</span>
<span class=go>3         False   True  False</span>
<span class=go>4          True  False   True</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>exits</span>  <span class=c1># output exits</span>
<span class=go>custom_n      0      1      2</span>
<span class=go>0         False  False  False</span>
<span class=go>1          True  False  False</span>
<span class=go>2         False   True  False</span>
<span class=go>3          True  False   True</span>
<span class=go>4         False  False  False</span>
</code></pre></div> <ul> <li>To combine multiple iterative signals, you would need to create a custom choice function. Here is an example of combining two random generators using "OR" rule (the first signal wins):</li> </ul> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>numba</span> <span class=kn>import</span> <span class=n>njit</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>namedtuple</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.indicators.configs</span> <span class=kn>import</span> <span class=n>flex_elem_param_config</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.signals.factory</span> <span class=kn>import</span> <span class=n>SignalFactory</span>
<span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>vectorbt.signals.nb</span> <span class=kn>import</span> <span class=n>rand_by_prob_choice_nb</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Enum to distinguish random generators</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>RandType</span> <span class=o>=</span> <span class=n>namedtuple</span><span class=p>(</span><span class=s1>&#39;RandType&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;R1&#39;</span><span class=p>,</span> <span class=s1>&#39;R2&#39;</span><span class=p>])(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Define exit choice function</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>rand_exit_choice_nb</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>rand_type</span><span class=p>,</span> <span class=n>prob1</span><span class=p>,</span>
<span class=gp>... </span>                        <span class=n>prob2</span><span class=p>,</span> <span class=n>temp_idx_arr1</span><span class=p>,</span> <span class=n>temp_idx_arr2</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>idxs1</span> <span class=o>=</span> <span class=n>rand_by_prob_choice_nb</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>prob1</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=n>temp_idx_arr1</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>idxs1</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>to_i</span> <span class=o>=</span> <span class=n>idxs1</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>  <span class=c1># no need to go beyond first the first found signal</span>
<span class=gp>... </span>    <span class=n>idxs2</span> <span class=o>=</span> <span class=n>rand_by_prob_choice_nb</span><span class=p>(</span><span class=n>from_i</span><span class=p>,</span> <span class=n>to_i</span><span class=p>,</span> <span class=n>col</span><span class=p>,</span> <span class=n>prob2</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=n>temp_idx_arr2</span><span class=p>,</span> <span class=n>flex_2d</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>idxs2</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>rand_type</span><span class=p>[</span><span class=n>idxs2</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>RandType</span><span class=o>.</span><span class=n>R2</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>idxs2</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>idxs1</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>rand_type</span><span class=p>[</span><span class=n>idxs1</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>col</span><span class=p>]</span> <span class=o>=</span> <span class=n>RandType</span><span class=o>.</span><span class=n>R1</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>idxs1</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=n>temp_idx_arr1</span><span class=p>[:</span><span class=mi>0</span><span class=p>]</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Build signal generator</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>MySignals</span> <span class=o>=</span> <span class=n>SignalFactory</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>mode</span><span class=o>=</span><span class=s1>&#39;chain&#39;</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>in_output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;rand_type&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>param_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;prob1&#39;</span><span class=p>,</span> <span class=s1>&#39;prob2&#39;</span><span class=p>],</span>
<span class=gp>... </span>    <span class=n>attr_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>rand_type</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dtype</span><span class=o>=</span><span class=n>RandType</span><span class=p>)</span>  <span class=c1># creates rand_type_readable</span>
<span class=gp>... </span>    <span class=p>)</span>
<span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>from_choice_func</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>exit_choice_func</span><span class=o>=</span><span class=n>rand_exit_choice_nb</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>exit_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>pass_in_outputs</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;rand_type&#39;</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>pass_params</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;prob1&#39;</span><span class=p>,</span> <span class=s1>&#39;prob2&#39;</span><span class=p>],</span>
<span class=gp>... </span>        <span class=n>pass_kwargs</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;temp_idx_arr1&#39;</span><span class=p>,</span> <span class=s1>&#39;temp_idx_arr2&#39;</span><span class=p>,</span> <span class=s1>&#39;flex_2d&#39;</span><span class=p>]</span>
<span class=gp>... </span>    <span class=p>),</span>
<span class=gp>... </span>    <span class=n>param_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
<span class=gp>... </span>        <span class=n>prob1</span><span class=o>=</span><span class=n>flex_elem_param_config</span><span class=p>,</span>  <span class=c1># param per frame/row/col/element</span>
<span class=gp>... </span>        <span class=n>prob2</span><span class=o>=</span><span class=n>flex_elem_param_config</span>
<span class=gp>... </span>    <span class=p>),</span>
<span class=gp>... </span>    <span class=n>pass_flex_2d</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=gp>... </span>    <span class=n>rand_type</span><span class=o>=-</span><span class=mi>1</span>  <span class=c1># fill with this value</span>
<span class=gp>... </span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=c1># Run signal generator</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>entries</span> <span class=o>=</span> <span class=p>[</span><span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span><span class=p>]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span> <span class=o>=</span> <span class=n>MySignals</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>entries</span><span class=p>,</span> <span class=p>[</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>1.</span><span class=p>],</span> <span class=p>[</span><span class=mf>0.</span><span class=p>,</span> <span class=mf>1.</span><span class=p>],</span> <span class=n>param_product</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>new_entries</span>
<span class=go>custom_prob1           0.0           1.0</span>
<span class=go>custom_prob2    0.0    1.0    0.0    1.0</span>
<span class=go>0              True   True   True   True</span>
<span class=go>1             False  False  False  False</span>
<span class=go>2             False   True   True   True</span>
<span class=go>3             False  False  False  False</span>
<span class=go>4             False   True   True   True</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>exits</span>
<span class=go>custom_prob1           0.0           1.0</span>
<span class=go>custom_prob2    0.0    1.0    0.0    1.0</span>
<span class=go>0             False  False  False  False</span>
<span class=go>1             False   True   True   True</span>
<span class=go>2             False  False  False  False</span>
<span class=go>3             False   True   True   True</span>
<span class=go>4             False  False  False  False</span>

<span class=gp>&gt;&gt;&gt; </span><span class=n>my_sig</span><span class=o>.</span><span class=n>rand_type_readable</span>
<span class=go>custom_prob1     0.0     1.0</span>
<span class=go>custom_prob2 0.0 1.0 0.0 1.0</span>
<span class=go>0</span>
<span class=go>1                 R2  R1  R1</span>
<span class=go>2</span>
<span class=go>3                 R2  R1  R1</span>
<span class=go>4</span>
</code></pre></div> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/polakowo title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg> </span> </a> <hr> </footer> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Oleg Polakow. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tracking", "navigation.indexes", "navigation.tabs", "navigation.instant", "search.suggest", "search.share"], "search": "../../../assets/javascripts/workers/search.f2da59ea.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.65061dd4.min.js></script> <script src=../../../assets/javascripts/extra.js></script> </body> </html>